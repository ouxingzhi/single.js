define("app/base",[],function(e){function n(){var e=document.getElementsByTagName("body");return e&&e[0]}function t(e){var t=document.createElement("iframe");t.src=e,t.style.display="none";var a=n();a&&(a.appendChild(t),setTimeout(function(){a.removeChild(t),t=null},200))}var a="ttpod://",c="js_request",r="app.",o="service",u="params",l="ack",f="callback",i="error",s="cancel",p="confirm",d=function(e){var n=0;return function(){return e+n++}}((new Date).valueOf()+~~(1e8*Math.random())),m=function(){function e(e,n,t){return{fn:e,space:n,onlyone:t}}function n(n,t,a,c,r){switch(a){case f:h[n]=e(t,c,r);break;case i:k[n]=e(t,c,r);break;case s:b[n]=e(t,c,r);break;case p:g[n]=e(t,c,r);break;default:return null}}function m(e){delete e.fn,delete e.space,delete e.onlyone}function y(e){h[e]&&m(h[e]),delete h[e],k[e]&&m(k[e]),delete k[e],b[e]&&m(b[e]),delete b[e],g[e]&&m(g[e]),delete confirm[e]}function v(e,t,m){var y=[];y.push(o+"="+e),t&&y.push(u+"="+encodeURIComponent($.param(t))),m=m||{};var v=d();return"function"==typeof m.callback&&(n(v,m.callback,f,m.space,m.onlyone),y.push(f+"="+r+f)),"function"==typeof m.error&&(n(v,m.error,i,m.space,m.onlyone),y.push(i+"="+r+i)),"function"==typeof m.cancel&&(n(v,m.cancel,s,m.space,m.onlyone),y.push(s+"="+r+s)),"function"==typeof m.confirm&&(n(v,m.confirm,p,m.space,m.onlyone),y.push(p+"="+r+p)),y.push(l+"="+v),{url:a+c+"?"+y.join("&"),ack:v}}var h={},k={},b={},g={},w=function(e,n,t){var a=e[n];t=[].slice.call(t,1),a&&(a.fn.apply(a.space||this,t),a.onlyone&&(delete e[n],a.fn=a.space=null))},C={};return C[f]=function(e){w(h,e,arguments)},C[i]=function(e){w(k,e,arguments)},C[s]=function(e){w(b,e,arguments)},C[p]=function(e){w(g,e,arguments)},window.app=C,{create:function(e,t,a){var c=d();return n(c,e,f,t,a),c},call:function(e,n){n=n||{};var a=v(e,n.params,n);return t(a.url),a.ack},del:function(e){y(e)}}}();return m});
define("base/base",[],function(){"use strict";function r(r){var n=r.split("."),t=[];return i.each(n,function(r,n){var e;r.match(a)?(e=r.split("["),i.each(e,function(r,n){r&&t.push(r.replace(/[\]"']+/g,""))})):t.push(r)}),t}var n=Array.prototype,t=n.slice,e=Object.prototype.toString,i={};i.hasProp=function(r,n){return r.hasOwnProperty(n)};var u={};i.type=function(r){if(void 0===r)return"undefined";if(null===r)return"null";var n=e.call(r);if(u[n])return u[n];var t=n.replace(/^\[object\s+|\]$/g,"").toLowerCase();return u[n]=t},i.each=function(r,n,t,e){var u,a,f=i.type(r);if("array"===f||"arguments"===f||r.length){if(e){for(u=r.length-1;u>-1;u--)if(n.call(t,r[u],u,r))return}else for(u=0,a=r.length;a>u;u++)if(n.call(t,r[u],u,r))return}else for(u in r)if(i.hasProp(r,u)&&n.call(t,r[u],u,r))return},i.mix=function(r,n,e){var u=t.call(arguments),a=u.shift()||{},e=!0;return u.length&&"boolean"===i.type(u[u.length-1])&&(e=u.pop()),i.each(u,function(r){i.each(r,function(r,n){e?a[n]=r:a[n]||(a[n]=r)})}),a},i.bind=function(r,n){return r.bind?r.bind(n):function(){return r.apply(n,arguments)}},i.toArray=function(r){try{return t.call(r)}catch(n){var e=[];return i.each(r,function(r){e.push(r)}),e}},i.indexOf=function(r,n){var t=-1,e=function(r){return r===n};return"function"==typeof n&&(e=n),i.each(r||[],function(r,n){return e(r)?(t=n,!0):void 0}),t},i.isEmpty=function(r){if(!r)return!0;var n=i.type(r);if("array"===n&&r.length)return!1;if("object"===n)for(var t in r)if(r.hasOwnProperty(t))return!1;return!0},i.isNUL=function(r){return null===r||void 0===r};var a=/\[[^\[\]]+\]/g;return i.path=function(n,t,e){var i=n;if(n&&t){var u,a,f=r(t),o=Math.max(f.length-1,0),c=0;if(void 0===e){for(;o>=c&&(a=f[c],u=n&&n[a],u);c++)n=u;return u}for(;o>=c;c++)a=f[c],o>c?n=n[a]=n[a]||{}:n[a]=e;return i}},i.delPath=function(n,t){if(n&&t){for(var e,i,u=r(t),a=Math.max(u.length-1,0),f=0;a>=f;f++)if(i=u[f],a>f){if(n=n&&n[i],!n)break}else e=n[i],delete n[i];return e}},i});
define("base/class",["base/base"],function(t,n,i){"use strict";function r(){}function e(t,n){return t=t||r,n=n||r,function(){var i=[s.bind(t,this)].concat(s.toArray(arguments));return n.apply(this,i)}}function o(t){var n=function(){};return n.prototype=t.prototype,new n}function p(t,n){function i(){if(!(this instanceof i)){var t=o(i);return i.apply(t,arguments),t}this.propertys.apply(this,arguments),this.initialize.apply(this,arguments)}function s(){}"object"==typeof t&&(n=t,t=function(){});var y,f=t.prototype;s.prototype=t.prototype,i.prototype=new s;for(y in n)n.hasOwnProperty(y)&&c[y]!==u&&(i.prototype[y]="function"==typeof f[y]&&n[y].toString().match(a)?e(f[y],n[y]):n[y]);i.prototype.propertys=function(t,n){return function(){t&&t.apply(this,arguments),n&&n.apply(this,arguments)}}(i.prototype.propertys,n.propertys),i.prototype.initialize=n.initialize&&n.initialize.toString().match(a)?e(f.initialize,n.initialize):n.initialize||r,i.prototype.constructor=i;for(y in t)t.hasOwnProperty(y)&&"instance"!==y&&(i[y]=t[y]);return i.extend=function(t){return p(this,t)},i.addPropertys=function(t){var n=this.prototype;for(y in t)t.hasOwnProperty(y)&&c[y]!==u&&(n[y]="function"==typeof n[y]&&t[y].toString().match(a)?e(n[y],t[y]):t[y]);return this},i.getInstance=function(){return this.instance?this.instance:(this.instance={__proto__:this.prototype},this.apply(this.instance,arguments),this.instance)},i}var s=t("base/base"),a=/^\s*function[^\(\)]*\(\s*\$super/,u={},c={constrcutor:u,propertys:u,initialize:u};return p});
define("base/event",["base/base","base/object","base/var"],function(e,n,t){var v=e("base/base"),s=e("base/object"),a=e("base/var"),i=s.extend({propertys:function(){this.__event=a({})},on:function(e,n,t,s){var a=this.__event;a.v[e]=a.v[e]||[],s&&-1!==v.indexOf(a.v[e],function(e){return n===e.fn})||a.v[e].push({fn:n,space:t})},off:function(e,n){if(!e&&!n)return this.__event.v.del(),void(this.__event=a({}));var t,v=this.__event;v.v[e]=v.v[e]||[],n?(t=ase.indexOf(v.v[e],function(e){return n===e.fn}),t>-1&&v.v[e].splice(t,1)):v.v[e]=[]},emit:function(e,n){var t=this.__event,s=this;t.v[e]=t.v[e]||[];var a=v.toArray(arguments);a.shift(),v.each(t.v[e],function(e){e.fn.apply(e.space||s,a)})}});return i});
define("base/hash",["base/object","base/object"],function(e,s,t){var i=e("base/object"),n=e("base/object");return i.extend({propertys:function(){this.keys=[],this.values={}},initialize:function($super,e){$super(),e=e||[];for(var s=0,t=e.length;t>s;s++)this.push(e[s].key,e[s].value)},push:function(e,s){null!==e&&void 0!==e&&(this.values[e]&&this.del(e),this.keys.push(e),this.values[e]=s)},pop:function(){var e=this.keys.pop(),s=this.values[e];return e||s?(delete this.values[e],{key:e,value:s}):null},shift:function(){var e=this.keys.shift(),s=this.values[e];return e||s?(delete this.values[e],{key:e,value:s}):null},unshift:function(e,s){null!==e&&void 0!==e&&(this.values[e]&&this.del(e),this.keys.unshift(e),this.values[e]=s)},del:function(e){var s=this.keys.indexOf(e);if(-1===s)return null;var e,t;return e=this.keys.splice(s,1),t=this.values[e],delete this.values[e],{key:e,value:t}},get:function(e){return this.values[e]},splice:function(e,s,t){"boolean"===n.type(s)&&(s=null,t=s),e||(e=0);var i=Math.max(this.keys.length-1,0);keys=this.keys.slice(),rkeys=[],t?(e=i-e,keys.reverse(),rkeys=n.isNUL(s)?keys.splice(e):keys.splice(e,s)):rkeys=n.isNUL(s)?keys.splice(e):keys.splice(e,s);var u=[],l=this;return n.each(rkeys,function(e){var s=l.del(e);s&&u.push(s)}),t&&u.reverse(),u},slice:function(e,s){e||(e=0);Math.max(this.keys.length-1,0);keys=this.keys,rkeys=n.isNUL(s)?keys.slice(e):keys.slice(e,s);var t=[],i=this;return n.each(rkeys,function(e){var s=i.get(e);s&&t.push({key:e,value:s})}),t},toString:function(){return JSON.stringify(this.slice())},valueOf:function(){return this.slice()}})});
define("base/log",[],function(){function o(){return"boolean"==typeof __SINGE_DEBUG__&&__SINGE_DEBUG__===!0}return{log:function(n,e){o()&&(e||(e="default"),console.log(e+": "+n))},err:function(n,e){o()&&(e||(e="default"),console.error(e+": "+n))}}});
define("base/object",["base/class","base/var"],function(s,a,e){var t=s("base/class"),n=s("base/var"),r=t({destruct:function(){var s;for(var a in this)this.hasOwnProperty(a)&&(s=this[a],s instanceof n&&s.del(),this[a]=null)}});return r});
define("base/promise",[],function(){function t(e){this.state=t.STATE_UNFULFILLED,this.resolveCallbacks=[],this.rejecteCallbacks=[],e&&setTimeout(function(){e(r(this.resolve,this),r(this.reject,this))},0)}var e=Array.prototype.slice,s=Array.prototype.indexOf||function(t){for(var e=0,s=this.length;s>e;e++)if(t===this[e])return e;return-1},r=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}};return t.STATE_UNFULFILLED=0,t.STATE_RESOLVED=1,t.STATE_REJECTED=2,t.prototype={constructor:t,when:function(){var r=new t,n=e.call(arguments),i=[],a=this,l=function(e){if(a.state===t.STATE_UNFULFILLED){var l=s.call(n,this);l>-1&&(n.splice(l,1),i[l]=e),n.length||(r.resolve(i),a.state=t.STATE_RESOLVED)}},o=function(){if(a.state===t.STATE_UNFULFILLED){var e=s.call(n,this);e>-1&&n.splice(e,1),n.length||(r.reject(),a.state=t.STATE_REJECTED)}};if(n.length)for(var c=0,h=n.length;h>c;c++){if(!(n[c]instanceof t))throw"when() Parameter must be a type of Promise";n[c].then(l,o)}else setTimeout(function(){a.resolve()},0);return r},then:function(s,n){var i=new t,a=this;return s&&this.resolveCallbacks.push(function(){var t=[r(i.resolve,i),r(i.reject,i)].concat(e.call(arguments));s.apply(a,t)}),n&&this.rejecteCallbacks.push(function(){{var t=[r(i.reject,i)].concat(e.call(arguments));n.apply(a,t)}}),i},resolve:function(){var e=arguments;setTimeout($.proxy(function(){if(this.state===t.STATE_UNFULFILLED){for(var s=0,r=this.resolveCallbacks.length;r>s;s++)this.resolveCallbacks[s].apply(this,e);this.state=t.STATE_RESOLVED}},this),0)},reject:function(){var e=arguments;setTimeout($.proxy(function(){if(this.state===t.STATE_UNFULFILLED){for(var s=0,r=this.rejecteCallbacks.length;r>s;s++)this.rejecteCallbacks[s].apply(this,e);this.state=t.STATE_REJECTED}},this),0)}},t});
define("base/var",[],function(){function n(n){if(n!==e){var r={del:function(){n=null},__proto__:t};return Object.defineProperty(r,"v",{get:function(){return n},set:function(e){n=e}}),r}}var e={},t=new n(e);return n});
define("common/funs",["base/base"],function(e,n,r){var t=(e("base/base"),{});return t.createAddSelf=function(e){return e=e||0,function(){return e++}},t});
define("common/scroll",[],function(){function t(t){return null===t||void 0===t}function i(t,s,i){var o,e;if(m(t)){if(i){for(o=t.length-1,e=-1;o>e;o--)if(s(t[o],o))return}else for(o=0,e=t.length;e>o;o++)if(s(t[o],o))return}else for(o in t)if(t.hasOwnProperty(o)&&s(t[o],o))return}function o(t,s){var i=t.className.split(" ");i.indexOf(s)>-1||(i.push(s),t.className=i.join(" "))}function e(t,s){var i,o=t.className.split(" ");-1!==(i=o.indexOf(s))&&(o.splice(i,1),t.className=o.join(" "))}function l(t,s,i){return!i&&t.style[s]?t.style[s]:i?void(t.style[s]=i):(window.getComputedStyle(t)||{})[s]}function n(t,s){var o=document.createElement(t);return s=s||{},i(s,function(t,s){o.setAttribute(s,t)}),o}function a(t){return _+t}function r(t,s,i){l(t,a("transform"),"translate3d("+s+"px,"+i+"px,0px)")}function c(t){var s,i,o=l(t,a("transform"));return o&&"none"!=o?(s=o.match(w))?i={x:parseInt(s[1])||0,y:parseInt(s[2])||0,z:parseInt(s[3])||0}:(s=o.match(X))&&(i={x:parseInt(s[1])||0,y:(o.match(Y)||{})[1]||0,z:0}):i={x:0,y:0,z:0},i}function h(t,s){var i=s,o=-s;return t>i?i:o>t?o:t}function u(t,s){return Math.max(Math.abs(t),Math.abs(s))}function d(t,s){for(var i=t.childNodes,o=i.length,e=0;o>e;e++)s.appendChild(i[0]);return t.appendChild(s),t}function b(t){this.box,this.scroll=!0,this.subbox,this.scrollbarX,this.scrollbarY,this.startDomX=0,this.startDomY=0,this.startMouseX=0,this.startMouseY=0,this.isMouseDown=!1,this.acceler=new M,this.elastic=!1,this.elasticX=!0,this.elasticY=!0,this.currentSid,this.events={},this.lastX=0,this.lastY=0,this.setOption(t),this.init()}var x=Array.prototype,f=(x.slice,Object.prototype.toString),p=function(t){var s,i=p.__cache=p.__cache||{},o=f.call(t);return i[o]?i[o]:(s=o.replace(/^\[\w+\s+(\w+)\]$/,"$1").toLowerCase(),i[o]=s)},m=function(t){return"array"===p(t)},v="ontouchend"in document,y=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},S=30,_=function(t){return"transform"in t?"":"-webkit-transform"in t?"-webkit-":"MozTransform"in t?"-moz-":"-o-transform"in t?"-o-":"-ms-transform"in t?"-ms-":null}(n("div").style),w=/translate3d\(\s*(-?[\d\.]+\w+)\s*,\s*(-?[\d\.]+\w+)\s*,\s*(-?[\d\.]+\w+)\s*\)/i,X=/translateX\(\s*(-?[\d\.]+\w+)\s*\)/i,Y=/translateY\(\s*(-?[\d\.]+\w+)\s*\)/i,M=function(){function t(){this.list=[],this.lastX=0,this.lastY=0,this.state=t.STATE_STOP}return t.STATE_STOP=0,t.STATE_START=1,t.prototype={clear:function(){this.list=[]},add:function(t,s){this.endLoop(),this.lastX=t,this.lastY=s,this._add(t,s),this.startLoop()},_add:function(t,s){this.list.unshift({date:(new Date).valueOf(),x:t,y:s}),this.list.length>2&&this.list.splice(3)},startLoop:function(){var t=this;this.resource=setTimeout(function(){t._add(t.lastX,t.lastY),t.startLoop()},40)},endLoop:function(){clearTimeout(this.resource)},end:function(t,i){this._add(t,i),this.endLoop();var o=this.list.length;if(2>o)return{x:0,y:0};for(var e,l,n=0,o=this.list.length,t=0,i=0;o>n&&(e=this.list[n],l=this.list[n+1],e&&l);n++)s=1/(l.date-e.date||1),t+=s*(l.x-e.x),i+=s*(l.y-e.y);return t/=n||1,i/=n||1,{x:t,y:i}}},t}(),P=v?function(t){return t.changedTouches[0]}:function(t){return t},g=v?"touchstart":"mousedown",z=v?"touchmove":"mousemove",B=v?"touchend":"mouseup";return b.prototype={constructor:b,setOption:function(s){t(s.box)||(this.box=s.box),t(s.scroll)||(this.scroll=s.scroll),t(s.onscroll)||this.on("onscroll",s.onscroll),t(s.onscrollend)||this.on("onscrollend",s.onscrollend),t(s.elastic)||(this.elastic=s.elastic),t(s.elasticX)||(this.elasticX=s.elasticX),t(s.elasticY)||(this.elasticY=s.elasticY)},on:function(t,s){var i=this.events[t]=this.events[t]||[];-1===i.indexOf(s)&&i.push(s)},off:function(t,s){var i=this.events[t]=this.events[t]||[];if(!s)return void(i[t]=null);var o=i.indexOf(s);o>-1&&i.splice(o,1)},emit:function(t,s){for(var i=this.events[t]=this.events[t]||[],o=0,e=i.length;e>o;o++)i[o].call(this,s)},init:function(){if(!this.box)throw"Parameters 'box' are not found!";this.initDom(),this.initEvent(),this._startAutoCalcScrollSize()},initDom:function(){o(this.box,"silky-box");var t=l(this.box,"position");t&&"static"!==t||l(this.box,"position","relative"),this.subbox=n("div",{"class":"silky-subbox"}),this.scrollbarX=n("div",{"class":"silky-scrollbarx"}),this.scrollbarY=n("div",{"class":"silky-scrollbary"}),this.scroll||(l(this.scrollbarX,"display","none"),l(this.scrollbarX,"display","inline-block")),d(this.box,this.subbox),this.box.appendChild(this.scrollbarX),this.box.appendChild(this.scrollbarY),this._calcScrollBarSize()},initEvent:function(){this.box.addEventListener(g,this,!1),this.box.addEventListener(z,this,!1),this.box.addEventListener(B,this,!1),v&&this.box.addEventListener("touchcancel",this,!1)},handleEvent:function(t){var s,i,l,n,a,r=P(t);switch(t.type){case g:this._stopAutoCalcScrollSize(),e(this.subbox,"silky-letgo"),this.startMouseX=r.clientX,this.startMouseY=r.clientY,a=c(this.subbox),this.startDomX=a.x,this.startDomY=a.y,this.isMouseDown=!0,this.currentSid&&(this.currentSid.stop=!0),this.acceler.clear(),this.acceler.add(r.clientX,r.clientY);break;case z:if(!this.isMouseDown)return;s=r.clientX-this.startMouseX,i=r.clientY-this.startMouseY,l=this.startDomX+s,n=this.startDomY+i,a=spos=this._calcPos(l,n),this.elastic&&(a=this._calcOverflow(l,n,a.x,a.y),this.elasticX||(a.x=spos.x),this.elasticY||(a.y=spos.y)),this._calcScrollBarPos(a.x,a.y,a.dx,a.dy),this._setSubBoxPos(a.x,a.y),t.preventDefault(),this._calcScrollBarSize(a.dx,a.dy),this.acceler.add(r.clientX,r.clientY),this.emit("scroll",this.getPosition());break;case B:case"touchcancel":this.isMouseDown=!1,s=r.clientX-this.startMouseX,i=r.clientY-this.startMouseY,l=this.startDomX+s,n=this.startDomY+i,a=this._calcPos(l,n),this._calcScrollBarSize(),o(this.subbox,"silky-letgo"),this.currentSid={stop:!1},this._slowStart(this.acceler.end(r.clientX,r.clientY),{x:l-a.x,y:n-a.y}),this.emit("scroll",this.getPosition())}},_setSubBoxPos:function(t,s){this.lastX=parseInt(t),this.lastY=parseInt(s),r(this.subbox,this.lastX,this.lastY)},_calcPos:function(t,s){var i=this.subbox.clientWidth,o=this.subbox.clientHeight,e=this.box.clientWidth,l=this.box.clientHeight;i=e>i?e:i,o=l>o?l:o;var n=s>=0,a=l>=o+s,r=t>=0,c=e>=i+t;return n?s=0:a&&(s=-(o-l)),r?t=0:c&&(t=-(i-e)),{x:t,y:s}},_calcOverflow:function(t,s,i,o){var e=(t-i)/4,l=(s-o)/4;return{x:i+e,y:o+l,dx:e,dy:l}},_calcScrollBarSize:function(t,s){t=Math.abs(t||0),s=Math.abs(s||0);var i=this.box.clientWidth,o=this.subbox.clientWidth,e=this.box.clientHeight,n=this.subbox.clientHeight,a=i/(o+t),r=e/(n+s);a=a>1?1:a,r=r>1?1:r;var c=a*this.box.clientWidth,h=r*this.box.clientHeight;l(this.scrollbarX,"width",c+"px"),l(this.scrollbarY,"height",h+"px"),i>=o?l(this.scrollbarX,"display","none"):l(this.scrollbarX,"display","inline-block"),e>=n?l(this.scrollbarY,"display","none"):l(this.scrollbarY,"display","inline-block")},_calcScrollBarPos:function(t,s,i,o){i=Math.abs(i||0),o=Math.abs(o||0);var e=this.subbox.clientWidth+i,l=this.subbox.clientHeight+o,n=this.box.clientWidth,a=this.box.clientHeight;e=n>e?n:e,l=a>l?a:l;var c=-(t/(e-n)||0),h=-(s/(l-a)||0),o=h*(a-this.scrollbarY.clientHeight),i=c*(n-this.scrollbarX.clientWidth);o=Math.max(o,0),i=Math.max(i,0),r(this.scrollbarY,0,o),r(this.scrollbarX,i,0)},_reCalcScrollBarPos:function(){this._calcScrollBarPos(this.lastX||0,this.lastY||0)},_slowStart:function(t,s){var i=h(t.x,3)*S,o=h(t.y,3)*S,e=u(s.x,s.y),l=u(i,o),n=1.1-Math.min((Math.pow(e,2)+l)/1e4,10)/10,a=15*n;this._slowLoop(this.currentSid,90,90,i,o,a)},_slowLoop:function(t,s,i,o,e,l){var n=Math.sin(i/s*Math.PI/2),a=l,r=a-(s-i);0>r&&(r=0);var h=Math.sin(r/a*Math.PI/2),u=c(this.subbox),d=u.x+o,b=u.y+e,x=this._calcPos(d,b),f=0,p=0,m={},v=x.x,S=x.y;if(this.elastic&&(f=(d-x.x)*h,p=(b-x.y)*h,m=this._calcOverflow(d,b,x.x,x.y),this.elasticX&&(v=x.x+f),this.elasticY&&(S=x.y+p)),0>=i||t.stop||Math.max(Math.abs(o),Math.abs(e))<1&&(Math.max(Math.abs(f),Math.abs(p))<1||v===this._lastRealScrollX&&S===this._lastRealScrollY))return this.emit("scrollend",this.getPosition()),this._setSubBoxPos(x.x,x.y),void this._startAutoCalcScrollSize();this._lastRealScrollY=S,this._lastRealScrollX=v,this._setSubBoxPos(v,S),this._calcScrollBarPos(v,S),this._calcScrollBarSize(m.dx,m.dy),this.emit("scroll",this.getPosition());var _=this;y(function(){_._slowLoop(t,s,i-1,o*n,e*n,l)})},_startAutoCalcScrollSize:function(){var t=this;this.autoscrollsize=setTimeout(function(){t._calcScrollBarSize(),t._reCalcScrollBarPos(),t._startAutoCalcScrollSize()},1e3)},_stopAutoCalcScrollSize:function(){clearTimeout(this.autoscrollsize)},to:function(t,s){t=-t,s=-s;var i=this._calcPos(t,s);this._setSubBoxPos(i.x,i.y),this._calcScrollBarSize(),this._calcScrollBarPos(i.x,i.y)},getPosition:function(){var t=c(this.subbox);return{x:t.x?-t.x:t.x,y:t.y?-t.y:t.y}}},b});
define("common/url.hash",["base/base","base/object"],function(t,i,e){function s(t){var i=[];return h.each(t,function(t,e){i.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),i.join("&")}var h=t("base/base"),n=t("base/object"),r=/^(?:([^:\/!?&=|]+):)?([^!?&|]+)?(?:!([^!?&|]+))?(?:\?((?:[^?=&|]+=[^?=&|]+(?:&[^?=&|]+=[^?=&|]+)*)?))?((?:\|[^|]+)*)?$/i,u=/([^=&]*)=([^=&]*)/g,a=n.extend({propertys:function(){this.frame="",this.view="",this.path=[],this.query={},this.ids=[],this.fullhash=""},initialize:function(t){var i=h.type(t);"object"===i?h.mix(this,t):"string"===i&&h.mix(this,a.parse(t))},setFrame:function(t){return t?(this.frame=t,this):this},getFrame:function(){return this.frame},setView:function(t){return t?(this.view=t,this):this},getView:function(){return this.view},setPath:function(t,i){return i?(0>t&&(t=0),t>this.path.length&&(t=this.path.length),this.path[t]=i,this):this},getPath:function(t){return this.path[t]},delPath:function(t){return 0>t||t>=this.path.length?this:(this.path.splice(t,1),this)},setQuery:function(t,i){return t&&i?(this.query[t]=i,this):this},getQuery:function(t){return t?this.query[t]:void 0},delQuery:function(t){return delete this.query[t],this},setId:function(t){return this.exsitId(t)||this.ids.push(t),this},delId:function(t){var i=this.ids.indexOf(t);return i>-1&&this.ids.splice(i,1),this},exsitId:function(t){return this.ids.indexOf(t)>-1},getFullHash:function(){return fullhash},buildUrl:function(){var t=[];return this.frame&&(t.push(this.frame),t.push(":")),this.view&&t.push(this.view),this.path&&this.path.length&&(t.push("!"),t.push(this.path.join("/"))),h.isEmpty(this.query)||(t.push("?"),t.push(s(this.query))),this.ids&&this.ids.length&&(t.push("|"),t.push(this.ids.join("|"))),t.join("")},clone:function(){var t=new a;return h.mix(t,this,!0)},toString:function(){return this.buildUrl()},valueOf:function(){return h.mix({},this)}});return a.parse=function(t){var i=(t||"").replace(/^#+/,"");return m=i.match(r)||[],frame=m[1],view=m[2],path=(m[3]||"").replace(/^\/+|\/+$/,""),paths=path?path.split("/"):[],query=m[4],querys=function(t){var i={};return t.replace(u,function(t,e,s){i[e]=s}),i}(query||""),id=(m[5]||"").replace(/^\|+|\|+$/,""),ids=id?id.split("|"):[],{frame:frame,view:view,path:paths,query:querys,ids:ids,fullhash:i}},a});
define("common/url",["base/base","base/object"],function(s,t,h){var e=s("base/base"),a=s("base/object"),i=/^\s*(?:(^[a-z]+):)?(?:\/\/([^\/]+))?([^#?]*)(?:\?([^#]*))?(?:#(.*))?\s*$/im,r=/([^=&]*)=([^=&]*)/g,n=/^\s*\/|\/\s*$/i,o=a.extend({propertys:function(){this.protocol="",this.host="",this.path="",this.paths=[],this.search="",this.searchs={},this.hash=""},initialize:function(s){e.mix(this,o.parse(s))},buildUrl:function(){var s,t=[],h=this.data||{};return h.protocol&&(t.push(h.protocol),t.push(":")),h.home&&(t.push("//"),t.push(h.home)),h.paths&&(t.push("/"),t.push(h.paths.join("/"))),h.searchs&&(s=[],e.each(h.searchs,function(t,h){"array"===e.type(t)?e.each(t,function(t){s.push(h+"="+t)}):s.push(h+"="+t)}),s.length&&(t.push("?"),t.push(s.join("&")))),h.hash&&(t.push("#"),t.push(h.hash)),t.join("")},setProtocol:function(s){return this.protocol=s,this},setHost:function(s){return this.host=s,this},setPath:function(s){return this.path=s,this.paths=this.path.replace(n,"").split("/"),this},setPaths:function(s,t){return s=s||0,s>this.paths.length&&(s=this.paths.length),this.paths[s]=t,this},setSearch:function(s){this.search=s;var t=o.parse(s||"");return this.searchs=t.searchs,this},setHash:function(s){return this.hash=s,this}});return o.parse=function(s){var t=(s||"").match(i)||[],h={},e=[];return t[3]&&(e=t[3].replace(n,"").split("/")),t[4]&&t[4].replace(r,function(s,t,e){h[t]?("string"==typeof h[t]&&(h[t]=[h[t]]),h[t].push(e)):h[t]=e}),{protocol:t[1]||"",home:t[2]||"",path:t[3]||"",paths:e,search:t[4]||"",searchs:h,hash:t[5]||""}},o});
define("model/form.model",["model/model"],function(e,t,a){var o=e("model/model");return o.extend({propertys:function(){this.ajaxType="post"},ajaxRequest:function(e,t,a,o){var n=this;return $.ajax({url:e,data:t,type:this.ajaxType,dataType:"json",success:function(e){a.call(n,e)},error:function(e){o.call(n,e)}})}})});
define("model/model",["base/base","base/event","storage/store"],function(t,e,s){function i(){}var r=t("base/base"),a=t("base/event"),n=t("storage/store"),h=0,u=1,o=2,l=a.extend({propertys:function(){this.baseurl=this.buildBaseUrl(),this.url=this.buildUrl(),this.param=this.buildParam(),this.result=this.buildResult(),this.state=h},initialize:function(){},buildBaseUrl:function(){throw"Please override the `buildBaseUrl` method"},buildUrl:function(){throw"Please override the `buildUrl` method"},buildParam:function(){throw"Please override the `buildParam` method"},buildResult:function(){throw"Please override the `buildResult` method"},ajaxRequest:function(){throw"Please override the `ajaxRequest` method"},verifyData:function(t){return!0},getParam:function(){return this.param instanceof n?this.param.get():this.param},setParam:function(t,e){return"object"===r.type(t)?void r.each(t,function(t,e){this.setParam(e,t)},this):void(this.param instanceof n?this.param.setAttr(t,e):(this.param||(this.param={}),this.param[t]=e))},delParam:function(t){return"array"===r.type(t)?void r.each(t,function(t){this.delParam(t)},this):void(this.param instanceof n?this.param.delAttr(t):(this.param||(this.param={}),delete this.param[k]))},getResult:function(){if(this.result instanceof n){var t=this.getParam(),e=t?JSON.stringify(t):null;return this.result.get(e)}return this.result},setResult:function(t){if(this.result instanceof n){var e=this.getParam(),s=e?JSON.stringify(e):null;this.result.set(t,s)}else this.result=t},clearEvents:function(){this.off("success"),this.off("error"),this.off("abort")},request:function(t,e){t=t||{};var s,r=t.success||i,a=t.error||i,n=t.abort||i;if(this.state===o){if(s=this.getResult())return void r.call(e||this,s);this.state=h}if(this.state==o||(this.on("success",r,e),this.on("error",a,e),this.on("abort",n,e),this.state!==u)){var l=this.baseurl.replace(/\/+$/g,"")+"/"+this.url.replace(/^\/+/g,""),c=this.getParam(),f=this;this.ajaxRequest(l,c,function(t){f.verifyData(t)?(f.setResult(t),f.emit("success",t),f.state=o):(f.emit("error",t),f.state=h),f.clearEvents()},function(t){f.emit("error",t),f.state=h,f.clearEvents()}),this.state=u}}});return l});
define("model/restful.model",["model/model"],function(e,n,t){var o=e("model/model");return o.extend({ajaxRequest:function(e,n,t,o){var a=this;return $.ajax({url:e,data:JSON.stringify(n),type:"post",contentType:"application/json",dataType:"json",success:function(e){t.call(a,e)},error:function(e){o.call(a,e)}})}})});
define("mvc/application",["base/base","base/event","common/url.hash","mvc/hash.observe","mvc/frame","mvc/layout.full","base/log"],function(t,a,i){var e=t("base/base"),s=t("base/event"),o=t("common/url.hash"),r=t("mvc/hash.observe"),h=t("mvc/frame"),n=t("mvc/layout.full");Log=t("base/log");var f=s.extend({propertys:function(){this.state=f.STATE_STOP_HASH_OBSERVE,this.config,this.hashobserve=new r,this.layout,this.frames={},this.forwardId="~~~forward~~~",this.cfgframes={}},initialize:function(t){this.config=t,this.setOption(t),Log.log("application:initialize","application"),this.initLayout(),this.initFrame()},setOption:function(t){e.isNUL(t.layout)||(this.layout=t.layout),e.isNUL(t.frames)||(this.cfgframes=t.frames),e.isNUL(t.forwardId)||(this.forwardId=t.forwardId)},getConfig:function(){return this.config},initLayout:function(){this.layout||(this.layout=n()),$("body").prepend(this.layout.getRoot())},initFrame:function(){var t=this.hashobserve.getCurHashData(),a=t.frame||this.config.defaultFrame;e.each(this.cfgframes,function(i,e){var s=(this.layout.getFrameBoxs()||{})[i.framebox];s?(this.frames[e]=new h({app:this,name:e,viewpath:i.viewpath||this.config.viewpath,transtion:i.transtion,framebox:s,defaultView:i.defaultView||this.config.defaultView||"index"}),this.frames[e].hashChange(a===e?t:new o(""))):Log.err("framebox not found!","application")},this)},onHashChange:function(t,a){var i=t.frame||this.config.defaultFrame;t.forward=this.checkForward(t,a),this.frames[i]&&this.frames[i].hashChange(t)},checkForward:function(t,a){var i,e;return this.forwardId&&(i=t.ids.indexOf(this.forwardId))>-1?(a||(t.ids.splice(i,1),e="#"+t.buildUrl(),history.replaceState({},"",e)),!0):!1},startHashObserve:function(){this.state=f.STATE_LOADING_HASH_OBSERVE,this.hashobserve.add(this.onHashChange,this).start()},endHashObserve:function(){this.state=f.STATE_STOP_HASH_OBSERVE,this.hashobserve.clear()},start:function(){this.state===f.STATE_STOP_HASH_OBSERVE&&this.startHashObserve()},stop:function(){this.endHashObserve()},forward:function(t){location.hash=t+"|"+this.forwardId},replace:function(t){var a=t+"|"+this.forwardId,i=new o(a);this.onHashChange(i,!0)},back:function(t){t?location.replace(("#"+t).replace(/^#+/,"#")):history.back()}});return f.STATE_STOP_HASH_OBSERVE=0,f.STATE_LOADING_HASH_OBSERVE=1,f});
define("mvc/frame",["base/base","base/event","base/hash","base/promise","common/url.hash","mvc/transition.default"],function(t,i,e){var s=t("base/base"),a=t("base/event"),n=t("base/hash"),h=t("base/promise"),o=t("common/url.hash"),r=t("mvc/transition.default"),u="fly-frame-viewport",w='<div class="'+u+'"></div>',f=a.extend({propertys:function(){this.app,this.root=$(w),this.viewport=this.root,this.name,this.views=new n,this.hashdata={},this.viewpath="./src/views",this.framebox,this.defaultView="index",this.transtion=r,this.lastView,this.curView},initialize:function($super,t){$super(),this.setOption(t),this.initDom()},setOption:function(t){s.isNUL(t.app)||(this.app=t.app),s.isNUL(t.name)||(this.name=t.name),s.isNUL(t.viewpath)||(this.viewpath=t.viewpath),s.isNUL(t.framebox)||(this.framebox=t.framebox),s.isNUL(t.defaultView)||(this.defaultView=t.defaultView),s.isNUL(t.transtion)||(this.transtion=t.transtion)},getRoot:function(){return this.root},initDom:function(){this.framebox.append(this.root)},hashChange:function(t){t.view||(t=o.parse(this.defaultView)),this.hashdata=t,this.toView(t.view,t)},toView:function(t,i){var e=this;this.getView(t,i).then(function(t,i,s){e.lastView=e.curView||s,e.curView=s,s.onLoad()})},turning:function(){this.curView===this.lastView?(this.curView.getRoot().show(),this.curView.onShow()):this.transferView(this.lastView,this.curView,function(){this.lastView.onHide(),this.curView.onShow()})},getView:function(t,i){var e=this.views.get(t),s=new h;return e?(e.setHashData(i),s.resolve(e)):this.loadView(t,function(e){var a=new e(t,i,this,this.app);this.viewport.append(a.getRoot()),a.emit("addframe"),this.views.push(t,a),a.onCreate(),s.resolve(a)}),s},loadView:function(t,i){var e=this.buildFullPath(t),s=this;seajs.use([e],function(t){i.call(s,t)})},buildFullPath:function(t){return(this.viewpath+"/"+t).replace(/\/+/g,"/")+".js"},transferView:function(t,i,e){this.hashdata.forward?this.transtion.into(t.getRoot(),i.getRoot(),function(){e.call(this)},this):this.transtion.out(t.getRoot(),i.getRoot(),function(){e.call(this)},this)},forward:function(t){var i=o.parse(t);i.frame&&i.frame!==this.name||this.hashChange(i)},back:function(){}});return f});
define("mvc/hash.observe",["base/event","common/url.hash"],function(t,e,n){var i=t("base/event"),s=t("common/url.hash"),h="hashchange";return i.extend({initialize:function($super){this.isObserve=!1,$super()},handleEvent:function(){var t=this.getCurHashData();this.emit(h,t)},add:function(t,e){return this.on(h,t,e),this},clear:function(){return this.off(h),this},trigger:function(){return this.handleEvent(),this},start:function(){return this.isObserve?this:(window.addEventListener("hashchange",this,!1),this.isObserve=!0,this)},end:function(){return window.removeEventListener("hashchange",this,!1),this.isObserve=!1,this},getCurHashData:function(){return new s(window.location.hash)}})});
define("mvc/history",["base/object"],function(e,n,t){var i=e("base/object");return i.extend({propertys:function(){},initialize:function(){}})});
define("mvc/layout.full",["mvc/layout"],function(t,o,n){var i=t("mvc/layout"),r='<div class="layout-main"></div>';return i.extend({propertys:function(){this.root=$(r)},initialize:function($super,t){$super(t)},getRoot:function(){return this.root},getFrameBoxs:function(){return{main:this.root}}})});
define("mvc/layout",["base/event"],function(e,t,o){var n=e("base/event"),i=n.extend({propertys:function(){this.app},initialize:function($super,e){this.app=e,$super()},getRoot:function(){throw'no override method "getRoot"!'},getFrameBoxs:function(){throw'no override method "getContainers"!'}});return i});
define("mvc/layout.updown",["mvc/layout"],function(t,n,o){var i=t("mvc/layout"),e="layout-head",a="layout-content",r=['<div class="layout-main">','<div class="'+e+'"></div>','<div class="'+a+'"></div>',"</div>"].join("");return i.extend({propertys:function(){this.root=$(r),this.header=this.root.find("."+e),this.content=this.root.find("."+a)},initialize:function($super,t){$super(t)},getRoot:function(){return this.root},getFrameBoxs:function(){return{header:this.header,content:this.content}}})});
define("mvc/transition.default",["mvc/transition.interface"],function(n,o,e){var s=n("mvc/transition.interface"),i="default_forward_out",a="default_forward_in",t="default_back_out",d="default_back_in",r=s.extend({into:function(n,o,e,r){n.removeClass([i,a,t,d].join(" ")),o.removeClass([i,a,t,d].join(" ")),o.show(),n.show(),n.css("z-index",s.getTopIndexZ()),o.css("z-index",s.getTopIndexZ()),n.addClass(i),o.addClass(a),s.removeTransitionEnd(o),s.addTransitionEnd(o,function(){o.removeClass(a),e&&e.call(r),console.log("into_in")}),s.removeTransitionEnd(n),s.addTransitionEnd(n,function(){n.hide(),n.removeClass(i),console.log("into_out")})},out:function(n,o,e,r){n.removeClass([i,a,t,d].join(" ")),o.removeClass([i,a,t,d].join(" ")),o.show(),n.show(),n.addClass(t),o.addClass(d),o.css("z-index",s.getTopIndexZ()),n.css("z-index",s.getTopIndexZ()),s.removeTransitionEnd(o),s.addTransitionEnd(o,function(){o.removeClass(d),console.log("out_in")}),s.removeTransitionEnd(n),s.addTransitionEnd(n,function(){n.hide(),n.removeClass(t),e&&e.call(r),console.log("out_out")})},isAnimation:function(n){return n.hasClass([i,a,t,d].join(" "))}});return new r});
define("mvc/transition.interface",["base/object","common/funs"],function(n,e,t){var o=n("base/object"),i=n("common/funs"),m=o.extend({into:function(n,e,t){throw"Please implement 'into' method"},out:function(n,e,t){throw"Please implement 'out' method"},isAnimation:function(){throw"Please implement 'isAnimation' method"}}),a="webkitAnimation"in document.body.style?"webkitAnimationEnd":"animationend";return m.getTopIndexZ=i.createAddSelf(1e3),m.addTransitionEnd=function(n,e){n.on(a,e)},m.removeTransitionEnd=function(n,e){n.off(a,e)},m});
define("mvc/view",["base/base","base/event","common/scroll"],function(t,i,n){function o(){}function s(t){var i=(t||"").replace(/^\s+|\s+$/g,"").split(/\s+/);return{event:i.shift(),selector:i.join(" ")}}function e(){var t=this.events||{};a.each(t,function(t,i){var n=s(i),t=a.bind("function"==typeof t?t:this[t]||o,this);this.root.on(n.event,n.selector,t)},this)}var a=t("base/base"),r=t("base/event"),c=t("common/scroll"),h="viewroot-box",f="viewroot",p=r.extend({elastic:!0,propertys:function(t,i,n,o){this.root=$('<div class="'+h+'"><div class="'+f+'"></div></div>'),this.el=this.root.find("."+f),this.root.hide(),this.on("addframe",function(){this.scroll=new c({box:this.root[0],elastic:this.elastic,elasticX:!1})}),e.call(this),this.frame=n,this.app=o,this.name=t,this.hashdata=i,this.onCreate()},setHashData:function(t){this.hashdata=t},getRoot:function(){return this.root},turning:function(){this.frame.turning()},onCreate:function(){},onLoad:function(){},onShow:function(){},onHide:function(){},forward:function(){this.app.forward.apply(this.app,arguments)},replace:function(){this.app.replace.apply(this.app,arguments)},back:function(){this.app.back.apply(this.app,arguments)}});return p});
define("storage/local.storage",["storage/storage"],function(e,a,o){var r=e("storage/storage");return new r(localStorage)});
define("storage/local.store",["storage/store","storage/local.storage"],function(e,o,r){var t=e("storage/store"),a=e("storage/local.storage");return t.extend({buildStorage:function(){return a}})});
define("storage/session.storage",["storage/storage"],function(e,s,o){var r=e("storage/storage");return new r(sessionStorage)});
define("storage/session.store",["storage/store","storage/session.storage"],function(e,s,o){var r=e("storage/store"),t=e("storage/session.storage");return r.extend({buildStorage:function(){return t}})});
define("storage/storage",["base/base","base/object"],function(t,e,r){var s=t("base/base"),i=t("base/object");return i.extend({propertys:function(){this.proxy},initialize:function(t){this.proxy=t},get:function(t){var e,r=this.proxy.getItem(t);try{e=JSON.parse(r)}catch(s){}return e},set:function(t,e){var r=JSON.stringify(e);this.proxy.setItem(t,r)},setAttr:function(t,e,r){var i=this.get(t)||{};s.path(i,e,r),this.set(t,i)},getAttr:function(t,e){var r=this.get(t)||{};return s.path(r,e)}})});
define("storage/store",["base/base","base/event"],function(e,t,a){function i(e){if("number"==typeof e)return isNaN(e)&&(e=0),e;var t=0;return(e||"").replace(o,function(e,a,i){switch(i=i.toUpperCase(),a=parseInt(a),i){case"Y":t+=31536e6*a;break;case"M":t+=2592e6*a;break;case"W":t+=6048e5*a;break;case"D":t+=864e5*a;break;case"H":t+=36e5*a;break;case"I":t+=6e4*a;break;case"S":t+=1e3*a}}),t}function r(e,t,a){return{value:e,timeout:t,tag:a}}var s=e("base/base"),n=e("base/event"),o=/([\d\.]+)([a-z])/gi,u=n.extend({propertys:function(){this.storage=this.buildStorage(),this.name=this.buildName(),this.timeout=i(this.buildTimeout())},initialize:function(){},set:function(e,t){var a=JSON.stringify(e),i=(new Date).valueOf()+this.timeout,s=r(a,i,t);this.storage.set(this.name,s)},get:function(e){var t=this.storage.get(this.name);if(!(!t||new Date>t.timeout||e&&e!==t.tag))try{return JSON.parse(t.value)}catch(a){}},getTag:function(){var e=this.storage.get(this.name);return e.tag},setAttr:function(e,t,a){var i=this.get()||{};s.path(i,e,t),a=a||this.getTag(),this.set(i,a)},delAttr:function(e,t,a){var i=this.get()||{};s.delPath(i,e,t),a=a||this.getTag(),this.set(i,a)},getAttr:function(e,t){return s.path(this.get(t),e)},buildName:function(){throw"Please override the `buildName` method"},buildTimeout:function(){throw"Please override the `buildTimeout` method"},buildStorage:function(){throw"Please override the `buildStorage` method"}});return u});
define("ui/base",["base/base","common/funs"],function(e,t,f){var n=(e("base/base"),e("common/funs")),o={};return o.getOffsetByPage=function(e){var t=0,f=0;if(!e)return{left:t,top:f};do t+=e.offsetLeft,f+=e.offsetTop;while(e=e.offsetParent);return{top:f,left:t}},o.createUiId=function(e){return function(){return"uiId_"+e()}}(n.createAddSelf()),o});
define("ui/object",["base/base","base/base","ui/base","base/object"],function(e,b,s){var a=(e("base/base"),e("base/base")),i=e("ui/base"),t=e("base/object");return a(t,{propertys:function(){this.uiId=i.createUiId()},getUiId:function(){return this.uiId}})});
define("ui/utils",[],function(){var i={};return i});