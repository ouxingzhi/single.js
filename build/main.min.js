define("SINGLE/base/base.js",[],function(require){"use strict";function r(r){var n=r.split("."),t=[];return i.each(n,function(r,n){var e;r.match(a)?(e=r.split("["),i.each(e,function(r,n){r&&t.push(r.replace(/[\]"']+/g,""))})):t.push(r)}),t}var n=Array.prototype,t=n.slice,e=Object.prototype.toString,i={};i.hasProp=function(r,n){return r.hasOwnProperty(n)};var u={};i.type=function(r){if(void 0===r)return"undefined";if(null===r)return"null";var n=e.call(r);if(u[n])return u[n];var t=n.replace(/^\[object\s+|\]$/g,"").toLowerCase();return u[n]=t},i.each=function(r,n,t,e){var u,a,f=i.type(r);if("array"===f||"arguments"===f||r.length){if(e){for(u=r.length-1;u>-1;u--)if(n.call(t,r[u],u,r))return}else for(u=0,a=r.length;a>u;u++)if(n.call(t,r[u],u,r))return}else for(u in r)if(i.hasProp(r,u)&&n.call(t,r[u],u,r))return},i.mix=function(r,n,e){var u=t.call(arguments),a=u.shift()||{},e=!0;return u.length&&"boolean"===i.type(u[u.length-1])&&(e=u.pop()),i.each(u,function(r){i.each(r,function(r,n){e?a[n]=r:a[n]||(a[n]=r)})}),a},i.bind=function(r,n){return r.bind?r.bind(n):function(){return r.apply(n,arguments)}},i.toArray=function(r){try{return t.call(r)}catch(n){var e=[];return i.each(r,function(r){e.push(r)}),e}},i.indexOf=function(r,n){var t=-1,e=function(r){return r===n};return"function"==typeof n&&(e=n),i.each(r||[],function(r,n){return e(r)?(t=n,!0):void 0}),t},i.isEmpty=function(r){if(!r)return!0;var n=i.type(r);if("array"===n&&r.length)return!1;if("object"===n)for(var t in r)if(r.hasOwnProperty(t))return!1;return!0},i.isNUL=function(r){return null===r||void 0===r};var a=/\[[^\[\]]+\]/g;return i.path=function(n,t,e){var i=n;if(n&&t){var u,a,f=r(t),o=Math.max(f.length-1,0),c=0;if(void 0===e){for(;o>=c&&(a=f[c],u=n&&n[a],u);c++)n=u;return u}for(;o>=c;c++)a=f[c],o>c?n=n[a]=n[a]||{}:n[a]=e;return i}},i.delPath=function(n,t){if(n&&t){for(var e,i,u=r(t),a=Math.max(u.length-1,0),f=0;a>=f;f++)if(i=u[f],a>f){if(n=n&&n[i],!n)break}else e=n[i],delete n[i];return e}},i});
define("SINGLE/base/class.js",["SINGLE/base/base"],function(require,t,n){"use strict";function i(){}function r(t,n){return t=t||i,n=n||i,function(){var i=[s.bind(t,this)].concat(s.toArray(arguments));return n.apply(this,i)}}function e(t){var n=function(){};return n.prototype=t.prototype,new n}function o(t,n){function s(){if(!(this instanceof s)){var t=e(s);return s.apply(t,arguments),t}this.propertys.apply(this,arguments),this.initialize.apply(this,arguments)}function c(){}"object"==typeof t&&(n=t,t=function(){});var y,f=t.prototype;c.prototype=t.prototype,s.prototype=new c;for(y in n)n.hasOwnProperty(y)&&u[y]!==a&&(s.prototype[y]=n[y]&&n[y].toString().match(p)?"function"==typeof f[y]?r(f[y],n[y]):r(function(){},n[y]):n[y]);s.prototype.propertys=function(t,n){return function(){t&&t.apply(this,arguments),n&&n.apply(this,arguments)}}(s.prototype.propertys,n.propertys),s.prototype.initialize=n.initialize&&n.initialize.toString().match(p)?r(f.initialize,n.initialize):n.initialize||i,s.prototype.constructor=s;for(y in t)t.hasOwnProperty(y)&&"instance"!==y&&(s[y]=t[y]);return s.extend=function(t){return o(this,t)},s.addPropertys=function(t){var n=this.prototype;for(y in t)t.hasOwnProperty(y)&&u[y]!==a&&(n[y]="function"==typeof n[y]&&t[y].toString().match(p)?r(n[y],t[y]):t[y]);return this},s.getInstance=function(){return this.instance?this.instance:(this.instance={__proto__:this.prototype},this.apply(this.instance,arguments),this.instance)},s.createLazyFun=function(){var t,n=this;return function(){return t?t:t=n.getInstance()}},s}var s=require("SINGLE/base/base"),p=/^\s*function[^\(\)]*\(\s*\$super/,a={},u={constrcutor:a,propertys:a,initialize:a};return o});
define("SINGLE/base/date.js",["SINGLE/base/class"],function(require){var n=require("SINGLE/base/class"),e=/[a-z]/gi,t=n({propertys:function(){this.date},initialize:function(n){t.parse(n||new Date)}}),r={d:function(n){var e=n.getDate();return 10>e?"0"+e:e},j:function(n){return n.getDate()},N:function(n){var e=n.getDay();return 0===e?7:e},w:function(n){return n.getDay()},m:function(n){var e=n.getMonth()+1;return 10>e?"0"+e:e},n:function(n){return n.getMonth()+1},Y:function(n){return n.getFullYear()},y:function(n){return String(n.getFullYear()).replace(/^\d{2}/,"")},g:function(n){var e=n.getHours();return e>12?e-12:e},G:function(n){return n.getHours()},h:function(n){var e=n.getHours();return e=e>12?e-12:e,10>e?"0"+e:e},H:function(n){var e=n.getHours();return 10>e?"0"+e:e},i:function(n){var e=n.getMinutes();return 10>e?"0"+e:e},I:function(n){var e=n.getMinutes();return e},s:function(n){var e=n.getSeconds();return 10>e?"0"+e:e},S:function(n){var e=n.getSeconds();return e},O:function(n){var e=new Date,r=t.diffDay(e,n),u={1:"昨天",0:"今天"};return u[r]||""}};t.format=function(n,t){return t.replace(e,function(e){return r[e]?r[e](n):e})},t.diffDay=function(n,e){n=new Date(n.valueOf()),e=new Date(e.valueOf()),n.setHours(0,0,0,1),e.setHours(0,0,0,1);var t=(n-e)/864e5;return t},t.parse=function(n){return new Date("number"==typeof n?n:Date.parse(n.replace(/-/g,"/")))};var u=864e5,a=36e5,i=6e4;return t.diffFormat=function(n,e){e=e||new Date;var t=e-n,r=parseInt(t/u),o=parseInt(t%u/a),f=parseInt(t%a/i);return{d:r,h:o,i:f}},t});
define("SINGLE/base/event.js",["SINGLE/base/base","SINGLE/base/object","SINGLE/base/var"],function(require,e,n){var t=require("SINGLE/base/base"),i=require("SINGLE/base/object"),v=require("SINGLE/base/var"),s=i.extend({propertys:function(){this.__event=v({})},initialize:function($super,e){$super(e)},on:function(e,n,i,v){var s=this.__event;s.v[e]=s.v[e]||[],v&&-1!==t.indexOf(s.v[e],function(e){return n===e.fn})||s.v[e].push({fn:n,space:i})},off:function(e,n){if(!e&&!n)return this.__event.v.del(),void(this.__event=v({}));var t,i=this.__event;i.v[e]=i.v[e]||[],n?(t=ase.indexOf(i.v[e],function(e){return n===e.fn}),t>-1&&i.v[e].splice(t,1)):i.v[e]=[]},emit:function(e){var n=this.__event,i=this;n.v[e]=n.v[e]||[];var v=t.toArray(arguments);v.shift(),t.each(n.v[e],function(e){e.fn.apply(e.space||i,v)})}});return s});
define("SINGLE/base/hash.js",["SINGLE/base/object","SINGLE/base/object"],function(require,e,s){var t=require("SINGLE/base/object"),i=require("SINGLE/base/object");return t.extend({propertys:function(){this.keys=[],this.values={}},initialize:function($super,e){$super(),e=e||[];for(var s=0,t=e.length;t>s;s++)this.push(e[s].key,e[s].value)},push:function(e,s){null!==e&&void 0!==e&&(this.values[e]&&this.del(e),this.keys.push(e),this.values[e]=s)},pop:function(){var e=this.keys.pop(),s=this.values[e];return e||s?(delete this.values[e],{key:e,value:s}):null},shift:function(){var e=this.keys.shift(),s=this.values[e];return e||s?(delete this.values[e],{key:e,value:s}):null},unshift:function(e,s){null!==e&&void 0!==e&&(this.values[e]&&this.del(e),this.keys.unshift(e),this.values[e]=s)},del:function(e){var s=this.keys.indexOf(e);if(-1===s)return null;var e,t;return e=this.keys.splice(s,1),t=this.values[e],delete this.values[e],{key:e,value:t}},get:function(e){return this.values[e]},splice:function(e,s,t){"boolean"===i.type(s)&&(s=null,t=s),e||(e=0);var n=Math.max(this.keys.length-1,0);keys=this.keys.slice(),rkeys=[],t?(e=n-e,keys.reverse(),rkeys=i.isNUL(s)?keys.splice(e):keys.splice(e,s)):rkeys=i.isNUL(s)?keys.splice(e):keys.splice(e,s);var u=[],l=this;return i.each(rkeys,function(e){var s=l.del(e);s&&u.push(s)}),t&&u.reverse(),u},slice:function(e,s){e||(e=0);Math.max(this.keys.length-1,0);keys=this.keys,rkeys=i.isNUL(s)?keys.slice(e):keys.slice(e,s);var t=[],n=this;return i.each(rkeys,function(e){var s=n.get(e);s&&t.push({key:e,value:s})}),t},toString:function(){return JSON.stringify(this.slice())},valueOf:function(){return this.slice()}})});
define("SINGLE/base/log.js",[],function(require){function n(){return"boolean"==typeof __SINGE_DEBUG__&&__SINGE_DEBUG__===!0}var e=function(){function n(){return e||(e=document.createElement("div"),document.body.appendChild(e),e.style.cssText="z-index:8000;color:#fff;position:absolute;left:0px;bottom:0px;width:100%;height:6em;line-height:1.5em;font-size:12px;background:rgba(0,0,0,0.8);overflow:auto;-webkit-overflow-scrolling:touch;"),e}var e;return{hide:function(){e&&(document.body.removeChild(e),e=null)},write:function(o,t){n(),t&&(o='<span style="color:#f22">'+o+"</span>"),e.innerHTML=o+"<br />"+e.innerHTML}}}(),o={log:function(o,t){n()&&(t||(t="default"),e.write(t+": "+o))},err:function(o,t){n()&&(t||(t="default"),e.write(t+": "+o,!0))}},t=window.onerror;return window.onerror=function(n){o.err(String(n)),"function"==typeof t&&t.apply(this,arguments)},o});
define("SINGLE/base/object.js",["SINGLE/base/class","SINGLE/base/var"],function(require,s,a){var e=require("SINGLE/base/class"),i=require("SINGLE/base/var"),n=e({initialize:function($super,s){$super(s)},destruct:function(){var s;for(var a in this)this.hasOwnProperty(a)&&(s=this[a],s instanceof i&&s.del(),this[a]=null)}});return n});
define("SINGLE/base/promise.js",[],function(require){function t(e){this.state=t.STATE_UNFULFILLED,this.resolveCallbacks=[],this.rejecteCallbacks=[],e&&setTimeout(function(){e(r(this.resolve,this),r(this.reject,this))},0)}var e=Array.prototype.slice,s=Array.prototype.indexOf||function(t){for(var e=0,s=this.length;s>e;e++)if(t===this[e])return e;return-1},r=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}};return t.STATE_UNFULFILLED=0,t.STATE_RESOLVED=1,t.STATE_REJECTED=2,t.prototype={constructor:t,when:function(){var r=new t,n=e.call(arguments),i=[],a=this,l=function(e){if(a.state===t.STATE_UNFULFILLED){var l=s.call(n,this);l>-1&&(n.splice(l,1),i[l]=e),n.length||(r.resolve(i),a.state=t.STATE_RESOLVED)}},o=function(){if(a.state===t.STATE_UNFULFILLED){var e=s.call(n,this);e>-1&&n.splice(e,1),n.length||(r.reject(),a.state=t.STATE_REJECTED)}};if(n.length)for(var c=0,h=n.length;h>c;c++){if(!(n[c]instanceof t))throw"when() Parameter must be a type of Promise";n[c].then(l,o)}else setTimeout(function(){a.resolve()},0);return r},then:function(s,n){var i=new t,a=this;return s&&this.resolveCallbacks.push(function(){var t=[r(i.resolve,i),r(i.reject,i)].concat(e.call(arguments));s.apply(a,t)}),n&&this.rejecteCallbacks.push(function(){{var t=[r(i.reject,i)].concat(e.call(arguments));n.apply(a,t)}}),i},resolve:function(){var e=arguments;setTimeout($.proxy(function(){if(this.state===t.STATE_UNFULFILLED){for(var s=0,r=this.resolveCallbacks.length;r>s;s++)this.resolveCallbacks[s].apply(this,e);this.state=t.STATE_RESOLVED}},this),0)},reject:function(){var e=arguments;setTimeout($.proxy(function(){if(this.state===t.STATE_UNFULFILLED){for(var s=0,r=this.rejecteCallbacks.length;r>s;s++)this.rejecteCallbacks[s].apply(this,e);this.state=t.STATE_REJECTED}},this),0)}},t});
define("SINGLE/base/var.js",[],function(require){function n(n){if(n!==e){var r={del:function(){n=null},__proto__:t};return Object.defineProperty(r,"v",{get:function(){return n},set:function(e){n=e}}),r}}var e={},t=new n(e);return n});
define("SINGLE/common/funs.js",["SINGLE/base/base"],function(require,n,e){var r=require("SINGLE/base/base"),t={};return t.createAddSelf=function(n){return n=n||0,function(){return n++}},t.createSingle=function(n){var e;return function(r){return e?e:e=new n(r)}},t.createDOM=function(n){return function(e){return n.append(e),n.children()}}($("<div></div>")),t.formatString=function(n,e,t,u,i){u||(u="{"),i||(i="}"),e=e||{},u="\\"+u.split("").join("\\"),i="\\"+i.split("").join("\\");var a=new RegExp(u+"([^"+u+i+"]*)"+i,"img");return n.replace(a,function(n,u){return r.isNUL(e[u])?"0":(t&&t(u),e[u])})},t.createLazyValue=function(n,e){var r=null;return function(){return null!=r?r:r=n.apply(e,arguments)}},t});
define("SINGLE/common/url.hash.js",["SINGLE/base/base","SINGLE/base/object"],function(require,t,i){function e(t){var i=[];return s.each(t,function(t,e){i.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),i.join("&")}var s=require("SINGLE/base/base"),h=require("SINGLE/base/object"),n=/^(?:([^:\/!?&=|]+):)?([^!?&|]+)?(?:!([^!?&|]+))?(?:\?((?:[^?=&|]+=[^?=&|]*(?:&[^?=&|]+=[^?=&|]*)*)?))?((?:\|[^|]+)*)?$/i,r=/([^=&]*)=([^=&]*)/g,u=h.extend({propertys:function(){this.frame="",this.view="",this.path=[],this.query={},this.ids=[],this.fullhash=""},initialize:function(t){var i=s.type(t);"object"===i?s.mix(this,t):"string"===i&&s.mix(this,u.parse(t))},setFrame:function(t){return t?(this.frame=t,this):this},getFrame:function(){return this.frame},setView:function(t){return t?(this.view=t,this):this},getView:function(){return this.view},setPath:function(t,i){return i?(0>t&&(t=0),t>this.path.length&&(t=this.path.length),this.path[t]=i,this):this},getPath:function(t){return this.path[t]},delPath:function(t){return 0>t||t>=this.path.length?this:(this.path.splice(t,1),this)},setQuery:function(t,i){return t&&i?(this.query[t]=i,this):this},getQuery:function(t){return t?this.query[t]:void 0},delQuery:function(t){return delete this.query[t],this},setId:function(t){return this.exsitId(t)||this.ids.push(t),this},delId:function(t){var i=this.ids.indexOf(t);return i>-1&&this.ids.splice(i,1),this},exsitId:function(t){return this.ids.indexOf(t)>-1},getFullHash:function(){return fullhash},buildUrl:function(){var t=[];return this.frame&&(t.push(this.frame),t.push(":")),this.view&&t.push(this.view),this.path&&this.path.length&&(t.push("!"),t.push(this.path.join("/"))),s.isEmpty(this.query)||(t.push("?"),t.push(e(this.query))),this.ids&&this.ids.length&&(t.push("|"),t.push(this.ids.join("|"))),t.join("")},clone:function(){var t=new u;return s.mix(t,this,!0)},toString:function(){return this.buildUrl()},valueOf:function(){return s.mix({},this)}});return u.parse=function(t){var i=(t||"").replace(/^#+/,"");return m=i.match(n)||[],frame=m[1],view=m[2],path=(m[3]||"").replace(/^\/+|\/+$/,""),paths=path?path.split("/"):[],query=m[4],querys=function(t){var i={};return t.replace(r,function(t,e,s){i[e]=s}),i}(query||""),id=(m[5]||"").replace(/^\|+|\|+$/,""),ids=id?id.split("|"):[],{frame:frame,view:view,path:paths,query:querys,ids:ids,fullhash:i}},u});
define("SINGLE/common/url.js",["SINGLE/base/base","SINGLE/base/object"],function(require,s,t){var h=require("SINGLE/base/base"),e=require("SINGLE/base/object"),a=/^\s*(?:(^[a-z]+):)?(?:\/\/([^\/]+))?([^#?]*)(?:\?([^#]*))?(?:#(.*))?\s*$/im,i=/([^=&]*)=([^=&]*)/g,r=/^\s*\/|\/\s*$/i,n=e.extend({propertys:function(){this.protocol="",this.host="",this.path="",this.paths=[],this.search="",this.searchs={},this.hash=""},initialize:function(s){h.mix(this,n.parse(s))},buildUrl:function(){var s,t=[],e=this.data||{};return e.protocol&&(t.push(e.protocol),t.push(":")),e.home&&(t.push("//"),t.push(e.home)),e.paths&&(t.push("/"),t.push(e.paths.join("/"))),e.searchs&&(s=[],h.each(e.searchs,function(t,e){"array"===h.type(t)?h.each(t,function(t){s.push(e+"="+t)}):s.push(e+"="+t)}),s.length&&(t.push("?"),t.push(s.join("&")))),e.hash&&(t.push("#"),t.push(e.hash)),t.join("")},setProtocol:function(s){return this.protocol=s,this},setHost:function(s){return this.host=s,this},setPath:function(s){return this.path=s,this.paths=this.path.replace(r,"").split("/"),this},setPaths:function(s,t){return s=s||0,s>this.paths.length&&(s=this.paths.length),this.paths[s]=t,this},setSearch:function(s){this.search=s;var t=n.parse(s||"");return this.searchs=t.searchs,this},setHash:function(s){return this.hash=s,this}});return n.parse=function(s){var t=(s||"").match(a)||[],h={},e=[];return t[3]&&(e=t[3].replace(r,"").split("/")),t[4]&&t[4].replace(i,function(s,t,e){h[t]?("string"==typeof h[t]&&(h[t]=[h[t]]),h[t].push(e)):h[t]=e}),{protocol:t[1]||"",home:t[2]||"",path:t[3]||"",paths:e,search:t[4]||"",searchs:h,hash:t[5]||""}},n});
define("SINGLE/storage/local.storage.js",["SINGLE/storage/storage"],function(require,e,a){var o=require("SINGLE/storage/storage");return new o(localStorage)});
define("SINGLE/storage/local.store.js",["SINGLE/storage/store","SINGLE/storage/local.storage"],function(require,e,o){var r=require("SINGLE/storage/store"),t=require("SINGLE/storage/local.storage");return r.extend({buildStorage:function(){return t}})});
define("SINGLE/storage/session.storage.js",["SINGLE/storage/storage"],function(require,e,s){var o=require("SINGLE/storage/storage");return new o(sessionStorage)});
define("SINGLE/storage/session.store.js",["SINGLE/storage/store","SINGLE/storage/session.storage"],function(require,e,s){var o=require("SINGLE/storage/store"),r=require("SINGLE/storage/session.storage");return o.extend({buildStorage:function(){return r}})});
define("SINGLE/storage/storage.js",["SINGLE/base/base","SINGLE/base/object"],function(require,t,e){var r=require("SINGLE/base/base"),s=require("SINGLE/base/object");return s.extend({propertys:function(){this.proxy},initialize:function(t){this.proxy=t},get:function(t){var e,r=this.proxy.getItem(t);try{e=JSON.parse(r)}catch(s){}return e},set:function(t,e){var r=JSON.stringify(e);this.proxy.setItem(t,r)},setAttr:function(t,e,s){var i=this.get(t)||{};r.path(i,e,s),this.set(t,i)},getAttr:function(t,e){var s=this.get(t)||{};return r.path(s,e)},remove:function(t){this.proxy.removeItem(t)}})});
define("SINGLE/storage/store.js",["SINGLE/base/base","SINGLE/base/event"],function(require,e,t){function i(e){if("number"==typeof e)return isNaN(e)&&(e=0),e;var t=0;return(e||"").replace(n,function(e,i,a){switch(a=a.toUpperCase(),i=parseInt(i),a){case"Y":t+=31536e6*i;break;case"M":t+=2592e6*i;break;case"W":t+=6048e5*i;break;case"D":t+=864e5*i;break;case"H":t+=36e5*i;break;case"I":t+=6e4*i;break;case"S":t+=1e3*i}}),t}function a(e,t,i){return{value:e,timeout:t,tag:i}}var r=require("SINGLE/base/base"),s=require("SINGLE/base/event"),n=/([\d\.]+)([a-z])/gi,o=s.extend({propertys:function(){this.storage=this.buildStorage(),this.name=this.buildName(),this.timeout=i(this.buildTimeout())},initialize:function(){},set:function(e,t){var i=JSON.stringify(e),r=(new Date).valueOf()+this.timeout,s=a(i,r,t);this.storage.set(this.name,s)},get:function(e){var t=this.storage.get(this.name);if(!(!t||new Date>t.timeout||e&&e!==t.tag))try{return JSON.parse(t.value)}catch(i){}},getTag:function(){var e=this.storage.get(this.name);return e&&e.tag},setAttr:function(e,t,i){var a=this.get()||{};void 0===t&&(t=null),r.path(a,e,t),i=i||this.getTag(),this.set(a,i)},delAttr:function(e,t,i){var a=this.get()||{};r.delPath(a,e,t),i=i||this.getTag(),this.set(a,i)},getAttr:function(e,t){return r.path(this.get(t),e)},remove:function(){this.storage.remove(this.name)},buildName:function(){throw"Please override the `buildName` method"},buildTimeout:function(){throw"Please override the `buildTimeout` method"},buildStorage:function(){throw"Please override the `buildStorage` method"}});return o});
define("SINGLE/mvc/application.js",["SINGLE/base/base","SINGLE/base/event","SINGLE/common/url.hash","SINGLE/mvc/hash.observe","SINGLE/mvc/frame","SINGLE/mvc/layout.full","SINGLE/base/log"],function(require,t,a){var i=require("SINGLE/base/base"),e=require("SINGLE/base/event"),s=require("SINGLE/common/url.hash"),o=require("SINGLE/mvc/hash.observe"),r=require("SINGLE/mvc/frame"),n=require("SINGLE/mvc/layout.full");Log=require("SINGLE/base/log");var h=e.extend({propertys:function(){this.state=h.STATE_STOP_HASH_OBSERVE,this.config,this.hashobserve=new o,this.layout,this.frames={},this.forwardId="~~~forward~~~",this.cfgframes={}},initialize:function(t){this.config=t,this.setOption(t),Log.log("application:initialize","application"),this.initLayout(),this.initFrame()},setOption:function(t){i.isNUL(t.layout)||(this.layout=t.layout),i.isNUL(t.frames)||(this.cfgframes=t.frames),i.isNUL(t.forwardId)||(this.forwardId=t.forwardId)},getConfig:function(){return this.config},initLayout:function(){this.layout||(this.layout=n()),$("body").prepend(this.layout.getRoot())},initFrame:function(){var t=this.hashobserve.getCurHashData(),a=t.frame||this.config.defaultFrame;i.each(this.cfgframes,function(i,e){var o=(this.layout.getFrameBoxs()||{})[i.framebox];o?(this.frames[e]=new r({app:this,name:e,viewpath:i.viewpath||this.config.viewpath,transtion:i.transtion,framebox:o,config:this.config,defaultView:i.defaultView||this.config.defaultView||"index"}),this.frames[e].hashChange(a===e?t:new s(""))):Log.err("framebox not found!","application")},this)},onHashChange:function(t,a){var i=t.frame||this.config.defaultFrame;if(t.forward=this.checkForward(t),a){var e="#"+t.buildUrl();history.replaceState({},"",e)}this.frames[i]&&this.frames[i].hashChange(t)},checkForward:function(t){var a,i;return this.forwardId&&(a=t.ids.indexOf(this.forwardId))>-1?(t.ids.splice(a,1),i="#"+t.buildUrl(),history.replaceState({},"",i),!0):!1},startHashObserve:function(){this.state=h.STATE_LOADING_HASH_OBSERVE,this.hashobserve.add(this.onHashChange,this).start()},endHashObserve:function(){this.state=h.STATE_STOP_HASH_OBSERVE,this.hashobserve.clear()},start:function(){this.state===h.STATE_STOP_HASH_OBSERVE&&this.startHashObserve()},stop:function(){this.endHashObserve()},forward:function(t){location.hash=t+"|"+this.forwardId},replace:function(t){var a=t+"|"+this.forwardId;location.replace("#"+a)},back:function(t){t?location.replace(("#"+t).replace(/^#+/,"#")):history.back()}});return h.STATE_STOP_HASH_OBSERVE=0,h.STATE_LOADING_HASH_OBSERVE=1,h});
define("SINGLE/mvc/block.js",["SINGLE/base/base","SINGLE/common/funs","SINGLE/base/event","SINGLE/mvc/transition.header.notanimte"],function(require){function t(t){var e=(t||"").replace(/^\s+|\s+$/g,"").split(/\s+/);return{event:e.shift(),selector:e.join(" ")}}function e(e,n,s){e=e||{},i.each(e,function(e,o){var a=t(o),e=i.bind("function"==typeof e?e:noop,s||this);n.on(a.event,a.selector,e)},this)}var i=require("SINGLE/base/base"),n=require("SINGLE/common/funs"),s=require("SINGLE/base/event"),o=require("SINGLE/mvc/transition.header.notanimte"),a=(n.createAddSelf(1500),"cur-block-view"),r="block-view";return s.extend({propertys:function(){this.frame,this.box,this.forward=!1,this.views={},this.transition=null},getPreFix:function(){return"block"},initialize:function($super,t){$super(t),this.setOption(t)},setOption:function(t){t=t||{},i.isNUL(t.box)||(this.box=t.box),i.isNUL(t.frame)||(this.frame=t.frame)},to:function(t,i){i=i||{};var n=this.getPreFix()+t,s=this.box.find("#"+n);s.length||(s=$('<div class="'+r+'" id="'+n+'"></div>'),this.box.append(s)),i.cls&&s.addClass(i.cls);var c=i.notAnimte||!1;if(i.template){var f=i.data||{},l=_.template(i.template)(f);s.html(l),i.events&&(s.off(),e(i.events,s,i.space));var h=c||!this.transition?o:this.transition,d=s.siblings("."+a);if(d.length){var v=this.forward?h.into:h.out;d.width()&&d.height()?v(d,s,function(){d.removeClass(a),s.addClass(a)}):(v(d,s,function(){}),d.removeClass(a),s.addClass(a))}else s.addClass(a)}},getRoot:function(){return this.box},setForward:function(t){this.forward=t}})});
define("SINGLE/mvc/frame.js",["SINGLE/base/base","SINGLE/base/event","SINGLE/base/hash","SINGLE/base/promise","SINGLE/common/funs","SINGLE/common/url.hash","SINGLE/mvc/header","SINGLE/mvc/transition.default","SINGLE/mvc/transition.updown","SINGLE/mvc/transition.notanime","SINGLE/ui/dialog","SINGLE/ui/toast","SINGLE/ui/loading"],function(require,t,i){var e=require("SINGLE/base/base"),a=require("SINGLE/base/event"),s=require("SINGLE/base/hash"),n=require("SINGLE/base/promise"),o=require("SINGLE/common/funs"),h=require("SINGLE/common/url.hash"),r=require("SINGLE/mvc/header"),d=require("SINGLE/mvc/transition.default"),w=require("SINGLE/mvc/transition.updown"),u=require("SINGLE/mvc/transition.notanime"),f=require("SINGLE/ui/dialog"),c=require("SINGLE/ui/toast"),l=require("SINGLE/ui/loading"),v="single-frame-box",m="single-frame-head",V="single-frame-viewport",L="single-frame-foot",p=['<div class="'+v+'">','<div class="'+m+'"></div>','<div class="'+V+'">',"</div>",'<div class="'+L+'"></div>',"</div>"].join(""),S=o.createSingle(c),N=o.createSingle(f),g=o.createSingle(l),b=a.extend({propertys:function(){this.app,this.root=$(p),this.viewhead=this.root.find("."+m),this.viewport=this.root.find("."+V),this.viewfoot=this.root.find("."+L),this.header=new r({box:this.viewhead,frame:this}),this.name,this.views=new s,this.hashdata={},this.viewpath="./src/views",this.framebox,this.defaultView="index",this.transtions={"default":d,updown:w,notanimte:u},this.defaultTranstion="default",this.lastView,this.curView},initialize:function($super,t){$super(),this.setOption(t),this.initDom(),this.app.config.hideHeader&&this.header.hide()},setOption:function(t){e.isNUL(t.app)||(this.app=t.app),e.isNUL(t.name)||(this.name=t.name),e.isNUL(t.viewpath)||(this.viewpath=t.viewpath),e.isNUL(t.framebox)||(this.framebox=t.framebox),e.isNUL(t.defaultView)||(this.defaultView=t.defaultView),e.isNUL(t.transtions)||e.mix(this.transtions,t.transtions),e.isNUL(t.config.defaultTranstion)||(this.defaultTranstion=t.config.defaultTranstion)},getRoot:function(){return this.root},initDom:function(){this.framebox.append(this.root)},hashChange:function(t){t.view||(t=new h(this.defaultView)),this.hashdata=t,this.header.setForward(this.hashdata.forward),this.toView(t.view,t)},toView:function(t,i){var e=this;this.getView(t,i).then(function(t,i,a){e.lastView=e.curView||a,e.curView=a,a.emit("onLoadBefore",e.lastView.hashdata.view),a.onLoad(e.lastView.hashdata.view),a.emit("onLoadAfter",e.lastView.hashdata.view)})},turning:function(t){var i=this.lastView||this.curView;this.curView===this.lastView?(this.curView.getRoot().show(),this.curView.emit("onShowBefore",i.hashdata.view),this.curView.onShow(i.hashdata.view),this.curView.emit("onShowAfter",i.hashdata.view)):this.transferView(t,this.lastView,this.curView,function(){this.lastView.emit("onHideBefore"),this.lastView.onHide(),this.lastView.emit("onHideAfter"),this.curView.emit("onShowBefore",i.hashdata.view),this.curView.onShow(i.hashdata.view),this.curView.emit("onShowAfter",i.hashdata.view)})},getView:function(t,i){var e=this.views.get(t),a=new n;return e?(e.setHashData(i),a.resolve(e)):this.loadView(t,function(e){if(!e)throw new Error("not found `"+t+".js`");var s=new e(t,i,this,this.app);this.viewport.append(s.getRoot()),s.emit("addframe"),this.views.push(t,s),s.onCreate(),a.resolve(s)}),a},loadView:function(t,i){var e=this.buildFullPath(t),a=this;seajs.use([e],function(t){i.call(a,t)})},getCurrentView:function(){return this.curView||this.lastView},buildFullPath:function(t){return(this.viewpath+"/"+t).replace(/\/+/g,"/")+".js"},transferView:function(t,i,e,a){var s=this.getTransferFn(t);s(i.getRoot(),e.getRoot(),function(){a.call(this)},this)},getTransferFn:function(t){var i;switch(t=t||this.defaultTranstion){case"left":i=d.into;break;case"right":i=d.out;break;case"top":i=w.into;break;case"bottom":i=w.out;break;default:var e=this.transtions[t]||d;i=this.hashdata.forward?e.into:e.out}return i},forward:function(t){var i=h.parse(t);i.frame&&i.frame!==this.name||this.hashChange(i)},back:function(){history.back()},toHead:function(t,i){this.header.to(t,i)},showToast:function(t,i,e){S().show({content:t,timeout:i,callback:e})},hideToast:function(){S().hide()},showAlert:function(t,i,e,a){N().show({title:e||"标题",content:t||"",buttons:i,hideTitle:!a})},hideAlert:function(){N().hide()},showLoading:function(t){g().show({maskOpacity:t})},hideLoading:function(){g().hide()},showHeader:function(){this.header.show()},hideHeader:function(){this.header.hide()}});return b});
define("SINGLE/mvc/hash.observe.js",["SINGLE/base/event","SINGLE/common/url.hash"],function(require,t,e){var n=require("SINGLE/base/event"),i=require("SINGLE/common/url.hash"),s="hashchange";return n.extend({initialize:function($super){this.isObserve=!1,$super()},handleEvent:function(){var t=this.getCurHashData();this.emit(s,t)},add:function(t,e){return this.on(s,t,e),this},clear:function(){return this.off(s),this},trigger:function(){return this.handleEvent(),this},start:function(){return this.isObserve?this:(window.addEventListener("hashchange",this,!1),this.isObserve=!0,this)},end:function(){return window.removeEventListener("hashchange",this,!1),this.isObserve=!1,this},getCurHashData:function(){return new i(window.location.hash)}})});
define("SINGLE/mvc/header.js",["SINGLE/mvc/block","SINGLE/mvc/transition.header"],function(require){var t=require("SINGLE/mvc/block"),i=require("SINGLE/mvc/transition.header"),e="single-header-hide";return t.extend({propertys:function(){this.transition=i},initialize:function($super,t){$super(t)},setHeight:function(t){view&&(view.root.css("padding-top",t+"px"),this.box.height(t))},getHeight:function(){return this.box.height()},hide:function(){this.box.hide(),this.frame.getRoot().addClass(e)},show:function(){this.box.show(),this.frame.getRoot().removeClass(e)}})});
define("SINGLE/mvc/history.js",["SINGLE/base/base","SINGLE/base/object"],function(require,t,e){function r(t,e,r){var i=t.url||"",e=_.extend(_.clone(t.params||{}),e||{});if(i=i.replace(c,function(t,r){return e[r]?e[r]:""}),t.querys){var n=$.param(_.extend(_.clone(t.querys||{}),r||{}));n&&(i+=i.indexOf("?")>-1?"&"+n:"?"+n)}return i}var i=require("SINGLE/base/base"),n=require("SINGLE/base/object"),o=n.extend({propertys:function(){this.store},initialize:function($super,t){$super(),this.store=t},forward:function(t,e,r){this.store.setAttr("cached",{id:t,url:e,replace:!!r})},affirm:function(t){var e=this.store.getAttr("cached");if(this.store.setAttr("cached",{}),!e||e.id!=t)return!1;var r=this.getTop();if(r&&r.id===t)return!1;var i=this.store.getAttr("stack")||[];i.replace&&i.pop(),i.push(e),this.store.setAttr("stack",i)},back:function(t){var e=this.getTop()||{};if(e.id==t)return this.popTop(),this.getTop()},getCached:function(){return this.store.getAttr("cached")},getTop:function(){var t=this.store.getAttr("stack")||[];return t.length?t[Math.max(t.length-1,0)]:null},popTop:function(){var t=this.store.getAttr("stack")||[],e=t.pop();return this.store.setAttr("stack",t),e},fallback:function(t){var e,r=this.store.getAttr("stack")||[],n=-1;return i.each(r,function(e,r){return e.id===t?(n=r,!0):void 0},null,!0),n>-1&&(e=r.splice(n)),e},clear:function(){this.store.remove()}}),s=n.extend({propertys:function(){},initialize:function($super,t){var e={};i.each(t,function(t,r){e[t.id]=t}),this.tree=e},getNode:function(t){return this.tree[t]},getPrevNode:function(t){var e=this.getNode(t);if(e)return this.getNode(e.prev)},getPrevUrl:function(t,e,i){var n=this.getPrevNode(t);return n?r(n,e,i):null},checkPrevRange:function(t,e){var r=this.getNode(t);return r&&r.prevRange?r.prevRange.indexOf(e)>-1?!0:!1:!0}}),c=/\{([^\{\}]*)\}/gim;return n.extend({initialize:function($super){this.stack=new o(this.buildStackStore()),this.tree=new s(this.buildTreeConfig())},buildTreeConfig:function(){throw"not override `buildTreeConfig` method"},buildStackStore:function(){throw"not override `buildStackStore` method"},forward:function(t,e){this.stack.forward(t,e)},affirm:function(t){this.stack.affirm(t)},replace:function(t,e){this.stack.forward(t,e,!0)},back:function(t,e,r){{var i=this.stack.back(t);this.tree.getNode(t)}return i&&this.tree.checkPrevRange(t,i.id)?i.url:this.tree.getPrevUrl(t,e,r)},clear:function(){this.stack.clear()}})});
define("SINGLE/mvc/layout.full.js",["SINGLE/mvc/layout"],function(require,t,o){var n=require("SINGLE/mvc/layout"),i='<div class="layout-main"></div>';return n.extend({propertys:function(){this.root=$(i)},initialize:function($super,t){$super(t)},getRoot:function(){return this.root},getFrameBoxs:function(){return{main:this.root}}})});
define("SINGLE/mvc/layout.js",["SINGLE/base/event"],function(require,e,t){var o=require("SINGLE/base/event"),n=o.extend({propertys:function(){this.app},initialize:function($super,e){this.app=e,$super()},getRoot:function(){throw'no override method "getRoot"!'},getFrameBoxs:function(){throw'no override method "getContainers"!'}});return n});
define("SINGLE/mvc/layout.updown.js",["SINGLE/mvc/layout"],function(require,t,n){var o=require("SINGLE/mvc/layout"),i="layout-head",e="layout-content",a=['<div class="layout-main">','<div class="'+i+'"></div>','<div class="'+e+'"></div>',"</div>"].join("");return o.extend({propertys:function(){this.root=$(a),this.header=this.root.find("."+i),this.content=this.root.find("."+e)},initialize:function($super,t){$super(t)},getRoot:function(){return this.root},getFrameBoxs:function(){return{header:this.header,content:this.content}}})});
define("SINGLE/mvc/transition.default.js",["SINGLE/mvc/transition.interface"],function(require,n,e){var s=require("SINGLE/mvc/transition.interface"),o="default_forward_out",i="default_forward_in",a="default_back_out",d="default_back_in",t=s.extend({into:function(n,e,t,r){n.removeClass([o,i,a,d].join(" ")),e.removeClass([o,i,a,d].join(" ")),e.show(),n.show(),n.css("z-index",s.getTopIndexZ()),e.css("z-index",s.getTopIndexZ()),n.addClass(o),e.addClass(i),s.removeTransitionEnd(e),s.addTransitionEnd(e,function(){e.removeClass(i),t&&t.call(r)}),s.removeTransitionEnd(n),s.addTransitionEnd(n,function(){n.hide(),n.removeClass(o)})},out:function(n,e,t,r){n.removeClass([o,i,a,d].join(" ")),e.removeClass([o,i,a,d].join(" ")),e.show(),n.show(),n.addClass(a),e.addClass(d),e.css("z-index",s.getTopIndexZ()),n.css("z-index",s.getTopIndexZ()),s.removeTransitionEnd(e),s.addTransitionEnd(e,function(){e.removeClass(d)}),s.removeTransitionEnd(n),s.addTransitionEnd(n,function(){n.hide(),n.removeClass(a),t&&t.call(r)})},isAnimation:function(n){return n.hasClass([o,i,a,d].join(" "))}});return new t});
define("SINGLE/mvc/transition.header.js",["SINGLE/mvc/transition.interface"],function(require,n,e){var s=require("SINGLE/mvc/transition.interface"),o="header_forward_out",i="header_forward_in",a="header_back_out",d="header_back_in",r=s.extend({into:function(n,e,r,t){n.removeClass([o,i,a,d].join(" ")),e.removeClass([o,i,a,d].join(" ")),e.show(),n.show(),n.css("z-index",s.getTopIndexZ()),e.css("z-index",s.getTopIndexZ()),n.addClass(o),e.addClass(i),s.removeTransitionEnd(e),s.addTransitionEnd(e,function(){e.removeClass(i),r&&r.call(t)}),s.removeTransitionEnd(n),s.addTransitionEnd(n,function(){n.hide(),n.removeClass(o)})},out:function(n,e,r,t){n.removeClass([o,i,a,d].join(" ")),e.removeClass([o,i,a,d].join(" ")),e.show(),n.show(),n.addClass(a),e.addClass(d),e.css("z-index",s.getTopIndexZ()),n.css("z-index",s.getTopIndexZ()),s.removeTransitionEnd(e),s.addTransitionEnd(e,function(){e.removeClass(d)}),s.removeTransitionEnd(n),s.addTransitionEnd(n,function(){n.hide(),n.removeClass(a),r&&r.call(t)})},isAnimation:function(n){return n.hasClass([o,i,a,d].join(" "))}});return new r});
define("SINGLE/mvc/transition.header.notanimte.js",["SINGLE/mvc/transition.interface"],function(require,n,e){var i=require("SINGLE/mvc/transition.interface"),t=i.extend({into:function(n,e,t,o){n.hide(),e.show(),n.css("z-index",i.getTopIndexZ()),e.css("z-index",i.getTopIndexZ()),t&&t.call(o)},out:function(n,e,t,o){n.hide(),e.show(),n.css("z-index",i.getTopIndexZ()),e.css("z-index",i.getTopIndexZ()),t&&t.call(o)},isAnimation:function(n){return!1}});return new t});
define("SINGLE/mvc/transition.interface.js",["SINGLE/base/object","SINGLE/common/funs"],function(require,n,e){var t=require("SINGLE/base/object"),o=require("SINGLE/common/funs"),i=t.extend({into:function(n,e,t){throw"Please implement 'into' method"},out:function(n,e,t){throw"Please implement 'out' method"},isAnimation:function(){throw"Please implement 'isAnimation' method"}}),m="webkitAnimation"in document.body.style?"webkitAnimationEnd":"animationend";return i.getTopIndexZ=o.createAddSelf(1e3),i.addTransitionEnd=function(n,e){n.on(m,e)},i.removeTransitionEnd=function(n,e){n.off(m,e)},i});
define("SINGLE/mvc/transition.notanime.js",["SINGLE/mvc/transition.interface"],function(require,n,i){var t=require("SINGLE/mvc/transition.interface"),e=t.extend({into:function(n,i,t,e){n.hide(),i.show(),t&&t.call(e)},out:function(n,i,t,e){n.hide(),i.show(),t&&t.call(e)},isAnimation:function(n){return!1}});return new e});
define("SINGLE/mvc/transition.updown.js",["SINGLE/mvc/transition.interface"],function(require,n,o){var s=require("SINGLE/mvc/transition.interface"),i="updown_forward_out",e="updown_forward_in",a="updown_back_out",d="updown_back_in",t=s.extend({into:function(n,o,t,r){n.removeClass([i,e,a,d].join(" ")),o.removeClass([i,e,a,d].join(" ")),o.show(),n.show(),n.css("z-index",s.getTopIndexZ()),o.css("z-index",s.getTopIndexZ()),n.addClass(i),o.addClass(e),s.removeTransitionEnd(o),s.addTransitionEnd(o,function(){o.removeClass(e),t&&t.call(r)}),s.removeTransitionEnd(n),s.addTransitionEnd(n,function(){n.hide(),n.removeClass(i)})},out:function(n,o,t,r){n.removeClass([i,e,a,d].join(" ")),o.removeClass([i,e,a,d].join(" ")),o.show(),n.show(),n.addClass(a),o.addClass(d),o.css("z-index",s.getTopIndexZ()),n.css("z-index",s.getTopIndexZ()),s.removeTransitionEnd(o),s.addTransitionEnd(o,function(){o.removeClass(d)}),s.removeTransitionEnd(n),s.addTransitionEnd(n,function(){n.hide(),n.removeClass(a),t&&t.call(r)})},isAnimation:function(n){return n.hasClass([i,e,a,d].join(" "))}});return new t});
define("SINGLE/mvc/view.js",["SINGLE/base/base","SINGLE/base/event","SINGLE/common/funs"],function(require,t,e){function i(){}function n(t){var e=(t||"").replace(/^\s+|\s+$/g,"").split(/\s+/);return{event:e.shift(),selector:e.join(" ")}}function a(){var t=this.events||{};s.each(t,function(t,e){var a=n(e),t=s.bind("function"==typeof t?t:this[t]||i,this);this.root.on(a.event,a.selector,t)},this)}var s=require("SINGLE/base/base"),o=require("SINGLE/base/event"),r=require("SINGLE/common/funs"),h=(function(t){var e=+new Date;return function(){return"page"+e+t()}}(r.createAddSelf()),"viewroot-box"),f="viewroot-bg",u="viewroot",c=o.extend({elastic:!0,propertys:function(t,e,i,n){this.$=function(t){return this.el.find(t)}.bind(this),this.id=e.view,this.root=$('<div class="'+h+'"><div class="'+f+'"></div><div class="'+u+'"></div></div>'),this.el=this.root.find("."+u),this.root.attr("id",this.id),this.root.hide(),this.on("addframe",function(){}),a.call(this),this.frame=i,this.app=n,this.name=t,this.hashdata=e,this.onCreate(),this.emit("onCreate")},$P:function(t,e){return this.hashdata.path[t]||e},$Q:function(t,e){return this.hashdata.query[t]||e},setHashData:function(t){this.hashdata=t},getRoot:function(){return this.root},getRootBg:function(){return this.root.find("."+f)},turning:function(){this.frame.turning.apply(this.frame,arguments)},onCreate:function(){},onLoad:function(){},onShow:function(){},onHide:function(){},forward:function(){this.app.forward.apply(this.app,arguments)},isForward:function(){return this.hashdata.forward},replace:function(){this.app.replace.apply(this.app,arguments)},back:function(){this.app.back.apply(this.app,arguments)},toHead:function(t,e){this.frame.toHead(t,e)},showToast:function(){this.frame.showToast.apply(this.frame,arguments)},hideToast:function(){this.frame.hideToast.apply(this.frame,arguments)},showAlert:function(t){this.frame.showAlert.apply(this.frame,arguments)},hideAlert:function(){this.frame.hideAlert.apply(this.frame,arguments)},showLoading:function(t){this.frame.showLoading.apply(this.frame,arguments)},hideLoading:function(){this.frame.hideLoading.apply(this.frame,arguments)},showHeader:function(){this.frame.showHeader.apply(this.frame,arguments)},hideHeader:function(){this.frame.hideHeader.apply(this.frame,arguments)},getHeaderRoot:function(){return this.frame.header.getRoot()}});return c});
define("SINGLE/app/base.js",[],function(require){var e,n="ttpodsmm",t="js_request",a="app.",c="service",o="params",r="ack",u="callback",l="error",i="cancel",f="confirm",s=function(){var e;return function(){if(e)return e;var n=document.getElementsByTagName("body");return e=n&&n[0]}}(),p=e=function(e){var n=document.createElement("iframe");n.src=e,n.style.display="none";var t=s();t&&(t.appendChild(n),setTimeout(function(){t.removeChild(n),n=null},500))},m=function(e){var n=0;return function(){return e+n++}}((new Date).valueOf()+~~(1e8*Math.random())),d=function(){function s(e,n,t){return{fn:e,space:n,onlyone:t}}function d(e,n,t,a,c){switch(t){case u:k[e]=s(n,a,c);break;case l:b[e]=s(n,a,c);break;case i:g[e]=s(n,a,c);break;case f:w[e]=s(n,a,c);break;default:return null}}function v(e){delete e.fn,delete e.space,delete e.onlyone}function y(e){k[e]&&v(k[e]),delete k[e],b[e]&&v(b[e]),delete b[e],g[e]&&v(g[e]),delete g[e],w[e]&&v(w[e]),delete w[e]}function h(e,s,p){var v=[];v.push(c+"="+e),s&&v.push(o+"="+encodeURIComponent($.param(s))),p=p||{};var h=m();"function"==typeof p.callback&&(d(h,p.callback,u,p.space,p.onlyone),v.push(u+"="+a+u)),"function"==typeof p.error&&(d(h,p.error,l,p.space,p.onlyone),v.push(l+"="+a+l)),"function"==typeof p.cancel&&(d(h,p.cancel,i,p.space,p.onlyone),v.push(i+"="+a+i)),d(h,function(){p.confirm&&p.confirm.call(this),clearTimeout(k)},f,p.space,p.onlyone),v.push(f+"="+a+f);var k=setTimeout(function(){p.timeoutfn&&p.timeoutfn.call(p.space),y(h)},1e3*(p.timeout||30));return v.push(r+"="+h),{url:n+"://"+t+"?"+v.join("&"),ack:h}}var k={},b={},g={},w={},T=function(e,n,t){var a=e[n];t=[].slice.call(t,1),a&&(a.fn.apply(a.space||this,t),a.onlyone&&(delete e[n],a.fn=a.space=null))},j={};return j[u]=function(e){T(k,e,arguments)},j[l]=function(e){T(b,e,arguments)},j[i]=function(e){T(g,e,arguments)},j[f]=function(e){T(w,e,arguments)},window.app=j,{setSendHandle:function(n){p=n?n:e},setProtocol:function(e){n=e},create:function(e,n,t){var a=m();return d(a,e,u,n,t),a},call:function(e,n){n=n||{};var t=h(e,n.params,n);return p(t.url),t.ack},del:function(e){y(e)}}}();return d});
define("SINGLE/model/form.model.js",["SINGLE/model/model"],function(require,e,t){var n=require("SINGLE/model/model");return n.extend({propertys:function(){this.dataType="json",this.contentType="application/x-www-form-urlencoded",this.ajaxConfigs={},this.headers={}},ajaxRequest:function(e,t,n,a,o){var s=this;return $.ajax($.extend(this.ajaxConfigs,{url:t,data:n,type:e,headers:this.headers||{},contentType:this.contentType,dataType:this.dataType,success:function(e){a.apply(s,arguments)},error:function(e){o.apply(s,arguments)}}))}})});
define("SINGLE/model/model.js",["SINGLE/base/base","SINGLE/base/event","SINGLE/common/funs","SINGLE/storage/store"],function(require,t,e){function s(){}function i(t,e,s,r){if(!t.v){var a=this,o=function(){setTimeout(function(){t.v||i.call(a,t,e,s,r)},1e3*e)};this.request({success:function(){s.success&&s.success.apply(this,arguments)},error:function(){s.error&&s.error.apply(this,arguments)},abort:function(){s.abort&&s.abort.apply(this,arguments)},complete:function(){s.complete&&s.complete.apply(this,arguments),o()}},r)}}var r=require("SINGLE/base/base"),a=require("SINGLE/base/event"),o=require("SINGLE/common/funs"),h=require("SINGLE/storage/store"),n=0,u=1,c=2,l=function(){this.off("success"),this.off("error"),this.off("abort"),this.off("complete")},f=/\{[^\{\}]*\}/,p=a.extend({propertys:function(){this._xhr,this.type="post",this.getfields=[],this.pathfields=[],this.param=this.buildParam(),this.result=this.buildResult(),this.state=n},initialize:function(){},setType:function(t){this.type=t},fieldsGet:function(){return[]},buildBaseUrl:function(){throw"Please override the `buildBaseUrl` method"},buildUrl:function(){throw"Please override the `buildUrl` method"},buildParam:function(){throw"Please override the `buildParam` method"},buildResult:function(){throw"Please override the `buildResult` method"},ajaxRequest:function(){throw"Please override the `ajaxRequest(type,url)` method"},verifyData:function(t){return!0},getParam:function(t){return this.param instanceof h?t?this.param.getAttr(t):this.param.get():JSON.parse(JSON.stringify(this.param))},setParam:function(t,e){return"object"===r.type(t)?void r.each(t,function(t,e){this.setParam(e,t)},this):void(this.param instanceof h?this.param.setAttr(t,e):(this.param||(this.param={}),this.param[t]=e))},delParam:function(t){return"array"===r.type(t)?void r.each(t,function(t){this.delParam(t)},this):void(this.param instanceof h?this.param.delAttr(t):(this.param||(this.param={}),delete this.param[k]))},getResult:function(){if(this.result instanceof h){var t=this.getParam(),e=t?JSON.stringify(t):null;return this.result.get(e)}return this.result},setResult:function(t){if(this.result instanceof h){var e=this.getParam(),s=e?JSON.stringify(e):null;this.result.set(t,s)}},request:function(t,e){t=t||{};var i,a=t.success||s,h=t.error||s,p=t.abort||s,m=t.complete||s;if(this.state===c){if(i=this.getResult())return void a.call(e||this,i);this.state=n}if(this.state==c||(this.on("success",a,e),this.on("error",h,e),this.on("abort",p,e),this.on("complete",m,e),this.state!==u)){this.baseurl=this.buildBaseUrl(),this.url=this.buildUrl();var d=this.baseurl.replace(/\/+$/g,"")+"/"+this.url.replace(/^\/+/g,""),b=this.getParam()||{},v=this,x=[];if(this.type&&!this.type.match(/get/i)){var g=d.indexOf("?")>-1?"&":"?",y=function(t,e){var s=[];return"*"===t?r.each(e,function(t,e){s.push(e+"="+t)}):r.each(t,function(t){e[t]&&s.push(t+"="+e[t])}),s.join("&")}(this.fieldsGet(),b);y&&(d=(d+g+y).replace(/\?{2,}/i,"?").replace(/\?&+/i,"?"))}d.match(f)&&(d=o.formatString(d,b||{},function(t){x.push(t)}),r.each(x,function(t){delete b[t]})),this.isAbort=!1,this.state=u;var S=this;return this._xhr=this.ajaxRequest(this.type,d,b,function(t){v.verifyData(t)?(v.setResult(t),v.emit("success",t,S._xhr.status,S._xhr),v.state=c):(v.emit("error",t,S._xhr.status,S._xhr),v.state=n),v.emit("complete",S._xhr.status,S._xhr),l.call(v),this.isAbort=!1},function(t){this.isAbort?v.emit("abort",t,S._xhr.status,S._xhr):v.emit("error",t,S._xhr.status,S._xhr),v.emit("complete",S._xhr.status,S._xhr),v.state=n,l.call(v),this.isAbort=!1}),this._xhr}},abort:function(){this._xhr&&(this.isAbort=!0,this._xhr.abort())},isLoopStop:{v:!1},loopRequest:function(t,e,s){"object"==typeof t&&(s=e,e=t,t=5),this.isLoopStop.v=!0,this.isLoopStop={v:!1},i.call(this,this.isLoopStop,t,e,s)},endLoopRequest:function(){this.isLoopStop.v=!0,this._xhr&&this._xhr.abort()}});return p});
define("SINGLE/model/restful.model.js",["SINGLE/model/model"],function(require,e,n){var t=require("SINGLE/model/model");return t.extend({ajaxRequest:function(e,n,t,a,o){var r=this;return $.ajax({url:n,data:JSON.stringify(t),type:e||"post",contentType:"application/json",dataType:"json",success:function(e){a.apply(r,arguments)},error:function(e){o.apply(r,arguments)}})}})});
define("SINGLE/ui/base.js",["SINGLE/base/base","SINGLE/common/funs"],function(require,e,t){var n=(require("SINGLE/base/base"),require("SINGLE/common/funs")),r={};r.getOffsetByPage=function(e){var t=0,n=0;if(!e)return{left:t,top:n};do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{top:n,left:t}},r.getPageSize=function(){return document.body?{height:document.body.scrollHeight,width:document.body.scrollWidth}:{width:0,height:0}},r.createZIndex=function(e,t){return function(){return t+e()}}(n.createAddSelf(),2e3),r.createUiId=function(e){return function(){return"uiId_"+e()}}(n.createAddSelf()),r.createFnName=function(e){return function(){return"fn_"+e()}}(n.createAddSelf()),r.cssPrefix=function(){return"-webkit-"}();var s=/translate(x|y|z)\((-?[\w\.]+)\)/gim,f=/translate(?:3d|2d)?\(\s*(-?[\w\.]+)\s*,\s*(-?[\w\.-]+)\s*(?:,\s*(-?[\w\.-]+)\s*)?\)/i;return r.getTranslate=function(e){var t,n=$(e).css(r.cssPrefix+"transform"),a={};return n.match(s)?n.replace(s,function(e,t,n){a[t]=n}):(t=f.exec(n))&&(a.x=t[1],a.y=t[2],a.z=t[3]),a},r.setTranslate=function(e,t){var n=$(e);t=t||{};var s=[t.x||"0px",t.y||"0px",t.z||"0px"];n.css(r.cssPrefix+"transform","translate3D("+s.join(",")+")")},r});
define("SINGLE/ui/dialog.js",["SINGLE/base/base","SINGLE/ui/layer"],function(require){function i(i){var s=$();return t.each(i,function(i){var e=$("<button></button>");if(e.html(i.title||""),i.click&&e.on("click",i.click.bind(this)),i.cls&&e.addClass(i.cls),i.events){var n={};t.each(i.events,function(i,t){n[t]=i.bind(this)},this),e.on(n)}s.push(e[0])},this),s}var t=require("SINGLE/base/base"),s=require("SINGLE/ui/layer"),e={};e.UI_DIALOG="ui-dialog",e.UI_DIALOG_BOX="ui-dialog-box",e.UI_DIALOG_CLOSE="ui-dialog-close",e.UI_DIALOG_PADDING="ui-dialog-padding",e.UI_DIALOG_HEAD="ui-dialog-head",e.UI_DIALOG_HEAD_TITLE="ui-dialog-head-title",e.UI_DIALOG_CONTENT="ui-dialog-content",e.UI_DIALOG_BUTTONS="ui-dialog-buttons";var n=[{title:"确认",click:function(){this.hide()}}];return s.extend({propertys:function(){this.title="",this.content="",this.buttons=[],this.hideTitle=!1,this.hideClose=!1,this.doms={},this.on("create",function(){this.$el.addClass(e.UI_DIALOG),t.each(e,function(i){this.doms[i]=this.$el.find("."+i)},this),this.update()}),this.on("show",function(){this.updatePosition()})},initialize:function($super,i){$super(i)},setOption:function($super,i){i=i||{},$super(i),t.isNUL(i.title)||(this.title=i.title),t.isNUL(i.content)||(this.content=i.content),this.buttons=i.buttons&&i.buttons.length?i.buttons:n,t.isNUL(i.hideTitle)||(this.hideTitle=i.hideTitle),t.isNUL(i.hideClose)||(this.hideClose=i.hideClose)},update:function(){if(this.$el){this.hideClose?this.doms[e.UI_DIALOG_CLOSE].hide():this.doms[e.UI_DIALOG_CLOSE].show(),this.hideTitle?this.doms[e.UI_DIALOG_HEAD].hide():this.doms[e.UI_DIALOG_HEAD].show(),this.doms[e.UI_DIALOG_HEAD_TITLE].html(this.title),this.doms[e.UI_DIALOG_CONTENT].html(this.content);var t=i.call(this,this.buttons);this.doms[e.UI_DIALOG_BUTTONS].empty(),this.doms[e.UI_DIALOG_BUTTONS].append(t)}},createHTML:function(){return['<div class="'+e.UI_DIALOG_BOX+'">','<span class="'+e.UI_DIALOG_CLOSE+'"></span>','<div class="'+e.UI_DIALOG_PADDING+'">','<div class="'+e.UI_DIALOG_HEAD+'">','<span class="'+e.UI_DIALOG_HEAD_TITLE+'"></span>',"</div>",'<div class="'+e.UI_DIALOG_CONTENT+'"></div>','<div class="'+e.UI_DIALOG_BUTTONS+'"></div>',"</div>","</div>"].join("")},show:function($super,i){$super(i),i&&(this.setOption(i),this.update())}})});
define("SINGLE/ui/layer.js",["SINGLE/base/base","SINGLE/ui/base","SINGLE/ui/object","SINGLE/ui/mask"],function(require){var t=require("SINGLE/base/base"),s=require("SINGLE/ui/base"),i=require("SINGLE/ui/object"),e=require("SINGLE/ui/mask");return i.extend({propertys:function(){this.offsetX=0,this.offsetY=0,this.useMask=!0,this.mask=null,this.maskOpacity=!0,this.on("create",function(){this.$el.addClass("ui-layer"),this.useMask&&(this.mask=new e)}),this.on("show",function(){this.startAutoPosition(),this.useMask&&(this.mask.show(!this.maskOpacity),this.mask.topIndex()),this.updatePosition(),setTimeout(function(){this.updatePosition()}.bind(this),0),this.topIndex()}),this.on("hide",function(){this.useMask&&this.mask.hide(),this.endAutoPosition()}),this.on("resize",function(){this.updatePosition()})},initialize:function($super,t){$super(t)},setOption:function($super,s){s=s||{},$super(s),t.isNUL(s.offsetX)||(this.offsetX=s.offsetX),t.isNUL(s.offsetY)||(this.offsetY=s.offsetY),t.isNUL(s.useMask)||(this.useMask=s.useMask),t.isNUL(s.maskOpacity)||(this.maskOpacity=s.maskOpacity)},getPosInfo:function(){if(this.$el&&this.$el.length){var t=s.getOffsetByPage(this.$el[0]),i=s.getPageSize();return{top:t.top,left:t.left,width:this.$el.width(),height:this.$el.height(),pageWidth:i.width,pageHeight:i.height}}return null},updatePosition:function(){var t=this.getPosInfo();t&&this.$el.css({"margin-left":-t.width/2+this.offsetX+"px","margin-top":-t.height/2+this.offsetY+"px"})},createHTML:function(){return""},show:function($super,s){s&&!t.isNUL(s.maskOpacity)&&(this.maskOpacity=s.maskOpacity),$super(s)}})});
define("SINGLE/ui/loading.js",["SINGLE/ui/layer"],function(require){var i=require("SINGLE/ui/layer");return i.extend({propertys:function(){this.on("create",function(){this.$el.addClass("ui-loading")}),this.useMask=!0},initialize:function($super,i){$super(i)},createHTML:function(){return'<div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>'}})});
define("SINGLE/ui/mask.js",["SINGLE/base/base","SINGLE/ui/object"],function(require){function t(){if(this.click&&this.$el.on("click",this.click.bind(this)),this.events){i.each(this.events,function(t,i){this.$el.on(i,t.bind(this))},this)}this.$el.on("touchmove",function(t){t.preventDefault()})}var i=require("SINGLE/base/base"),e=require("SINGLE/ui/object"),n="ui-mask-not-opacity";return e.extend({propertys:function(){this.on("create",function(){this.$el.addClass("ui-mask"),t.call(this),this.on("show",function(){this.topIndex()})})},initialize:function($super,t){$super(t)},setOption:function($super,t){t=t||{},$super(t),t.click&&(this.click=t.click),t.events&&(this.events=t.events)},createHTML:function(){return""},show:function($super,t){$super(),t?this.$el.addClass(n):this.$el.removeClass(n)}})});
define("SINGLE/ui/object.js",["SINGLE/base/base","SINGLE/ui/base","SINGLE/base/event","SINGLE/common/funs"],function(require){var t=require("SINGLE/base/base"),s=require("SINGLE/ui/base"),i=require("SINGLE/base/event"),e=require("SINGLE/common/funs"),n="ui-root",o=$(window),h=i.extend({propertys:function(){this.uiId=s.createUiId(),this.status=h.STATUS_NOT_CREATE,this.$el=null,this.useRoot=!0,this.container=null,this.__autoFnName=this.randFn(function(){this.emit("resize")})},initialize:function($super,t){$super(t),this.setOption(t)},setOption:function($super,s){s=s||{},$super(s),t.isNUL(s.useRoot)||(this.useRoot=s.useRoot),this.container=t.isNUL(s.container)?$("body"):s.container,t.isNUL(s.cls)||this.on("create",function(){this.$el.addClass(s.cls)})},randFn:function(t){var i=s.createFnName();return this[i]=t.bind(this),i},getUiId:function(){return this.uiId},create:function(){(this.status===h.STATUS_NOT_CREATE||this.status===h.STATUS_DESTROY)&&(this.useRoot?(this.$el=$('<div class="'+n+'" id="'+this.getUiId()+'"></div>'),this.$el.append(this.createHTML())):this.$el=$(this.createHTML()),this.$el.hide(),this.container.append(this.$el),this.status=h.STATUS_CREATE,this.emit("create"))},createHTML:function(){throw"error: not override createHTML"},show:function(){this.create(),(this.status===h.STATUS_CREATE||this.status===h.STATUS_SHOW||this.status===h.STATUS_HIDE)&&(this.$el.show(),this.status===h.STATUS_SHOW,this.emit("show"))},hide:function(){(this.status===h.STATUS_CREATE||this.status===h.STATUS_SHOW||this.status===h.STATUS_HIDE)&&(this.$el.hide(),this.status===h.STATUS_HIDE,this.emit("hide"))},topIndex:function(){this.$el&&this.$el.css("zIndex",s.createZIndex())},createDomId:function(t){return function(){return"comid-"+t()}}(e.createAddSelf()),destroy:function(){this.$el&&(this.$el.remove(),this.$el=null,this.status=h.STATUS_DESTROY,this.emit("destroy"))},startAutoPosition:function(){this[this.__autoFnName]&&o.off("resize",this[this.__autoFnName]),o.on("resize",this[this.__autoFnName])},endAutoPosition:function(){o.off("resize",this[this.__autoFnName])}});return h.STATUS_NOT_CREATE=0,h.STATUS_CREATE=1,h.STATUS_SHOW=2,h.STATUS_HIDE=3,h.STATUS_DESTROY=4,h});
define("SINGLE/ui/slide.js",["SINGLE/ui/base","SINGLE/ui/object","SINGLE/base/base","SINGLE/common/funs"],function(require){function t(t){var i=$(x);return i.append(t),i}function i(){this.items&&a.each(this.items,function(t){this.add(t)},this),this.subbox=this.$el.find("."+o)}function s(){var t=this.$el.width(),i=this.$el.find("."+l),s=i.length*t;this.$el.find("."+o).css("width",s+"px"),i.width(t)}function e(){this.$el[0].addEventListener("touchstart",this,!1),this.$el[0].addEventListener("touchmove",this,!1),this.$el[0].addEventListener("touchend",this,!1)}var n=require("SINGLE/ui/base"),h=require("SINGLE/ui/object"),a=require("SINGLE/base/base"),d=(require("SINGLE/common/funs"),"ui-slide-box"),o="ui-slide-sub-box",l="ui-slide-item",c="ui-slide-trans",u="ui-slide-nav",r="ui-slide-cur-nav",x='<div class="'+l+'"></div>';return h.extend({propertys:function(){this.on("create",function(){this.$el.addClass(d),i.call(this),e.call(this),this.to(this.index)}),this.itemWidth=0,this.length=0,this.on("sizechange",function(){var t=this.$el.find("."+l);this.length=t.length}),this.on("show",function(){s.call(this);var t=this.$el.find("."+l);this.itemWidth=t.width(),this.startAutoPosition()}),this.on("hide",function(){this.endAutoPosition()}),this.on("resize",function(){s.call(this),this.to(this.index)}),this.items=[],this.index=0},createHTML:function(){return['<div class="'+o+'"></div>','<div class="'+u+'"></div>'].join("")},initialize:function($super,t){$super(t)},setOption:function($super,t){t=t||{},$super(t),t.items&&(this.items=t.items),t.index&&(this.index=t.index)},tx:0,dx:0,handleEvent:function(t){var i,s=t.changedTouches[0];switch(t.type){case"touchstart":this.subbox.removeClass(c),this.tx=s.pageX,this.dx=parseInt(n.getTranslate(this.subbox).x||0);break;case"touchmove":i=s.pageX-this.tx;var e=this.dx+i;e>0?e=0:e<-(this.itemWidth*Math.max(this.length-1,0))&&(e=-(this.itemWidth*Math.max(this.length-1,0))),n.setTranslate(this.subbox,{x:e+"px",y:"0px",z:"0px"});break;case"touchend":case"touchcancel":i=s.pageX-this.tx,this.subbox.addClass(c),setTimeout(function(){return Math.abs(i)<20?void n.setTranslate(this.subbox,{x:this.dx+"px",y:"0px",z:"0px"}):void(i>0?this.pre():this.next())}.bind(this),0)}},add:function(i,s){if(this.$el){var i=t.call(this,i);"number"==typeof s&&s!=0/0?0>s?this.$el.find("."+l).eq(0).before(i):this.$el.find("."+l).eq(s).after(i):this.$el.find("."+o).append(i);var e=this.createDomId();i.attr("id",e);var n=this.$el.find("."+u),h=$("<span></span>");h.attr("id","from-"+e),n.append(h),this.emit("sizechange")}},remove:function(t){if(this.$el){var i=this.$el.find("."+l).eq(t);i.length&&(i.remove(),this.emit("sizechange"))}},to:function(t){var i=0;t>=this.length&&(t=Math.max(this.length-1,0)),0>t&&(t=0),i=-(this.$el.width()*t),n.setTranslate(this.$el.find("."+o),{x:i+"px",y:"0px",z:"0px"});var s=this.$el.find("."+u).find("span").eq(t);s.addClass(r),s.siblings().removeClass(r),this.index=t},pre:function(){this.to(this.index-1)},next:function(){this.to(this.index+1)}})});
define("SINGLE/ui/toast.js",["SINGLE/base/base","SINGLE/ui/layer"],function(require){function t(){this.$el&&this.$el.on("click",function(){this.click&&this.click.apply(this,arguments)}.bind(this))}function i(){}function n(t){0>=t||(this.updatePosition(),setTimeout(function(){n.call(this,t-1)}.bind(this),20))}var c=require("SINGLE/base/base"),s=require("SINGLE/ui/layer"),e={},o="ui-toast";return e.UI_TOAST_CONTENT="ui-toast-content",s.extend({propertys:function(){this.doms={},this.on("create",function(){this.$el.addClass(o),c.each(e,function(t){this.doms[t]=this.$el.find("."+t)},this),t.call(this)}),this.on("show",function(){this.update(),n.call(this,3)}),this.click=i,this.content=""},initialize:function($super,t){$super(t)},setOption:function($super,t){t=t||{},$super(t),c.isNUL(t.content)||(this.content=t.content),c.isNUL(t.click)||(this.click=t.click)},createHTML:function(){return'<div class="'+e.UI_TOAST_CONTENT+'"></div>'},update:function(){this.$el&&this.doms[e.UI_TOAST_CONTENT].html(this.content)},show:function($super,t){t&&(t.click&&(this.click=opitons.click),t.content&&(this.content=t.content),t.timeout&&setTimeout(function(){this.hide(),t.callback&&t.callback.call(this)}.bind(this),1e3*t.timeout)),$super(t)}})});