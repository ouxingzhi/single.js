define("SINGLE/storage/store.js",["base/base","base/event"],function(require,e,t){function i(e){if("number"==typeof e)return isNaN(e)&&(e=0),e;var t=0;return(e||"").replace(n,function(e,i,a){switch(a=a.toUpperCase(),i=parseInt(i),a){case"Y":t+=31536e6*i;break;case"M":t+=2592e6*i;break;case"W":t+=6048e5*i;break;case"D":t+=864e5*i;break;case"H":t+=36e5*i;break;case"I":t+=6e4*i;break;case"S":t+=1e3*i}}),t}function a(e,t,i){return{value:e,timeout:t,tag:i}}var r=require("base/base"),s=require("base/event"),n=/([\d\.]+)([a-z])/gi,o=s.extend({propertys:function(){this.storage=this.buildStorage(),this.name=this.buildName(),this.timeout=i(this.buildTimeout())},initialize:function(){},set:function(e,t){var i=JSON.stringify(e),r=(new Date).valueOf()+this.timeout,s=a(i,r,t);this.storage.set(this.name,s)},get:function(e){var t=this.storage.get(this.name);if(!(!t||new Date>t.timeout||e&&e!==t.tag))try{return JSON.parse(t.value)}catch(i){}},getTag:function(){var e=this.storage.get(this.name);return e&&e.tag},setAttr:function(e,t,i){var a=this.get()||{};void 0===t&&(t=null),r.path(a,e,t),i=i||this.getTag(),this.set(a,i)},delAttr:function(e,t,i){var a=this.get()||{};r.delPath(a,e,t),i=i||this.getTag(),this.set(a,i)},getAttr:function(e,t){return r.path(this.get(t),e)},remove:function(){this.storage.remove(this.name)},buildName:function(){throw"Please override the `buildName` method"},buildTimeout:function(){throw"Please override the `buildTimeout` method"},buildStorage:function(){throw"Please override the `buildStorage` method"}});return o});