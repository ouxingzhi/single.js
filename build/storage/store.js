define("storage/store",["base/base","base/event"],function(require,e,t){function a(e){if("number"==typeof e)return isNaN(e)&&(e=0),e;var t=0;return(e||"").replace(n,function(e,a,i){switch(i=i.toUpperCase(),a=parseInt(a),i){case"Y":t+=31536e6*a;break;case"M":t+=2592e6*a;break;case"W":t+=6048e5*a;break;case"D":t+=864e5*a;break;case"H":t+=36e5*a;break;case"I":t+=6e4*a;break;case"S":t+=1e3*a}}),t}function i(e,t,a){return{value:e,timeout:t,tag:a}}var r=require("base/base"),s=require("base/event"),n=/([\d\.]+)([a-z])/gi,o=s.extend({propertys:function(){this.storage=this.buildStorage(),this.name=this.buildName(),this.timeout=a(this.buildTimeout())},initialize:function(){},set:function(e,t){var a=JSON.stringify(e),r=(new Date).valueOf()+this.timeout,s=i(a,r,t);this.storage.set(this.name,s)},get:function(e){var t=this.storage.get(this.name);if(!(!t||new Date>t.timeout||e&&e!==t.tag))try{return JSON.parse(t.value)}catch(a){}},getTag:function(){var e=this.storage.get(this.name);return e.tag},setAttr:function(e,t,a){var i=this.get()||{};r.path(i,e,t),a=a||this.getTag(),this.set(i,a)},delAttr:function(e,t,a){var i=this.get()||{};r.delPath(i,e,t),a=a||this.getTag(),this.set(i,a)},getAttr:function(e,t){return r.path(this.get(t),e)},buildName:function(){throw"Please override the `buildName` method"},buildTimeout:function(){throw"Please override the `buildTimeout` method"},buildStorage:function(){throw"Please override the `buildStorage` method"}});return o});