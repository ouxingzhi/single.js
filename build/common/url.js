define("SINGLE/common/url.js",["base/base","base/object"],function(require,s,t){var h=require("base/base"),e=require("base/object"),a=/^\s*(?:(^[a-z]+):)?(?:\/\/([^\/]+))?([^#?]*)(?:\?([^#]*))?(?:#(.*))?\s*$/im,i=/([^=&]*)=([^=&]*)/g,r=/^\s*\/|\/\s*$/i,n=e.extend({propertys:function(){this.protocol="",this.host="",this.path="",this.paths=[],this.search="",this.searchs={},this.hash=""},initialize:function(s){h.mix(this,n.parse(s))},buildUrl:function(){var s,t=[],e=this.data||{};return e.protocol&&(t.push(e.protocol),t.push(":")),e.home&&(t.push("//"),t.push(e.home)),e.paths&&(t.push("/"),t.push(e.paths.join("/"))),e.searchs&&(s=[],h.each(e.searchs,function(t,e){"array"===h.type(t)?h.each(t,function(t){s.push(e+"="+t)}):s.push(e+"="+t)}),s.length&&(t.push("?"),t.push(s.join("&")))),e.hash&&(t.push("#"),t.push(e.hash)),t.join("")},setProtocol:function(s){return this.protocol=s,this},setHost:function(s){return this.host=s,this},setPath:function(s){return this.path=s,this.paths=this.path.replace(r,"").split("/"),this},setPaths:function(s,t){return s=s||0,s>this.paths.length&&(s=this.paths.length),this.paths[s]=t,this},setSearch:function(s){this.search=s;var t=n.parse(s||"");return this.searchs=t.searchs,this},setHash:function(s){return this.hash=s,this}});return n.parse=function(s){var t=(s||"").match(a)||[],h={},e=[];return t[3]&&(e=t[3].replace(r,"").split("/")),t[4]&&t[4].replace(i,function(s,t,e){h[t]?("string"==typeof h[t]&&(h[t]=[h[t]]),h[t].push(e)):h[t]=e}),{protocol:t[1]||"",home:t[2]||"",path:t[3]||"",paths:e,search:t[4]||"",searchs:h,hash:t[5]||""}},n});