define("app/base.js",[],function(require){function e(e){var n=document.createElement("iframe");n.src=e,n.style.display="none";var t=s();t&&(t.appendChild(n),setTimeout(function(){t.removeChild(n),n=null},500))}var n="ttpodsmm",t="js_request",a="app.",c="service",r="params",o="ack",u="callback",l="error",i="cancel",f="confirm",s=function(){var e;return function(){if(e)return e;var n=document.getElementsByTagName("body");return e=n&&n[0]}}(),p=function(e){var n=0;return function(){return e+n++}}((new Date).valueOf()+~~(1e8*Math.random())),m=function(){function s(e,n,t){return{fn:e,space:n,onlyone:t}}function m(e,n,t,a,c){switch(t){case u:h[e]=s(n,a,c);break;case l:k[e]=s(n,a,c);break;case i:b[e]=s(n,a,c);break;case f:g[e]=s(n,a,c);break;default:return null}}function d(e){delete e.fn,delete e.space,delete e.onlyone}function v(e){h[e]&&d(h[e]),delete h[e],k[e]&&d(k[e]),delete k[e],b[e]&&d(b[e]),delete b[e],g[e]&&d(g[e]),delete confirm[e]}function y(e,s,d){var y=[];y.push(c+"="+e),s&&y.push(r+"="+encodeURIComponent($.param(s))),d=d||{};var h=p();"function"==typeof d.callback&&(m(h,d.callback,u,d.space,d.onlyone),y.push(u+"="+a+u)),"function"==typeof d.error&&(m(h,d.error,l,d.space,d.onlyone),y.push(l+"="+a+l)),"function"==typeof d.cancel&&(m(h,d.cancel,i,d.space,d.onlyone),y.push(i+"="+a+i)),m(h,function(){d.confirm&&d.confirm.call(this),clearTimeout(k)},f,d.space,d.onlyone),y.push(f+"="+a+f);var k=setTimeout(function(){d.timeoutfn&&d.timeoutfn.call(d.space),v(h)},1e3*(d.timeout||30));return y.push(o+"="+h),{url:n+"://"+t+"?"+y.join("&"),ack:h}}var h={},k={},b={},g={},w=function(e,n,t){var a=e[n];t=[].slice.call(t,1),a&&(a.fn.apply(a.space||this,t),a.onlyone&&(delete e[n],a.fn=a.space=null))},T={};return T[u]=function(e){w(h,e,arguments)},T[l]=function(e){w(k,e,arguments)},T[i]=function(e){w(b,e,arguments)},T[f]=function(e){w(g,e,arguments)},window.app=T,{setProtocol:function(e){n=e},create:function(e,n,t){var a=p();return m(a,e,u,n,t),a},call:function(n,t){t=t||{};var a=y(n,t.params,t);return e(a.url),a.ack},del:function(e){v(e)}}}();return m});