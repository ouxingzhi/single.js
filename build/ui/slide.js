define("SINGLE/ui/slide.js",["ui/base","ui/object","base/base","common/funs"],function(require){function t(t){var i=$(x);return i.append(t),i}function i(){this.items&&a.each(this.items,function(t){this.add(t)},this),this.subbox=this.$el.find("."+o)}function s(){var t=this.$el.width(),i=this.$el.find("."+l),s=i.length*t;this.$el.find("."+o).css("width",s+"px"),i.width(t)}function e(){this.$el[0].addEventListener("touchstart",this,!1),this.$el[0].addEventListener("touchmove",this,!1),this.$el[0].addEventListener("touchend",this,!1)}var n=require("ui/base"),h=require("ui/object"),a=require("base/base"),d=(require("common/funs"),"ui-slide-box"),o="ui-slide-sub-box",l="ui-slide-item",c="ui-slide-trans",u="ui-slide-nav",r="ui-slide-cur-nav",x='<div class="'+l+'"></div>';return h.extend({propertys:function(){this.on("create",function(){this.$el.addClass(d),i.call(this),e.call(this),this.to(this.index)}),this.itemWidth=0,this.length=0,this.on("sizechange",function(){var t=this.$el.find("."+l);this.length=t.length}),this.on("show",function(){s.call(this);var t=this.$el.find("."+l);this.itemWidth=t.width(),this.startAutoPosition()}),this.on("hide",function(){this.endAutoPosition()}),this.on("resize",function(){s.call(this),this.to(this.index)}),this.items=[],this.index=0},createHTML:function(){return['<div class="'+o+'"></div>','<div class="'+u+'"></div>'].join("")},initialize:function($super,t){$super(t)},setOption:function($super,t){t=t||{},$super(t),t.items&&(this.items=t.items),t.index&&(this.index=t.index)},tx:0,dx:0,handleEvent:function(t){var i,s=t.changedTouches[0];switch(t.type){case"touchstart":this.subbox.removeClass(c),this.tx=s.pageX,this.dx=parseInt(n.getTranslate(this.subbox).x||0);break;case"touchmove":i=s.pageX-this.tx;var e=this.dx+i;e>0?e=0:e<-(this.itemWidth*Math.max(this.length-1,0))&&(e=-(this.itemWidth*Math.max(this.length-1,0))),n.setTranslate(this.subbox,{x:e+"px",y:"0px",z:"0px"});break;case"touchend":case"touchcancel":i=s.pageX-this.tx,this.subbox.addClass(c),setTimeout(function(){return Math.abs(i)<20?void n.setTranslate(this.subbox,{x:this.dx+"px",y:"0px",z:"0px"}):void(i>0?this.pre():this.next())}.bind(this),0)}},add:function(i,s){if(this.$el){var i=t.call(this,i);"number"==typeof s&&s!=0/0?0>s?this.$el.find("."+l).eq(0).before(i):this.$el.find("."+l).eq(s).after(i):this.$el.find("."+o).append(i);var e=this.createDomId();i.attr("id",e);var n=this.$el.find("."+u),h=$("<span></span>");h.attr("id","from-"+e),n.append(h),this.emit("sizechange")}},remove:function(t){if(this.$el){var i=this.$el.find("."+l).eq(t);i.length&&(i.remove(),this.emit("sizechange"))}},to:function(t){var i=0;t>=this.length&&(t=Math.max(this.length-1,0)),0>t&&(t=0),i=-(this.$el.width()*t),n.setTranslate(this.$el.find("."+o),{x:i+"px",y:"0px",z:"0px"});var s=this.$el.find("."+u).find("span").eq(t);s.addClass(r),s.siblings().removeClass(r),this.index=t},pre:function(){this.to(this.index-1)},next:function(){this.to(this.index+1)}})});