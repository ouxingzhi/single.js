define("utils",function(){var t={};return t}),define("object_gulp-cmd_33",["base","base","base","object"],function(require,t,e){var i=(require("base"),require("base")),s=require("base"),n=require("object");return i(n,{propertys:function(){this.uiId=s.createUiId()},getUiId:function(){return this.uiId}})}),define("base_gulp-cmd_32",["base","funs"],function(require,t,e){var i=(require("base"),require("funs")),s={};return s.getOffsetByPage=function(t){var e=0,i=0;if(!t)return{left:e,top:i};do e+=t.offsetLeft,i+=t.offsetTop;while(t=t.offsetParent);return{top:i,left:e}},s.createUiId=function(t){return function(){return"uiId_"+t()}}(i.createAddSelf()),s}),define("store",["base","event"],function(require,t,e){function i(t){if("number"==typeof t)return isNaN(t)&&(t=0),t;var e=0;return(t||"").replace(o,function(t,i,s){switch(s=s.toUpperCase(),i=parseInt(i),s){case"Y":e+=31536e6*i;break;case"M":e+=2592e6*i;break;case"W":e+=6048e5*i;break;case"D":e+=864e5*i;break;case"H":e+=36e5*i;break;case"I":e+=6e4*i;break;case"S":e+=1e3*i}}),e}function s(t,e,i){return{value:t,timeout:e,tag:i}}var n=require("base"),r=require("event"),o=/([\d\.]+)([a-z])/gi,a=r.extend({propertys:function(){this.storage=this.buildStorage(),this.name=this.buildName(),this.timeout=i(this.buildTimeout())},initialize:function(){},set:function(t,e){var i=JSON.stringify(t),n=(new Date).valueOf()+this.timeout,r=s(i,n,e);this.storage.set(this.name,r)},get:function(t){var e=this.storage.get(this.name);if(!(!e||new Date>e.timeout||t&&t!==e.tag))try{return JSON.parse(e.value)}catch(i){}},getTag:function(){var t=this.storage.get(this.name);return t.tag},setAttr:function(t,e,i){var s=this.get()||{};n.path(s,t,e),i=i||this.getTag(),this.set(s,i)},delAttr:function(t,e,i){var s=this.get()||{};n.delPath(s,t,e),i=i||this.getTag(),this.set(s,i)},getAttr:function(t,e){return n.path(this.get(e),t)},buildName:function(){throw"Please override the `buildName` method"},buildTimeout:function(){throw"Please override the `buildTimeout` method"},buildStorage:function(){throw"Please override the `buildStorage` method"}});return a}),define("storage",["base","object"],function(require,t,e){var i=require("base"),s=require("object");return s.extend({propertys:function(){this.proxy},initialize:function(t){this.proxy=t},get:function(t){var e,i=this.proxy.getItem(t);try{e=JSON.parse(i)}catch(s){}return e},set:function(t,e){var i=JSON.stringify(e);this.proxy.setItem(t,i)},setAttr:function(t,e,s){var n=this.get(t)||{};i.path(n,e,s),this.set(t,n)},getAttr:function(t,e){var s=this.get(t)||{};return i.path(s,e)}})}),define("session.store",["store","session.storage"],function(require,t,e){var i=require("store"),s=require("session.storage");return i.extend({buildStorage:function(){return s}})}),define("session.storage",["storage"],function(require,t,e){var i=require("storage");return new i(sessionStorage)}),define("local.store",["store","local.storage"],function(require,t,e){var i=require("store"),s=require("local.storage");return i.extend({buildStorage:function(){return s}})}),define("local.storage",["storage"],function(require,t,e){var i=require("storage");return new i(localStorage)}),define("view",["base","event","scroll"],function(require,t,e){function i(){}function s(t){var e=(t||"").replace(/^\s+|\s+$/g,"").split(/\s+/);return{event:e.shift(),selector:e.join(" ")}}function n(){var t=this.events||{};r.each(t,function(t,e){var n=s(e),t=r.bind("function"==typeof t?t:this[t]||i,this);this.root.on(n.event,n.selector,t)},this)}var r=require("base"),o=require("event"),a=require("scroll"),h="viewroot-box",u="viewroot",c=o.extend({elastic:!0,propertys:function(t,e,i,s){this.root=$('<div class="'+h+'"><div class="'+u+'"></div></div>'),this.el=this.root.find("."+u),this.root.hide(),this.on("addframe",function(){this.scroll=new a({box:this.root[0],elastic:this.elastic,elasticX:!1})}),n.call(this),this.frame=i,this.app=s,this.name=t,this.hashdata=e,this.onCreate()},setHashData:function(t){this.hashdata=t},getRoot:function(){return this.root},turning:function(){this.frame.turning()},onCreate:function(){},onLoad:function(){},onShow:function(){},onHide:function(){},forward:function(){this.app.forward.apply(this.app,arguments)},replace:function(){this.app.replace.apply(this.app,arguments)},back:function(){this.app.back.apply(this.app,arguments)}});return c}),define("transition.interface",["object","funs"],function(require,t,e){var i=require("object"),s=require("funs"),n=i.extend({into:function(t,e,i){throw"Please implement 'into' method"},out:function(t,e,i){throw"Please implement 'out' method"},isAnimation:function(){throw"Please implement 'isAnimation' method"}}),r="webkitAnimation"in document.body.style?"webkitAnimationEnd":"animationend";return n.getTopIndexZ=s.createAddSelf(1e3),n.addTransitionEnd=function(t,e){t.on(r,e)},n.removeTransitionEnd=function(t,e){t.off(r,e)},n}),define("transition.default",["transition.interface"],function(require,t,e){var i=require("transition.interface"),s="default_forward_out",n="default_forward_in",r="default_back_out",o="default_back_in",a=i.extend({into:function(t,e,a,h){t.removeClass([s,n,r,o].join(" ")),e.removeClass([s,n,r,o].join(" ")),e.show(),t.show(),t.css("z-index",i.getTopIndexZ()),e.css("z-index",i.getTopIndexZ()),t.addClass(s),e.addClass(n),i.removeTransitionEnd(e),i.addTransitionEnd(e,function(){e.removeClass(n),a&&a.call(h),console.log("into_in")}),i.removeTransitionEnd(t),i.addTransitionEnd(t,function(){t.hide(),t.removeClass(s),console.log("into_out")})},out:function(t,e,a,h){t.removeClass([s,n,r,o].join(" ")),e.removeClass([s,n,r,o].join(" ")),e.show(),t.show(),t.addClass(r),e.addClass(o),e.css("z-index",i.getTopIndexZ()),t.css("z-index",i.getTopIndexZ()),i.removeTransitionEnd(e),i.addTransitionEnd(e,function(){e.removeClass(o),console.log("out_in")}),i.removeTransitionEnd(t),i.addTransitionEnd(t,function(){t.hide(),t.removeClass(r),a&&a.call(h),console.log("out_out")})},isAnimation:function(t){return t.hasClass([s,n,r,o].join(" "))}});return new a}),define("layout.updown",["layout"],function(require,t,e){var i=require("layout"),s="layout-head",n="layout-content",r=['<div class="layout-main">','<div class="'+s+'"></div>','<div class="'+n+'"></div>',"</div>"].join("");return i.extend({propertys:function(){this.root=$(r),this.header=this.root.find("."+s),this.content=this.root.find("."+n)},initialize:function($super,t){$super(t)},getRoot:function(){return this.root},getFrameBoxs:function(){return{header:this.header,content:this.content}}})}),define("layout",["event"],function(require,t,e){var i=require("event"),s=i.extend({propertys:function(){this.app},initialize:function($super,t){this.app=t,$super()},getRoot:function(){throw'no override method "getRoot"!'},getFrameBoxs:function(){throw'no override method "getContainers"!'}});return s}),define("layout.full",["layout"],function(require,t,e){var i=require("layout"),s='<div class="layout-main"></div>';return i.extend({propertys:function(){this.root=$(s)},initialize:function($super,t){$super(t)},getRoot:function(){return this.root},getFrameBoxs:function(){return{main:this.root}}})}),define("history",["object"],function(require,t,e){var i=require("object");return i.extend({propertys:function(){},initialize:function(){}})}),define("hash.observe",["event","url.hash"],function(require,t,e){var i=require("event"),s=require("url.hash"),n="hashchange";return i.extend({initialize:function($super){this.isObserve=!1,$super()},handleEvent:function(){var t=this.getCurHashData();this.emit(n,t)},add:function(t,e){return this.on(n,t,e),this},clear:function(){return this.off(n),this},trigger:function(){return this.handleEvent(),this},start:function(){return this.isObserve?this:(window.addEventListener("hashchange",this,!1),this.isObserve=!0,this)},end:function(){return window.removeEventListener("hashchange",this,!1),this.isObserve=!1,this},getCurHashData:function(){return new s(window.location.hash)}})}),define(function(require,t,e){var i=require("base/base"),s=require("base/event"),n=require("base/hash"),r=require("base/promise"),o=require("common/url.hash"),a=require("mvc/transition.default"),h="fly-frame-viewport",u='<div class="'+h+'"></div>',c=s.extend({propertys:function(){this.app,this.root=$(u),this.viewport=this.root,this.name,this.views=new n,this.hashdata={},this.viewpath="./src/views",this.framebox,this.defaultView="index",this.transtion=a,this.lastView,this.curView},initialize:function($super,t){$super(),this.setOption(t),this.initDom()},setOption:function(t){i.isNUL(t.app)||(this.app=t.app),i.isNUL(t.name)||(this.name=t.name),i.isNUL(t.viewpath)||(this.viewpath=t.viewpath),i.isNUL(t.framebox)||(this.framebox=t.framebox),i.isNUL(t.defaultView)||(this.defaultView=t.defaultView),i.isNUL(t.transtion)||(this.transtion=t.transtion)},getRoot:function(){return this.root},initDom:function(){this.framebox.append(this.root)},hashChange:function(t){t.view||(t=o.parse(this.defaultView)),this.hashdata=t,this.toView(t.view,t)},toView:function(t,e){var i=this;this.getView(t,e).then(function(t,e,s){i.lastView=i.curView||s,i.curView=s,s.onLoad()})},turning:function(){this.curView===this.lastView?(this.curView.getRoot().show(),this.curView.onShow()):this.transferView(this.lastView,this.curView,function(){this.lastView.onHide(),this.curView.onShow()})},getView:function(t,e){var i=this.views.get(t),s=new r;return i?(i.setHashData(e),s.resolve(i)):this.loadView(t,function(i){var n=new i(t,e,this,this.app);this.viewport.append(n.getRoot()),n.emit("addframe"),this.views.push(t,n),n.onCreate(),s.resolve(n)}),s},loadView:function(t,e){var i=this.buildFullPath(t),s=this;seajs.use([i],function(t){e.call(s,t)})},buildFullPath:function(t){return(this.viewpath+"/"+t).replace(/\/+/g,"/")+".js"},transferView:function(t,e,i){this.hashdata.forward?this.transtion.into(t.getRoot(),e.getRoot(),function(){i.call(this)},this):this.transtion.out(t.getRoot(),e.getRoot(),function(){i.call(this)},this)},forward:function(t){var e=o.parse(t);e.frame&&e.frame!==this.name||this.hashChange(e)},back:function(){}});return c}),define("application",["base","event","url.hash","hash.observe","frame","layout.full","log"],function(require,t,e){var i=require("base"),s=require("event"),n=require("url.hash"),r=require("hash.observe"),o=require("frame"),a=require("layout.full");Log=require("log");var h=s.extend({propertys:function(){this.state=h.STATE_STOP_HASH_OBSERVE,this.config,this.hashobserve=new r,this.layout,this.frames={},this.forwardId="~~~forward~~~",this.cfgframes={}},initialize:function(t){this.config=t,this.setOption(t),Log.log("application:initialize","application"),this.initLayout(),this.initFrame()},setOption:function(t){i.isNUL(t.layout)||(this.layout=t.layout),i.isNUL(t.frames)||(this.cfgframes=t.frames),i.isNUL(t.forwardId)||(this.forwardId=t.forwardId)},getConfig:function(){return this.config},initLayout:function(){this.layout||(this.layout=a()),$("body").prepend(this.layout.getRoot())},initFrame:function(){var t=this.hashobserve.getCurHashData(),e=t.frame||this.config.defaultFrame;i.each(this.cfgframes,function(i,s){var r=(this.layout.getFrameBoxs()||{})[i.framebox];r?(this.frames[s]=new o({app:this,name:s,viewpath:i.viewpath||this.config.viewpath,transtion:i.transtion,framebox:r,defaultView:i.defaultView||this.config.defaultView||"index"}),this.frames[s].hashChange(e===s?t:new n(""))):Log.err("framebox not found!","application")},this)},onHashChange:function(t,e){var i=t.frame||this.config.defaultFrame;t.forward=this.checkForward(t,e),this.frames[i]&&this.frames[i].hashChange(t)},checkForward:function(t,e){var i,s;return this.forwardId&&(i=t.ids.indexOf(this.forwardId))>-1?(e||(t.ids.splice(i,1),s="#"+t.buildUrl(),history.replaceState({},"",s)),!0):!1},startHashObserve:function(){this.state=h.STATE_LOADING_HASH_OBSERVE,this.hashobserve.add(this.onHashChange,this).start()},endHashObserve:function(){this.state=h.STATE_STOP_HASH_OBSERVE,this.hashobserve.clear()},start:function(){this.state===h.STATE_STOP_HASH_OBSERVE&&this.startHashObserve()},stop:function(){this.endHashObserve()},forward:function(t){location.hash=t+"|"+this.forwardId},replace:function(t){var e=t+"|"+this.forwardId,i=new n(e);this.onHashChange(i,!0)},back:function(t){t?location.replace(("#"+t).replace(/^#+/,"#")):history.back()}});return h.STATE_STOP_HASH_OBSERVE=0,h.STATE_LOADING_HASH_OBSERVE=1,h}),define("restful.model",["model"],function(require,t,e){var i=require("model");return i.extend({ajaxRequest:function(t,e,i,s){var n=this;return $.ajax({url:t,data:JSON.stringify(e),type:"post",contentType:"application/json",dataType:"json",success:function(t){i.call(n,t)},error:function(t){s.call(n,t)}})}})}),define("model",["base","event","store"],function(require,t,e){function i(){}var s=require("base"),n=require("event"),r=require("store"),o=0,a=1,h=2,u=n.extend({propertys:function(){this.baseurl=this.buildBaseUrl(),this.url=this.buildUrl(),this.param=this.buildParam(),this.result=this.buildResult(),this.state=o},initialize:function(){},buildBaseUrl:function(){throw"Please override the `buildBaseUrl` method"},buildUrl:function(){throw"Please override the `buildUrl` method"},buildParam:function(){throw"Please override the `buildParam` method"},buildResult:function(){throw"Please override the `buildResult` method"},ajaxRequest:function(){throw"Please override the `ajaxRequest` method"},verifyData:function(t){return!0},getParam:function(){return this.param instanceof r?this.param.get():this.param},setParam:function(t,e){return"object"===s.type(t)?void s.each(t,function(t,e){this.setParam(e,t)},this):void(this.param instanceof r?this.param.setAttr(t,e):(this.param||(this.param={}),this.param[t]=e))},delParam:function(t){return"array"===s.type(t)?void s.each(t,function(t){this.delParam(t)},this):void(this.param instanceof r?this.param.delAttr(t):(this.param||(this.param={}),delete this.param[k]))},getResult:function(){if(this.result instanceof r){var t=this.getParam(),e=t?JSON.stringify(t):null;return this.result.get(e)}return this.result},setResult:function(t){if(this.result instanceof r){var e=this.getParam(),i=e?JSON.stringify(e):null;this.result.set(t,i)}else this.result=t},clearEvents:function(){this.off("success"),this.off("error"),this.off("abort")},request:function(t,e){t=t||{};var s,n=t.success||i,r=t.error||i,u=t.abort||i;if(this.state===h){if(s=this.getResult())return void n.call(e||this,s);this.state=o}if(this.state==h||(this.on("success",n,e),this.on("error",r,e),this.on("abort",u,e),this.state!==a)){var c=this.baseurl.replace(/\/+$/g,"")+"/"+this.url.replace(/^\/+/g,""),l=this.getParam(),f=this;this.ajaxRequest(c,l,function(t){f.verifyData(t)?(f.setResult(t),f.emit("success",t),f.state=h):(f.emit("error",t),f.state=o),f.clearEvents()},function(t){f.emit("error",t),f.state=o,f.clearEvents()}),this.state=a}}});return u}),define("form.model",["model"],function(require,t,e){var i=require("model");return i.extend({propertys:function(){this.ajaxType="post"},ajaxRequest:function(t,e,i,s){var n=this;return $.ajax({url:t,data:e,type:this.ajaxType,dataType:"json",success:function(t){i.call(n,t)},error:function(t){s.call(n,t)}})}})}),define("url",["base","object"],function(require,t,e){var i=require("base"),s=require("object"),n=/^\s*(?:(^[a-z]+):)?(?:\/\/([^\/]+))?([^#?]*)(?:\?([^#]*))?(?:#(.*))?\s*$/im,r=/([^=&]*)=([^=&]*)/g,o=/^\s*\/|\/\s*$/i,a=s.extend({propertys:function(){this.protocol="",this.host="",this.path="",this.paths=[],this.search="",this.searchs={},this.hash=""},initialize:function(t){i.mix(this,a.parse(t))},buildUrl:function(){var t,e=[],s=this.data||{};return s.protocol&&(e.push(s.protocol),e.push(":")),s.home&&(e.push("//"),e.push(s.home)),s.paths&&(e.push("/"),e.push(s.paths.join("/"))),s.searchs&&(t=[],i.each(s.searchs,function(e,s){"array"===i.type(e)?i.each(e,function(e){t.push(s+"="+e)}):t.push(s+"="+e)}),t.length&&(e.push("?"),e.push(t.join("&")))),s.hash&&(e.push("#"),e.push(s.hash)),e.join("")},setProtocol:function(t){return this.protocol=t,this},setHost:function(t){return this.host=t,this},setPath:function(t){return this.path=t,this.paths=this.path.replace(o,"").split("/"),this},setPaths:function(t,e){return t=t||0,t>this.paths.length&&(t=this.paths.length),this.paths[t]=e,this},setSearch:function(t){this.search=t;var e=a.parse(t||"");return this.searchs=e.searchs,this},setHash:function(t){return this.hash=t,this}});return a.parse=function(t){var e=(t||"").match(n)||[],i={},s=[];return e[3]&&(s=e[3].replace(o,"").split("/")),e[4]&&e[4].replace(r,function(t,e,s){i[e]?("string"==typeof i[e]&&(i[e]=[i[e]]),i[e].push(s)):i[e]=s}),{protocol:e[1]||"",home:e[2]||"",path:e[3]||"",paths:s,search:e[4]||"",searchs:i,hash:e[5]||""}},a}),define("url.hash",["base","object"],function(require,t,e){function i(t){var e=[];return s.each(t,function(t,i){e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}),e.join("&")}var s=require("base"),n=require("object"),r=/^(?:([^:\/!?&=|]+):)?([^!?&|]+)?(?:!([^!?&|]+))?(?:\?((?:[^?=&|]+=[^?=&|]+(?:&[^?=&|]+=[^?=&|]+)*)?))?((?:\|[^|]+)*)?$/i,o=/([^=&]*)=([^=&]*)/g,a=n.extend({propertys:function(){this.frame="",this.view="",this.path=[],this.query={},this.ids=[],this.fullhash=""},initialize:function(t){var e=s.type(t);"object"===e?s.mix(this,t):"string"===e&&s.mix(this,a.parse(t))},setFrame:function(t){return t?(this.frame=t,this):this},getFrame:function(){return this.frame},setView:function(t){return t?(this.view=t,this):this},getView:function(){return this.view},setPath:function(t,e){return e?(0>t&&(t=0),t>this.path.length&&(t=this.path.length),this.path[t]=e,this):this},getPath:function(t){return this.path[t]},delPath:function(t){return 0>t||t>=this.path.length?this:(this.path.splice(t,1),this)},setQuery:function(t,e){return t&&e?(this.query[t]=e,this):this},getQuery:function(t){return t?this.query[t]:void 0},delQuery:function(t){return delete this.query[t],this},setId:function(t){return this.exsitId(t)||this.ids.push(t),this},delId:function(t){var e=this.ids.indexOf(t);return e>-1&&this.ids.splice(e,1),this},exsitId:function(t){return this.ids.indexOf(t)>-1},getFullHash:function(){return fullhash},buildUrl:function(){var t=[];return this.frame&&(t.push(this.frame),t.push(":")),this.view&&t.push(this.view),this.path&&this.path.length&&(t.push("!"),t.push(this.path.join("/"))),s.isEmpty(this.query)||(t.push("?"),t.push(i(this.query))),this.ids&&this.ids.length&&(t.push("|"),t.push(this.ids.join("|"))),t.join("")},clone:function(){var t=new a;return s.mix(t,this,!0)},toString:function(){return this.buildUrl()},valueOf:function(){return s.mix({},this)}});return a.parse=function(t){var e=(t||"").replace(/^#+/,"");return m=e.match(r)||[],frame=m[1],view=m[2],path=(m[3]||"").replace(/^\/+|\/+$/,""),paths=path?path.split("/"):[],query=m[4],querys=function(t){var e={};return t.replace(o,function(t,i,s){e[i]=s}),e}(query||""),id=(m[5]||"").replace(/^\|+|\|+$/,""),ids=id?id.split("|"):[],{frame:frame,view:view,path:paths,query:querys,ids:ids,fullhash:e}},a}),define("scroll",function(){function t(t){return null===t||void 0===t}function e(t,e,i){var s,n;if(b(t)){if(i){for(s=t.length-1,n=-1;s>n;s--)if(e(t[s],s))return}else for(s=0,n=t.length;n>s;s++)if(e(t[s],s))return}else for(s in t)if(t.hasOwnProperty(s)&&e(t[s],s))return}function i(t,e){var i=t.className.split(" ");i.indexOf(e)>-1||(i.push(e),t.className=i.join(" "))}function n(t,e){var i,s=t.className.split(" ");-1!==(i=s.indexOf(e))&&(s.splice(i,1),t.className=s.join(" "))}function r(t,e,i){return!i&&t.style[e]?t.style[e]:i?void(t.style[e]=i):(window.getComputedStyle(t)||{})[e]}function o(t,i){var s=document.createElement(t);return i=i||{},e(i,function(t,e){s.setAttribute(e,t)}),s}function a(t){return x+t}function h(t,e,i){r(t,a("transform"),"translate3d("+e+"px,"+i+"px,0px)")}function u(t){var e,i,s=r(t,a("transform"));return s&&"none"!=s?(e=s.match(_))?i={x:parseInt(e[1])||0,y:parseInt(e[2])||0,z:parseInt(e[3])||0}:(e=s.match(S))&&(i={x:parseInt(e[1])||0,y:(s.match(T)||{})[1]||0,z:0}):i={x:0,y:0,z:0},i}function c(t,e){var i=e,s=-e;return t>i?i:s>t?s:t}function l(t,e){return Math.max(Math.abs(t),Math.abs(e))}function f(t,e){for(var i=t.childNodes,s=i.length,n=0;s>n;n++)e.appendChild(i[0]);return t.appendChild(e),t}function d(t){this.box,this.scroll=!0,this.subbox,this.scrollbarX,this.scrollbarY,this.startDomX=0,this.startDomY=0,this.startMouseX=0,this.startMouseY=0,this.isMouseDown=!1,this.acceler=new E,this.elastic=!1,this.elasticX=!0,this.elasticY=!0,this.currentSid,this.events={},this.lastX=0,this.lastY=0,this.setOption(t),this.init()}var p=Array.prototype,v=(p.slice,Object.prototype.toString),m=function(t){var e,i=m.__cache=m.__cache||{},s=v.call(t);return i[s]?i[s]:(e=s.replace(/^\[\w+\s+(\w+)\]$/,"$1").toLowerCase(),i[s]=e)},b=function(t){return"array"===m(t)},y="ontouchend"in document,g=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},w=30,x=function(t){return"transform"in t?"":"-webkit-transform"in t?"-webkit-":"MozTransform"in t?"-moz-":"-o-transform"in t?"-o-":"-ms-transform"in t?"-ms-":null}(o("div").style),_=/translate3d\(\s*(-?[\d\.]+\w+)\s*,\s*(-?[\d\.]+\w+)\s*,\s*(-?[\d\.]+\w+)\s*\)/i,S=/translateX\(\s*(-?[\d\.]+\w+)\s*\)/i,T=/translateY\(\s*(-?[\d\.]+\w+)\s*\)/i,E=function(){function t(){this.list=[],this.lastX=0,this.lastY=0,this.state=t.STATE_STOP}return t.STATE_STOP=0,t.STATE_START=1,t.prototype={clear:function(){this.list=[]},add:function(t,e){this.endLoop(),this.lastX=t,this.lastY=e,this._add(t,e),this.startLoop()},_add:function(t,e){this.list.unshift({date:(new Date).valueOf(),x:t,y:e}),this.list.length>2&&this.list.splice(3)},startLoop:function(){var t=this;this.resource=setTimeout(function(){t._add(t.lastX,t.lastY),t.startLoop()},40)},endLoop:function(){clearTimeout(this.resource)},end:function(t,e){this._add(t,e),this.endLoop();var i=this.list.length;if(2>i)return{x:0,y:0};for(var n,r,o=0,i=this.list.length,t=0,e=0;i>o&&(n=this.list[o],r=this.list[o+1],n&&r);o++)s=1/(r.date-n.date||1),t+=s*(r.x-n.x),e+=s*(r.y-n.y);return t/=o||1,e/=o||1,{x:t,y:e}}},t}(),P=y?function(t){return t.changedTouches[0]}:function(t){return t},k=y?"touchstart":"mousedown",O=y?"touchmove":"mousemove",j=y?"touchend":"mouseup";return d.prototype={constructor:d,setOption:function(e){t(e.box)||(this.box=e.box),t(e.scroll)||(this.scroll=e.scroll),t(e.onscroll)||this.on("onscroll",e.onscroll),t(e.onscrollend)||this.on("onscrollend",e.onscrollend),t(e.elastic)||(this.elastic=e.elastic),t(e.elasticX)||(this.elasticX=e.elasticX),t(e.elasticY)||(this.elasticY=e.elasticY)},on:function(t,e){var i=this.events[t]=this.events[t]||[];-1===i.indexOf(e)&&i.push(e)},off:function(t,e){var i=this.events[t]=this.events[t]||[];if(!e)return void(i[t]=null);var s=i.indexOf(e);s>-1&&i.splice(s,1)},emit:function(t,e){for(var i=this.events[t]=this.events[t]||[],s=0,n=i.length;n>s;s++)i[s].call(this,e)},init:function(){if(!this.box)throw"Parameters 'box' are not found!";this.initDom(),this.initEvent(),this._startAutoCalcScrollSize()},initDom:function(){i(this.box,"silky-box");var t=r(this.box,"position");t&&"static"!==t||r(this.box,"position","relative"),this.subbox=o("div",{"class":"silky-subbox"}),this.scrollbarX=o("div",{"class":"silky-scrollbarx"}),this.scrollbarY=o("div",{"class":"silky-scrollbary"}),this.scroll||(r(this.scrollbarX,"display","none"),r(this.scrollbarX,"display","inline-block")),f(this.box,this.subbox),this.box.appendChild(this.scrollbarX),this.box.appendChild(this.scrollbarY),this._calcScrollBarSize()},initEvent:function(){this.box.addEventListener(k,this,!1),this.box.addEventListener(O,this,!1),this.box.addEventListener(j,this,!1),y&&this.box.addEventListener("touchcancel",this,!1)},handleEvent:function(t){var e,s,r,o,a,h=P(t);switch(t.type){case k:this._stopAutoCalcScrollSize(),n(this.subbox,"silky-letgo"),this.startMouseX=h.clientX,this.startMouseY=h.clientY,a=u(this.subbox),this.startDomX=a.x,this.startDomY=a.y,this.isMouseDown=!0,this.currentSid&&(this.currentSid.stop=!0),this.acceler.clear(),this.acceler.add(h.clientX,h.clientY);break;case O:if(!this.isMouseDown)return;e=h.clientX-this.startMouseX,s=h.clientY-this.startMouseY,r=this.startDomX+e,o=this.startDomY+s,a=spos=this._calcPos(r,o),this.elastic&&(a=this._calcOverflow(r,o,a.x,a.y),this.elasticX||(a.x=spos.x),this.elasticY||(a.y=spos.y)),this._calcScrollBarPos(a.x,a.y,a.dx,a.dy),this._setSubBoxPos(a.x,a.y),t.preventDefault(),this._calcScrollBarSize(a.dx,a.dy),this.acceler.add(h.clientX,h.clientY),this.emit("scroll",this.getPosition());break;case j:case"touchcancel":this.isMouseDown=!1,e=h.clientX-this.startMouseX,s=h.clientY-this.startMouseY,r=this.startDomX+e,o=this.startDomY+s,a=this._calcPos(r,o),this._calcScrollBarSize(),i(this.subbox,"silky-letgo"),this.currentSid={stop:!1},this._slowStart(this.acceler.end(h.clientX,h.clientY),{x:r-a.x,y:o-a.y}),this.emit("scroll",this.getPosition())}},_setSubBoxPos:function(t,e){this.lastX=parseInt(t),this.lastY=parseInt(e),h(this.subbox,this.lastX,this.lastY)},_calcPos:function(t,e){var i=this.subbox.clientWidth,s=this.subbox.clientHeight,n=this.box.clientWidth,r=this.box.clientHeight;i=n>i?n:i,s=r>s?r:s;var o=e>=0,a=r>=s+e,h=t>=0,u=n>=i+t;return o?e=0:a&&(e=-(s-r)),h?t=0:u&&(t=-(i-n)),{x:t,y:e}},_calcOverflow:function(t,e,i,s){var n=(t-i)/4,r=(e-s)/4;return{x:i+n,y:s+r,dx:n,dy:r}},_calcScrollBarSize:function(t,e){t=Math.abs(t||0),e=Math.abs(e||0);var i=this.box.clientWidth,s=this.subbox.clientWidth,n=this.box.clientHeight,o=this.subbox.clientHeight,a=i/(s+t),h=n/(o+e);a=a>1?1:a,h=h>1?1:h;var u=a*this.box.clientWidth,c=h*this.box.clientHeight;r(this.scrollbarX,"width",u+"px"),r(this.scrollbarY,"height",c+"px"),i>=s?r(this.scrollbarX,"display","none"):r(this.scrollbarX,"display","inline-block"),n>=o?r(this.scrollbarY,"display","none"):r(this.scrollbarY,"display","inline-block")},_calcScrollBarPos:function(t,e,i,s){i=Math.abs(i||0),s=Math.abs(s||0);var n=this.subbox.clientWidth+i,r=this.subbox.clientHeight+s,o=this.box.clientWidth,a=this.box.clientHeight;n=o>n?o:n,r=a>r?a:r;var u=-(t/(n-o)||0),c=-(e/(r-a)||0),s=c*(a-this.scrollbarY.clientHeight),i=u*(o-this.scrollbarX.clientWidth);s=Math.max(s,0),i=Math.max(i,0),h(this.scrollbarY,0,s),h(this.scrollbarX,i,0)},_reCalcScrollBarPos:function(){this._calcScrollBarPos(this.lastX||0,this.lastY||0)},_slowStart:function(t,e){var i=c(t.x,3)*w,s=c(t.y,3)*w,n=l(e.x,e.y),r=l(i,s),o=1.1-Math.min((Math.pow(n,2)+r)/1e4,10)/10,a=15*o;this._slowLoop(this.currentSid,90,90,i,s,a)},_slowLoop:function(t,e,i,s,n,r){var o=Math.sin(i/e*Math.PI/2),a=r,h=a-(e-i);0>h&&(h=0);var c=Math.sin(h/a*Math.PI/2),l=u(this.subbox),f=l.x+s,d=l.y+n,p=this._calcPos(f,d),v=0,m=0,b={},y=p.x,w=p.y;if(this.elastic&&(v=(f-p.x)*c,m=(d-p.y)*c,b=this._calcOverflow(f,d,p.x,p.y),this.elasticX&&(y=p.x+v),this.elasticY&&(w=p.y+m)),0>=i||t.stop||Math.max(Math.abs(s),Math.abs(n))<1&&(Math.max(Math.abs(v),Math.abs(m))<1||y===this._lastRealScrollX&&w===this._lastRealScrollY))return this.emit("scrollend",this.getPosition()),this._setSubBoxPos(p.x,p.y),void this._startAutoCalcScrollSize();this._lastRealScrollY=w,this._lastRealScrollX=y,this._setSubBoxPos(y,w),this._calcScrollBarPos(y,w),this._calcScrollBarSize(b.dx,b.dy),this.emit("scroll",this.getPosition());var x=this;g(function(){x._slowLoop(t,e,i-1,s*o,n*o,r)})},_startAutoCalcScrollSize:function(){var t=this;this.autoscrollsize=setTimeout(function(){t._calcScrollBarSize(),t._reCalcScrollBarPos(),t._startAutoCalcScrollSize()},1e3)},_stopAutoCalcScrollSize:function(){clearTimeout(this.autoscrollsize)},to:function(t,e){t=-t,e=-e;var i=this._calcPos(t,e);this._setSubBoxPos(i.x,i.y),this._calcScrollBarSize(),this._calcScrollBarPos(i.x,i.y)},getPosition:function(){var t=u(this.subbox);return{x:t.x?-t.x:t.x,y:t.y?-t.y:t.y}}},d}),define("funs",["base"],function(require,t,e){var i=(require("base"),{});return i.createAddSelf=function(t){return t=t||0,function(){return t++}},i}),define("var",function(){function t(t){if(t!==e){var s={del:function(){t=null},__proto__:i};return Object.defineProperty(s,"v",{get:function(){return t},set:function(e){t=e}}),s}}var e={},i=new t(e);return t}),define("promise",function(){function t(e){this.state=t.STATE_UNFULFILLED,this.resolveCallbacks=[],this.rejecteCallbacks=[],e&&setTimeout(function(){e(s(this.resolve,this),s(this.reject,this))},0)}var e=Array.prototype.slice,i=Array.prototype.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(t===this[e])return e;return-1},s=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}};return t.STATE_UNFULFILLED=0,t.STATE_RESOLVED=1,t.STATE_REJECTED=2,t.prototype={constructor:t,when:function(){var s=new t,n=e.call(arguments),r=[],o=this,a=function(e){if(o.state===t.STATE_UNFULFILLED){var a=i.call(n,this);a>-1&&(n.splice(a,1),r[a]=e),n.length||(s.resolve(r),o.state=t.STATE_RESOLVED)}},h=function(){if(o.state===t.STATE_UNFULFILLED){var e=i.call(n,this);e>-1&&n.splice(e,1),n.length||(s.reject(),o.state=t.STATE_REJECTED)}};if(n.length)for(var u=0,c=n.length;c>u;u++){if(!(n[u]instanceof t))throw"when() Parameter must be a type of Promise";n[u].then(a,h)}else setTimeout(function(){o.resolve()},0);return s},then:function(i,n){var r=new t,o=this;return i&&this.resolveCallbacks.push(function(){var t=[s(r.resolve,r),s(r.reject,r)].concat(e.call(arguments));i.apply(o,t)}),n&&this.rejecteCallbacks.push(function(){{var t=[s(r.reject,r)].concat(e.call(arguments));n.apply(o,t)}}),r},resolve:function(){var e=arguments;setTimeout($.proxy(function(){if(this.state===t.STATE_UNFULFILLED){for(var i=0,s=this.resolveCallbacks.length;s>i;i++)this.resolveCallbacks[i].apply(this,e);this.state=t.STATE_RESOLVED}},this),0)},reject:function(){var e=arguments;setTimeout($.proxy(function(){if(this.state===t.STATE_UNFULFILLED){for(var i=0,s=this.rejecteCallbacks.length;s>i;i++)this.rejecteCallbacks[i].apply(this,e);this.state=t.STATE_REJECTED}},this),0)}},t}),define("object_gulp-cmd_33",["class","var"],function(require,t,e){var i=require("class"),s=require("var"),n=i({destruct:function(){var t;for(var e in this)this.hasOwnProperty(e)&&(t=this[e],t instanceof s&&t.del(),this[e]=null)}});return n}),define("log",function(){function t(){return"boolean"==typeof __SINGE_DEBUG__&&__SINGE_DEBUG__===!0}return{log:function(e,i){t()&&(i||(i="default"),console.log(i+": "+e))},err:function(e,i){t()&&(i||(i="default"),console.error(i+": "+e))}}}),define("hash",["object","object"],function(require,t,e){var i=require("object"),s=require("object");return i.extend({propertys:function(){this.keys=[],this.values={}},initialize:function($super,t){$super(),t=t||[];for(var e=0,i=t.length;i>e;e++)this.push(t[e].key,t[e].value)},push:function(t,e){null!==t&&void 0!==t&&(this.values[t]&&this.del(t),this.keys.push(t),this.values[t]=e)},pop:function(){var t=this.keys.pop(),e=this.values[t];return t||e?(delete this.values[t],{key:t,value:e}):null},shift:function(){var t=this.keys.shift(),e=this.values[t];return t||e?(delete this.values[t],{key:t,value:e}):null},unshift:function(t,e){null!==t&&void 0!==t&&(this.values[t]&&this.del(t),this.keys.unshift(t),this.values[t]=e)},del:function(t){var e=this.keys.indexOf(t);if(-1===e)return null;var t,i;return t=this.keys.splice(e,1),i=this.values[t],delete this.values[t],{key:t,value:i}},get:function(t){return this.values[t]},splice:function(t,e,i){"boolean"===s.type(e)&&(e=null,i=e),t||(t=0);var n=Math.max(this.keys.length-1,0);keys=this.keys.slice(),rkeys=[],i?(t=n-t,keys.reverse(),rkeys=s.isNUL(e)?keys.splice(t):keys.splice(t,e)):rkeys=s.isNUL(e)?keys.splice(t):keys.splice(t,e);var r=[],o=this;return s.each(rkeys,function(t){var e=o.del(t);e&&r.push(e)}),i&&r.reverse(),r},slice:function(t,e){t||(t=0);Math.max(this.keys.length-1,0);keys=this.keys,rkeys=s.isNUL(e)?keys.slice(t):keys.slice(t,e);var i=[],n=this;return s.each(rkeys,function(t){var e=n.get(t);e&&i.push({key:t,value:e})}),i},toString:function(){return JSON.stringify(this.slice());

},valueOf:function(){return this.slice()}})}),define("event",["base","object","var"],function(require,t,e){var i=require("base"),s=require("object"),n=require("var"),r=s.extend({propertys:function(){this.__event=n({})},on:function(t,e,s,n){var r=this.__event;r.v[t]=r.v[t]||[],n&&-1!==i.indexOf(r.v[t],function(t){return e===t.fn})||r.v[t].push({fn:e,space:s})},off:function(t,e){if(!t&&!e)return this.__event.v.del(),void(this.__event=n({}));var i,s=this.__event;s.v[t]=s.v[t]||[],e?(i=ase.indexOf(s.v[t],function(t){return e===t.fn}),i>-1&&s.v[t].splice(i,1)):s.v[t]=[]},emit:function(t,e){var s=this.__event,n=this;s.v[t]=s.v[t]||[];var r=i.toArray(arguments);r.shift(),i.each(s.v[t],function(t){t.fn.apply(t.space||n,r)})}});return r}),define("class",["base"],function(require,t,e){"use strict";function i(){}function s(t,e){return t=t||i,e=e||i,function(){var i=[o.bind(t,this)].concat(o.toArray(arguments));return e.apply(this,i)}}function n(t){var e=function(){};return e.prototype=t.prototype,new e}function r(t,e){function o(){if(!(this instanceof o)){var t=n(o);return o.apply(t,arguments),t}this.propertys.apply(this,arguments),this.initialize.apply(this,arguments)}function c(){}"object"==typeof t&&(e=t,t=function(){});var l,f=t.prototype;c.prototype=t.prototype,o.prototype=new c;for(l in e)e.hasOwnProperty(l)&&u[l]!==h&&(o.prototype[l]="function"==typeof f[l]&&e[l].toString().match(a)?s(f[l],e[l]):e[l]);o.prototype.propertys=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}(o.prototype.propertys,e.propertys),o.prototype.initialize=e.initialize&&e.initialize.toString().match(a)?s(f.initialize,e.initialize):e.initialize||i,o.prototype.constructor=o;for(l in t)t.hasOwnProperty(l)&&"instance"!==l&&(o[l]=t[l]);return o.extend=function(t){return r(this,t)},o.addPropertys=function(t){var e=this.prototype;for(l in t)t.hasOwnProperty(l)&&u[l]!==h&&(e[l]="function"==typeof e[l]&&t[l].toString().match(a)?s(e[l],t[l]):t[l]);return this},o.getInstance=function(){return this.instance?this.instance:(this.instance={__proto__:this.prototype},this.apply(this.instance,arguments),this.instance)},o}var o=require("base"),a=/^\s*function[^\(\)]*\(\s*\$super/,h={},u={constrcutor:h,propertys:h,initialize:h};return r}),define("base_gulp-cmd_32",function(){"use strict";function t(t){var e=t.split("."),i=[];return n.each(e,function(t,e){var s;t.match(o)?(s=t.split("["),n.each(s,function(t,e){t&&i.push(t.replace(/[\]"']+/g,""))})):i.push(t)}),i}var e=Array.prototype,i=e.slice,s=Object.prototype.toString,n={};n.hasProp=function(t,e){return t.hasOwnProperty(e)};var r={};n.type=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var e=s.call(t);if(r[e])return r[e];var i=e.replace(/^\[object\s+|\]$/g,"").toLowerCase();return r[e]=i},n.each=function(t,e,i,s){var r,o,a=n.type(t);if("array"===a||"arguments"===a||t.length){if(s){for(r=t.length-1;r>-1;r--)if(e.call(i,t[r],r,t))return}else for(r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t))return}else for(r in t)if(n.hasProp(t,r)&&e.call(i,t[r],r,t))return},n.mix=function(t,e,s){var r=i.call(arguments),o=r.shift()||{},s=!0;return r.length&&"boolean"===n.type(r[r.length-1])&&(s=r.pop()),n.each(r,function(t){n.each(t,function(t,e){s?o[e]=t:o[e]||(o[e]=t)})}),o},n.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},n.toArray=function(t){try{return i.call(t)}catch(e){var s=[];return n.each(t,function(t){s.push(t)}),s}},n.indexOf=function(t,e){var i=-1,s=function(t){return t===e};return"function"==typeof e&&(s=e),n.each(t||[],function(t,e){return s(t)?(i=e,!0):void 0}),i},n.isEmpty=function(t){if(!t)return!0;var e=n.type(t);if("array"===e&&t.length)return!1;if("object"===e)for(var i in t)if(t.hasOwnProperty(i))return!1;return!0},n.isNUL=function(t){return null===t||void 0===t};var o=/\[[^\[\]]+\]/g;return n.path=function(e,i,s){var n=e;if(e&&i){var r,o,a=t(i),h=Math.max(a.length-1,0),u=0;if(void 0===s){for(;h>=u&&(o=a[u],r=e&&e[o],r);u++)e=r;return r}for(;h>=u;u++)o=a[u],h>u?e=e[o]=e[o]||{}:e[o]=s;return n}},n.delPath=function(e,i){if(e&&i){for(var s,n,r=t(i),o=Math.max(r.length-1,0),a=0;o>=a;a++)if(n=r[a],o>a){if(e=e&&e[n],!e)break}else s=e[n],delete e[n];return s}},n}),seajs.use(function(){}),define("main",["base/base","base/class","base/event"],function(){});