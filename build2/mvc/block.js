define("mvc/block.js",["base/base","common/funs","base/event","mvc/transition.header.notanimte"],function(require){function t(t){var e=(t||"").replace(/^\s+|\s+$/g,"").split(/\s+/);return{event:e.shift(),selector:e.join(" ")}}function e(e,i,s){e=e||{},n.each(e,function(e,o){var a=t(o),e=n.bind("function"==typeof e?e:noop,s||this);i.on(a.event,a.selector,e)},this)}var n=require("base/base"),i=require("common/funs"),s=require("base/event"),o=require("mvc/transition.header.notanimte"),a=(i.createAddSelf(1500),"cur-block-view"),r="block-view";return s.extend({propertys:function(){this.frame,this.box,this.forward=!1,this.views={},this.transition=null},getPreFix:function(){return"block"},initialize:function($super,t){$super(t),this.setOption(t)},setOption:function(t){t=t||{},n.isNUL(t.box)||(this.box=t.box),n.isNUL(t.frame)||(this.frame=t.frame)},to:function(t,n){n=n||{};var i=this.getPreFix()+t,s=this.box.find("#"+i);s.length||(s=$('<div class="'+r+'" id="'+i+'"></div>'),this.box.append(s)),n.cls&&s.addClass(n.cls);var c=n.notAnimte||!1;if(n.template){var f=n.data||{},l=_.template(n.template)(f);s.html(l),n.events&&(s.off(),e(n.events,s,n.space));var d=c||!this.transition?o:this.transition,h=s.siblings("."+a);h.length?this.forward?d.into(h,s,function(){h.removeClass(a),s.addClass(a)}):d.out(h,s,function(){h.removeClass(a),s.addClass(a)}):s.addClass(a)}},getRoot:function(){return this.box},setForward:function(t){this.forward=t}})});