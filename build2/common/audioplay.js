define("common/audioplay.js",["base/event"],function(require){function t(t,i,s,e){t.addEventListener(i,s,e)}var i=require("base/event"),s=i.extend({propertys:function(){this.status=s.STATUS_STOP,this.audio=document.createElement("audio")},initialize:function($super,t){$super(t),this._setOption(t),this._initEvents()},_setOption:function(t){t=t||{},t.src&&(this.src=t.src)},_initEvents:function(){var i=this.audio;t(i,"loadstart",this),t(i,"progress",this),t(i,"suspend",this),t(i,"abort",this),t(i,"error",this),t(i,"stalled",this),t(i,"play",this),t(i,"pause",this),t(i,"loadedmetadata",this),t(i,"loadeddata",this),t(i,"waiting",this),t(i,"playing",this),t(i,"canplay",this),t(i,"canplaythrough",this),t(i,"seeking",this),t(i,"seeked",this),t(i,"timeupdate",this),t(i,"ended",this),t(i,"ratechange",this),t(i,"durationchange",this),t(i,"volumechange",this)},handleEvent:function(t){switch(t.type){case"play":this.status=s.STATUS_PLAY;break;case"pause":this.status=s.STATUS_PAUSE;break;case"stalled":case"waiting":this.status=s.STATUS_LOADING;break;case"ended":case"abort":this.status=s.STATUS_STOP;break;case"error":this.status=s.STATUS_ERROR}this.emit(t.type,arguments),this.emit("all",arguments)},play:function(){this.audio.play()},pause:function(){this.audio.pause()},getStatus:function(){return this.status},setSrc:function(t){this.audio.src=t},getSrc:function(){return this.audio.src},getRealSrc:function(){return this.audio.getAttribute("src")},getLength:function(){return this.audio.duration},getCurPos:function(){return this.audio.currentTime},setTitle:function(t){return this.audio.title=t},getTitle:function(){return this.audio.title}});return s.STATUS_STOP="stop",s.STATUS_PLAY="play",s.STATUS_LOADING="loading",s.STATUS_PAUSE="pause",s.STATUS_ERROR="error",s});