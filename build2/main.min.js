define("app/base.js",[],function(e){var n,t="ttpodsmm",a="js_request",c="app.",o="service",r="params",u="ack",l="callback",i="error",f="cancel",s="confirm",p=function(){var e;return function(){if(e)return e;var n=document.getElementsByTagName("body");return e=n&&n[0]}}(),m=n=function(e){var n=document.createElement("iframe");n.src=e,n.style.display="none";var t=p();t&&(t.appendChild(n),setTimeout(function(){t.removeChild(n),n=null},500))},d=function(e){var n=0;return function(){return e+n++}}((new Date).valueOf()+~~(1e8*Math.random())),v=function(){function e(e,n,t){return{fn:e,space:n,onlyone:t}}function p(n,t,a,c,o){switch(a){case l:k[n]=e(t,c,o);break;case i:b[n]=e(t,c,o);break;case f:g[n]=e(t,c,o);break;case s:w[n]=e(t,c,o);break;default:return null}}function v(e){delete e.fn,delete e.space,delete e.onlyone}function y(e){k[e]&&v(k[e]),delete k[e],b[e]&&v(b[e]),delete b[e],g[e]&&v(g[e]),delete g[e],w[e]&&v(w[e]),delete w[e]}function h(e,n,m){var v=[];v.push(o+"="+e),n&&v.push(r+"="+encodeURIComponent($.param(n))),m=m||{};var h=d();"function"==typeof m.callback&&(p(h,m.callback,l,m.space,m.onlyone),v.push(l+"="+c+l)),"function"==typeof m.error&&(p(h,m.error,i,m.space,m.onlyone),v.push(i+"="+c+i)),"function"==typeof m.cancel&&(p(h,m.cancel,f,m.space,m.onlyone),v.push(f+"="+c+f)),p(h,function(){m.confirm&&m.confirm.call(this),clearTimeout(k)},s,m.space,m.onlyone),v.push(s+"="+c+s);var k=setTimeout(function(){m.timeoutfn&&m.timeoutfn.call(m.space),y(h)},1e3*(m.timeout||30));return v.push(u+"="+h),{url:t+"://"+a+"?"+v.join("&"),ack:h}}var k={},b={},g={},w={},T=function(e,n,t){var a=e[n];t=[].slice.call(t,1),a&&(a.fn.apply(a.space||this,t),a.onlyone&&(delete e[n],a.fn=a.space=null))},j={};return j[l]=function(e){T(k,e,arguments)},j[i]=function(e){T(b,e,arguments)},j[f]=function(e){T(g,e,arguments)},j[s]=function(e){T(w,e,arguments)},window.app=j,{setSendHandle:function(e){m=e?e:n},setProtocol:function(e){t=e},create:function(e,n,t){var a=d();return p(a,e,l,n,t),a},call:function(e,n){n=n||{};var t=h(e,n.params,n);return m(t.url),t.ack},del:function(e){y(e)}}}();return v});
define("base/base.js",[],function(r){"use strict";function n(r){var n=r.split("."),t=[];return u.each(n,function(r,n){var e;r.match(f)?(e=r.split("["),u.each(e,function(r,n){r&&t.push(r.replace(/[\]"']+/g,""))})):t.push(r)}),t}var t=Array.prototype,e=t.slice,i=Object.prototype.toString,u={};u.hasProp=function(r,n){return r.hasOwnProperty(n)};var a={};u.type=function(r){if(void 0===r)return"undefined";if(null===r)return"null";var n=i.call(r);if(a[n])return a[n];var t=n.replace(/^\[object\s+|\]$/g,"").toLowerCase();return a[n]=t},u.each=function(r,n,t,e){var i,a,f=u.type(r);if("array"===f||"arguments"===f||r.length){if(e){for(i=r.length-1;i>-1;i--)if(n.call(t,r[i],i,r))return}else for(i=0,a=r.length;a>i;i++)if(n.call(t,r[i],i,r))return}else for(i in r)if(u.hasProp(r,i)&&n.call(t,r[i],i,r))return},u.mix=function(r,n,t){var i=e.call(arguments),a=i.shift()||{},t=!0;return i.length&&"boolean"===u.type(i[i.length-1])&&(t=i.pop()),u.each(i,function(r){u.each(r,function(r,n){t?a[n]=r:a[n]||(a[n]=r)})}),a},u.bind=function(r,n){return r.bind?r.bind(n):function(){return r.apply(n,arguments)}},u.toArray=function(r){try{return e.call(r)}catch(n){var t=[];return u.each(r,function(r){t.push(r)}),t}},u.indexOf=function(r,n){var t=-1,e=function(r){return r===n};return"function"==typeof n&&(e=n),u.each(r||[],function(r,n){return e(r)?(t=n,!0):void 0}),t},u.isEmpty=function(r){if(!r)return!0;var n=u.type(r);if("array"===n&&r.length)return!1;if("object"===n)for(var t in r)if(r.hasOwnProperty(t))return!1;return!0},u.isNUL=function(r){return null===r||void 0===r};var f=/\[[^\[\]]+\]/g;return u.path=function(r,t,e){var i=r;if(r&&t){var u,a,f=n(t),o=Math.max(f.length-1,0),c=0;if(void 0===e){for(;o>=c&&(a=f[c],u=r&&r[a],u);c++)r=u;return u}for(;o>=c;c++)a=f[c],o>c?r=r[a]=r[a]||{}:r[a]=e;return i}},u.delPath=function(r,t){if(r&&t){for(var e,i,u=n(t),a=Math.max(u.length-1,0),f=0;a>=f;f++)if(i=u[f],a>f){if(r=r&&r[i],!r)break}else e=r[i],delete r[i];return e}},u});
define("base/class.js",["base/base"],function(t,n,i){"use strict";function r(){}function e(t,n){return t=t||r,n=n||r,function(){var i=[p.bind(t,this)].concat(p.toArray(arguments));return n.apply(this,i)}}function o(t){var n=function(){};return n.prototype=t.prototype,new n}function s(t,n){function i(){if(!(this instanceof i)){var t=o(i);return i.apply(t,arguments),t}this.propertys.apply(this,arguments),this.initialize.apply(this,arguments)}function p(){}"object"==typeof t&&(n=t,t=function(){});var y,f=t.prototype;p.prototype=t.prototype,i.prototype=new p;for(y in n)n.hasOwnProperty(y)&&c[y]!==u&&(i.prototype[y]=n[y]&&n[y].toString().match(a)?"function"==typeof f[y]?e(f[y],n[y]):e(function(){},n[y]):n[y]);i.prototype.propertys=function(t,n){return function(){t&&t.apply(this,arguments),n&&n.apply(this,arguments)}}(i.prototype.propertys,n.propertys),i.prototype.initialize=n.initialize&&n.initialize.toString().match(a)?e(f.initialize,n.initialize):n.initialize||r,i.prototype.constructor=i;for(y in t)t.hasOwnProperty(y)&&"instance"!==y&&(i[y]=t[y]);return i.extend=function(t){return s(this,t)},i.addPropertys=function(t){var n=this.prototype;for(y in t)t.hasOwnProperty(y)&&c[y]!==u&&(n[y]="function"==typeof n[y]&&t[y].toString().match(a)?e(n[y],t[y]):t[y]);return this},i.getInstance=function(){return this.instance?this.instance:(this.instance={__proto__:this.prototype},this.apply(this.instance,arguments),this.instance)},i.createLazyFun=function(){var t,n=this;return function(){return t?t:t=n.getInstance()}},i}var p=t("base/base"),a=/^\s*function[^\(\)]*\(\s*\$super/,u={},c={constrcutor:u,propertys:u,initialize:u};return s});
define("base/date.js",["base/class"],function(n){var e=n("base/class"),t=/[a-z]/gi,r=e({propertys:function(){this.date},initialize:function(n){r.parse(n||new Date)}}),u={d:function(n){var e=n.getDate();return 10>e?"0"+e:e},j:function(n){return n.getDate()},N:function(n){var e=n.getDay();return 0===e?7:e},w:function(n){return n.getDay()},m:function(n){var e=n.getMonth()+1;return 10>e?"0"+e:e},n:function(n){return n.getMonth()+1},Y:function(n){return n.getFullYear()},y:function(n){return String(n.getFullYear()).replace(/^\d{2}/,"")},g:function(n){var e=n.getHours();return e>12?e-12:e},G:function(n){return n.getHours()},h:function(n){var e=n.getHours();return e=e>12?e-12:e,10>e?"0"+e:e},H:function(n){var e=n.getHours();return 10>e?"0"+e:e},i:function(n){var e=n.getMinutes();return 10>e?"0"+e:e},I:function(n){var e=n.getMinutes();return e},s:function(n){var e=n.getSeconds();return 10>e?"0"+e:e},S:function(n){var e=n.getSeconds();return e},O:function(n){var e=new Date,t=r.diffDay(e,n),u={1:"昨天",0:"今天"};return u[t]||""}};r.format=function(n,e){return e.replace(t,function(e){return u[e]?u[e](n):e})},r.diffDay=function(n,e){n=new Date(n.valueOf()),e=new Date(e.valueOf()),n.setHours(0,0,0,1),e.setHours(0,0,0,1);var t=(n-e)/864e5;return t},r.parse=function(n){return new Date("number"==typeof n?n:Date.parse(n.replace(/-/g,"/")))};var a=864e5,i=36e5,o=6e4;return r.diffFormat=function(n,e){e=e||new Date;var t=e-n,r=parseInt(t/a),u=parseInt(t%a/i),f=parseInt(t%i/o);return{d:r,h:u,i:f}},r});
define("base/event.js",["base/base","base/object","base/var"],function(e,n,t){var i=e("base/base"),v=e("base/object"),s=e("base/var"),a=v.extend({propertys:function(){this.__event=s({})},initialize:function($super,e){$super(e)},on:function(e,n,t,v){var s=this.__event;s.v[e]=s.v[e]||[],v&&-1!==i.indexOf(s.v[e],function(e){return n===e.fn})||s.v[e].push({fn:n,space:t})},off:function(e,n){if(!e&&!n)return this.__event.v.del(),void(this.__event=s({}));var t,i=this.__event;i.v[e]=i.v[e]||[],n?(t=ase.indexOf(i.v[e],function(e){return n===e.fn}),t>-1&&i.v[e].splice(t,1)):i.v[e]=[]},emit:function(e){var n=this.__event,t=this;n.v[e]=n.v[e]||[];var v=i.toArray(arguments);v.shift(),i.each(n.v[e],function(e){e.fn.apply(e.space||t,v)})}});return a});
define("base/hash.js",["base/object","base/object"],function(e,s,t){var i=e("base/object"),n=e("base/object");return i.extend({propertys:function(){this.keys=[],this.values={}},initialize:function($super,e){$super(),e=e||[];for(var s=0,t=e.length;t>s;s++)this.push(e[s].key,e[s].value)},push:function(e,s){null!==e&&void 0!==e&&(this.values[e]&&this.del(e),this.keys.push(e),this.values[e]=s)},pop:function(){var e=this.keys.pop(),s=this.values[e];return e||s?(delete this.values[e],{key:e,value:s}):null},shift:function(){var e=this.keys.shift(),s=this.values[e];return e||s?(delete this.values[e],{key:e,value:s}):null},unshift:function(e,s){null!==e&&void 0!==e&&(this.values[e]&&this.del(e),this.keys.unshift(e),this.values[e]=s)},del:function(e){var s=this.keys.indexOf(e);if(-1===s)return null;var e,t;return e=this.keys.splice(s,1),t=this.values[e],delete this.values[e],{key:e,value:t}},get:function(e){return this.values[e]},splice:function(e,s,t){"boolean"===n.type(s)&&(s=null,t=s),e||(e=0);var i=Math.max(this.keys.length-1,0);keys=this.keys.slice(),rkeys=[],t?(e=i-e,keys.reverse(),rkeys=n.isNUL(s)?keys.splice(e):keys.splice(e,s)):rkeys=n.isNUL(s)?keys.splice(e):keys.splice(e,s);var u=[],l=this;return n.each(rkeys,function(e){var s=l.del(e);s&&u.push(s)}),t&&u.reverse(),u},slice:function(e,s){e||(e=0);Math.max(this.keys.length-1,0);keys=this.keys,rkeys=n.isNUL(s)?keys.slice(e):keys.slice(e,s);var t=[],i=this;return n.each(rkeys,function(e){var s=i.get(e);s&&t.push({key:e,value:s})}),t},toString:function(){return JSON.stringify(this.slice())},valueOf:function(){return this.slice()}})});
define("base/log.js",[],function(n){function e(){return"boolean"==typeof __SINGE_DEBUG__&&__SINGE_DEBUG__===!0}var o=function(){function n(){return e||(e=document.createElement("div"),document.body.appendChild(e),e.style.cssText="z-index:8000;color:#fff;position:absolute;left:0px;bottom:0px;width:100%;height:6em;line-height:1.5em;font-size:12px;background:rgba(0,0,0,0.8);overflow:auto;-webkit-overflow-scrolling:touch;"),e}var e;return{hide:function(){e&&(document.body.removeChild(e),e=null)},write:function(o,t){n(),t&&(o='<span style="color:#f22">'+o+"</span>"),e.innerHTML=o+"<br />"+e.innerHTML}}}(),t={log:function(n,t){e()&&(t||(t="default"),o.write(t+": "+n))},err:function(n,t){e()&&(t||(t="default"),o.write(t+": "+n,!0))}},r=window.onerror;return window.onerror=function(n){t.err(String(n)),"function"==typeof r&&r.apply(this,arguments)},t});
define("base/object.js",["base/class","base/var"],function(s,a,e){var i=s("base/class"),n=s("base/var"),t=i({initialize:function($super,s){$super(s)},destruct:function(){var s;for(var a in this)this.hasOwnProperty(a)&&(s=this[a],s instanceof n&&s.del(),this[a]=null)}});return t});
define("base/promise.js",[],function(t){function e(t){this.state=e.STATE_UNFULFILLED,this.resolveCallbacks=[],this.rejecteCallbacks=[],t&&setTimeout(function(){t(n(this.resolve,this),n(this.reject,this))},0)}var s=Array.prototype.slice,r=Array.prototype.indexOf||function(t){for(var e=0,s=this.length;s>e;e++)if(t===this[e])return e;return-1},n=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}};return e.STATE_UNFULFILLED=0,e.STATE_RESOLVED=1,e.STATE_REJECTED=2,e.prototype={constructor:e,when:function(){var t=new e,n=s.call(arguments),i=[],a=this,l=function(s){if(a.state===e.STATE_UNFULFILLED){var l=r.call(n,this);l>-1&&(n.splice(l,1),i[l]=s),n.length||(t.resolve(i),a.state=e.STATE_RESOLVED)}},o=function(){if(a.state===e.STATE_UNFULFILLED){var s=r.call(n,this);s>-1&&n.splice(s,1),n.length||(t.reject(),a.state=e.STATE_REJECTED)}};if(n.length)for(var c=0,h=n.length;h>c;c++){if(!(n[c]instanceof e))throw"when() Parameter must be a type of Promise";n[c].then(l,o)}else setTimeout(function(){a.resolve()},0);return t},then:function(t,r){var i=new e,a=this;return t&&this.resolveCallbacks.push(function(){var e=[n(i.resolve,i),n(i.reject,i)].concat(s.call(arguments));t.apply(a,e)}),r&&this.rejecteCallbacks.push(function(){{var t=[n(i.reject,i)].concat(s.call(arguments));r.apply(a,t)}}),i},resolve:function(){var t=arguments;setTimeout($.proxy(function(){if(this.state===e.STATE_UNFULFILLED){for(var s=0,r=this.resolveCallbacks.length;r>s;s++)this.resolveCallbacks[s].apply(this,t);this.state=e.STATE_RESOLVED}},this),0)},reject:function(){var t=arguments;setTimeout($.proxy(function(){if(this.state===e.STATE_UNFULFILLED){for(var s=0,r=this.rejecteCallbacks.length;r>s;s++)this.rejecteCallbacks[s].apply(this,t);this.state=e.STATE_REJECTED}},this),0)}},e});
define("base/var.js",[],function(n){function e(n){if(n!==t){var e={del:function(){n=null},__proto__:r};return Object.defineProperty(e,"v",{get:function(){return n},set:function(e){n=e}}),e}}var t={},r=new e(t);return e});
define("common/funs.js",["base/base"],function(n,e,r){var t=n("base/base"),u={};return u.createAddSelf=function(n){return n=n||0,function(){return n++}},u.createSingle=function(n){var e;return function(r){return e?e:e=new n(r)}},u.createDOM=function(n){return function(e){return n.append(e),n.children()}}($("<div></div>")),u.formatString=function(n,e,r,u,i){u||(u="{"),i||(i="}"),e=e||{},u="\\"+u.split("").join("\\"),i="\\"+i.split("").join("\\");var a=new RegExp(u+"([^"+u+i+"]*)"+i,"img");return n.replace(a,function(n,u){return t.isNUL(e[u])?"0":(r&&r(u),e[u])})},u.createLazyValue=function(n,e){var r=null;return function(){return null!=r?r:r=n.apply(e,arguments)}},u});
define("common/url.hash.js",["base/base","base/object"],function(t,i,e){function s(t){var i=[];return h.each(t,function(t,e){i.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),i.join("&")}var h=t("base/base"),n=t("base/object"),r=/^(?:([^:\/!?&=|]+):)?([^!?&|]+)?(?:!([^!?&|]+))?(?:\?((?:[^?=&|]+=[^?=&|]*(?:&[^?=&|]+=[^?=&|]*)*)?))?((?:\|[^|]+)*)?$/i,u=/([^=&]*)=([^=&]*)/g,a=n.extend({propertys:function(){this.frame="",this.view="",this.path=[],this.query={},this.ids=[],this.fullhash=""},initialize:function(t){var i=h.type(t);"object"===i?h.mix(this,t):"string"===i&&h.mix(this,a.parse(t))},setFrame:function(t){return t?(this.frame=t,this):this},getFrame:function(){return this.frame},setView:function(t){return t?(this.view=t,this):this},getView:function(){return this.view},setPath:function(t,i){return i?(0>t&&(t=0),t>this.path.length&&(t=this.path.length),this.path[t]=i,this):this},getPath:function(t){return this.path[t]},delPath:function(t){return 0>t||t>=this.path.length?this:(this.path.splice(t,1),this)},setQuery:function(t,i){return t&&i?(this.query[t]=i,this):this},getQuery:function(t){return t?this.query[t]:void 0},delQuery:function(t){return delete this.query[t],this},setId:function(t){return this.exsitId(t)||this.ids.push(t),this},delId:function(t){var i=this.ids.indexOf(t);return i>-1&&this.ids.splice(i,1),this},exsitId:function(t){return this.ids.indexOf(t)>-1},getFullHash:function(){return fullhash},buildUrl:function(){var t=[];return this.frame&&(t.push(this.frame),t.push(":")),this.view&&t.push(this.view),this.path&&this.path.length&&(t.push("!"),t.push(this.path.join("/"))),h.isEmpty(this.query)||(t.push("?"),t.push(s(this.query))),this.ids&&this.ids.length&&(t.push("|"),t.push(this.ids.join("|"))),t.join("")},clone:function(){var t=new a;return h.mix(t,this,!0)},toString:function(){return this.buildUrl()},valueOf:function(){return h.mix({},this)}});return a.parse=function(t){var i=(t||"").replace(/^#+/,"");return m=i.match(r)||[],frame=m[1],view=m[2],path=(m[3]||"").replace(/^\/+|\/+$/,""),paths=path?path.split("/"):[],query=m[4],querys=function(t){var i={};return t.replace(u,function(t,e,s){i[e]=s}),i}(query||""),id=(m[5]||"").replace(/^\|+|\|+$/,""),ids=id?id.split("|"):[],{frame:frame,view:view,path:paths,query:querys,ids:ids,fullhash:i}},a});
define("common/url.js",["base/base","base/object"],function(s,t,h){var e=s("base/base"),a=s("base/object"),i=/^\s*(?:(^[a-z]+):)?(?:\/\/([^\/]+))?([^#?]*)(?:\?([^#]*))?(?:#(.*))?\s*$/im,r=/([^=&]*)=([^=&]*)/g,n=/^\s*\/|\/\s*$/i,o=a.extend({propertys:function(){this.protocol="",this.host="",this.path="",this.paths=[],this.search="",this.searchs={},this.hash=""},initialize:function(s){e.mix(this,o.parse(s))},buildUrl:function(){var s,t=[],h=this.data||{};return h.protocol&&(t.push(h.protocol),t.push(":")),h.home&&(t.push("//"),t.push(h.home)),h.paths&&(t.push("/"),t.push(h.paths.join("/"))),h.searchs&&(s=[],e.each(h.searchs,function(t,h){"array"===e.type(t)?e.each(t,function(t){s.push(h+"="+t)}):s.push(h+"="+t)}),s.length&&(t.push("?"),t.push(s.join("&")))),h.hash&&(t.push("#"),t.push(h.hash)),t.join("")},setProtocol:function(s){return this.protocol=s,this},setHost:function(s){return this.host=s,this},setPath:function(s){return this.path=s,this.paths=this.path.replace(n,"").split("/"),this},setPaths:function(s,t){return s=s||0,s>this.paths.length&&(s=this.paths.length),this.paths[s]=t,this},setSearch:function(s){this.search=s;var t=o.parse(s||"");return this.searchs=t.searchs,this},setHash:function(s){return this.hash=s,this}});return o.parse=function(s){var t=(s||"").match(i)||[],h={},e=[];return t[3]&&(e=t[3].replace(n,"").split("/")),t[4]&&t[4].replace(r,function(s,t,e){h[t]?("string"==typeof h[t]&&(h[t]=[h[t]]),h[t].push(e)):h[t]=e}),{protocol:t[1]||"",home:t[2]||"",path:t[3]||"",paths:e,search:t[4]||"",searchs:h,hash:t[5]||""}},o});
define("model/form.model.js",["model/model"],function(e,t,a){var n=e("model/model");return n.extend({propertys:function(){this.dataType="json"},ajaxRequest:function(e,t,a,n,o){var r=this;return $.ajax({url:t,data:a,type:e,dataType:this.dataType,success:function(e){n.apply(r,arguments)},error:function(e){o.apply(r,arguments)}})}})});
define("model/model.js",["base/base","base/event","common/funs","storage/store"],function(t,e,s){function i(){}function r(t,e,s,i){if(!t.v){var a=this,o=function(){setTimeout(function(){t.v||r.call(a,t,e,s,i)},1e3*e)};this.request({success:function(){s.success&&s.success.apply(this,arguments)},error:function(){s.error&&s.error.apply(this,arguments)},abort:function(){s.abort&&s.abort.apply(this,arguments)},complete:function(){s.complete&&s.complete.apply(this,arguments),o()}},i)}}var a=t("base/base"),o=t("base/event"),h=t("common/funs"),n=t("storage/store"),u=0,c=1,l=2,f=function(){this.off("success"),this.off("error"),this.off("abort"),this.off("complete")},p=/\{[^\{\}]*\}/,m=o.extend({propertys:function(){this._xhr,this.type="post",this.getfields=[],this.pathfields=[],this.param=this.buildParam(),this.result=this.buildResult(),this.state=u},initialize:function(){},setType:function(t){this.type=t},fieldsGet:function(){return[]},buildBaseUrl:function(){throw"Please override the `buildBaseUrl` method"},buildUrl:function(){throw"Please override the `buildUrl` method"},buildParam:function(){throw"Please override the `buildParam` method"},buildResult:function(){throw"Please override the `buildResult` method"},ajaxRequest:function(){throw"Please override the `ajaxRequest(type,url)` method"},verifyData:function(t){return!0},getParam:function(t){return this.param instanceof n?t?this.param.getAttr(t):this.param.get():JSON.parse(JSON.stringify(this.param))},setParam:function(t,e){return"object"===a.type(t)?void a.each(t,function(t,e){this.setParam(e,t)},this):void(this.param instanceof n?this.param.setAttr(t,e):(this.param||(this.param={}),this.param[t]=e))},delParam:function(t){return"array"===a.type(t)?void a.each(t,function(t){this.delParam(t)},this):void(this.param instanceof n?this.param.delAttr(t):(this.param||(this.param={}),delete this.param[k]))},getResult:function(){if(this.result instanceof n){var t=this.getParam(),e=t?JSON.stringify(t):null;return this.result.get(e)}return this.result},setResult:function(t){if(this.result instanceof n){var e=this.getParam(),s=e?JSON.stringify(e):null;this.result.set(t,s)}},request:function(t,e){t=t||{};var s,r=t.success||i,o=t.error||i,n=t.abort||i,m=t.complete||i;if(this.state===l){if(s=this.getResult())return void r.call(e||this,s);this.state=u}if(this.state==l||(this.on("success",r,e),this.on("error",o,e),this.on("abort",n,e),this.on("complete",m,e),this.state!==c)){this.baseurl=this.buildBaseUrl(),this.url=this.buildUrl();var d=this.baseurl.replace(/\/+$/g,"")+"/"+this.url.replace(/^\/+/g,""),b=this.getParam()||{},v=this,x=[];if(this.type&&!this.type.match(/get/i)){var g=d.indexOf("?")>-1?"&":"?",y=function(t,e){var s=[];return"*"===t?a.each(e,function(t,e){s.push(e+"="+t)}):a.each(t,function(t){e[t]&&s.push(t+"="+e[t])}),s.join("&")}(this.fieldsGet(),b);y&&(d=(d+g+y).replace(/\?{2,}/i,"?").replace(/\?&+/i,"?"))}d.match(p)&&(d=h.formatString(d,b||{},function(t){x.push(t)}),a.each(x,function(t){delete b[t]})),this.isAbort=!1,this.state=c;var _=this;return this._xhr=this.ajaxRequest(this.type,d,b,function(t){v.verifyData(t)?(v.setResult(t),v.emit("success",t,_._xhr.status,_._xhr),v.state=l):(v.emit("error",t,_._xhr.status,_._xhr),v.state=u),v.emit("complete",_._xhr.status,_._xhr),f.call(v),this.isAbort=!1},function(t){this.isAbort?v.emit("abort",t,_._xhr.status,_._xhr):v.emit("error",t,_._xhr.status,_._xhr),v.emit("complete",_._xhr.status,_._xhr),v.state=u,f.call(v),this.isAbort=!1}),this._xhr}},abort:function(){this._xhr&&(this.isAbort=!0,this._xhr.abort())},isLoopStop:{v:!1},loopRequest:function(t,e,s){"object"==typeof t&&(s=e,e=t,t=5),this.isLoopStop.v=!0,this.isLoopStop={v:!1},r.call(this,this.isLoopStop,t,e,s)},endLoopRequest:function(){this.isLoopStop.v=!0,this._xhr&&this._xhr.abort()}});return m});
define("model/restful.model.js",["model/model"],function(e,n,t){var a=e("model/model");return a.extend({ajaxRequest:function(e,n,t,a,o){var r=this;return $.ajax({url:n,data:JSON.stringify(t),type:e||"post",contentType:"application/json",dataType:"json",success:function(e){a.apply(r,arguments)},error:function(e){o.apply(r,arguments)}})}})});
define("mvc/application.js",["base/base","base/event","common/url.hash","mvc/hash.observe","mvc/frame","mvc/layout.full","base/log"],function(t,a,i){var e=t("base/base"),s=t("base/event"),r=t("common/url.hash"),o=t("mvc/hash.observe"),h=t("mvc/frame"),n=t("mvc/layout.full");Log=t("base/log");var f=s.extend({propertys:function(){this.state=f.STATE_STOP_HASH_OBSERVE,this.config,this.hashobserve=new o,this.layout,this.frames={},this.forwardId="~~~forward~~~",this.cfgframes={}},initialize:function(t){this.config=t,this.setOption(t),Log.log("application:initialize","application"),this.initLayout(),this.initFrame()},setOption:function(t){e.isNUL(t.layout)||(this.layout=t.layout),e.isNUL(t.frames)||(this.cfgframes=t.frames),e.isNUL(t.forwardId)||(this.forwardId=t.forwardId)},getConfig:function(){return this.config},initLayout:function(){this.layout||(this.layout=n()),$("body").prepend(this.layout.getRoot())},initFrame:function(){var t=this.hashobserve.getCurHashData(),a=t.frame||this.config.defaultFrame;e.each(this.cfgframes,function(i,e){var s=(this.layout.getFrameBoxs()||{})[i.framebox];s?(this.frames[e]=new h({app:this,name:e,viewpath:i.viewpath||this.config.viewpath,transtion:i.transtion,framebox:s,defaultView:i.defaultView||this.config.defaultView||"index"}),this.frames[e].hashChange(a===e?t:new r(""))):Log.err("framebox not found!","application")},this)},onHashChange:function(t,a){var i=t.frame||this.config.defaultFrame;if(t.forward=this.checkForward(t),a){var e="#"+t.buildUrl();history.replaceState({},"",e)}this.frames[i]&&this.frames[i].hashChange(t)},checkForward:function(t){var a,i;return this.forwardId&&(a=t.ids.indexOf(this.forwardId))>-1?(t.ids.splice(a,1),i="#"+t.buildUrl(),history.replaceState({},"",i),!0):!1},startHashObserve:function(){this.state=f.STATE_LOADING_HASH_OBSERVE,this.hashobserve.add(this.onHashChange,this).start()},endHashObserve:function(){this.state=f.STATE_STOP_HASH_OBSERVE,this.hashobserve.clear()},start:function(){this.state===f.STATE_STOP_HASH_OBSERVE&&this.startHashObserve()},stop:function(){this.endHashObserve()},forward:function(t){location.hash=t+"|"+this.forwardId},replace:function(t){var a=t+"|"+this.forwardId;location.replace("#"+a)},back:function(t){t?location.replace(("#"+t).replace(/^#+/,"#")):history.back()}});return f.STATE_STOP_HASH_OBSERVE=0,f.STATE_LOADING_HASH_OBSERVE=1,f});
define("mvc/block.js",["base/base","common/funs","base/event","mvc/transition.header.notanimte"],function(t){function e(t){var e=(t||"").replace(/^\s+|\s+$/g,"").split(/\s+/);return{event:e.shift(),selector:e.join(" ")}}function n(t,n,s){t=t||{},i.each(t,function(t,o){var a=e(o),t=i.bind("function"==typeof t?t:noop,s||this);n.on(a.event,a.selector,t)},this)}var i=t("base/base"),s=t("common/funs"),o=t("base/event"),a=t("mvc/transition.header.notanimte"),r=(s.createAddSelf(1500),"cur-block-view"),c="block-view";return o.extend({propertys:function(){this.frame,this.box,this.forward=!1,this.views={},this.transition=null},getPreFix:function(){return"block"},initialize:function($super,t){$super(t),this.setOption(t)},setOption:function(t){t=t||{},i.isNUL(t.box)||(this.box=t.box),i.isNUL(t.frame)||(this.frame=t.frame)},to:function(t,e){e=e||{};var i=this.getPreFix()+t,s=this.box.find("#"+i);s.length||(s=$('<div class="'+c+'" id="'+i+'"></div>'),this.box.append(s)),e.cls&&s.addClass(e.cls);var o=e.notAnimte||!1;if(e.template){var f=e.data||{},l=_.template(e.template)(f);s.html(l),e.events&&(s.off(),n(e.events,s,e.space));var d=o||!this.transition?a:this.transition,h=s.siblings("."+r);h.length?this.forward?d.into(h,s,function(){h.removeClass(r),s.addClass(r)}):d.out(h,s,function(){h.removeClass(r),s.addClass(r)}):s.addClass(r)}},getRoot:function(){return this.box},setForward:function(t){this.forward=t}})});
define("mvc/frame.js",["base/base","base/event","base/hash","base/promise","common/funs","common/url.hash","mvc/header","mvc/transition.default","mvc/transition.notanime","ui/dialog","ui/toast","ui/loading"],function(t,i,e){var s=t("base/base"),a=t("base/event"),n=t("base/hash"),o=t("base/promise"),h=t("common/funs"),r=t("common/url.hash"),w=t("mvc/header"),d=t("mvc/transition.default"),u=t("mvc/transition.notanime"),f=t("ui/dialog"),c=t("ui/toast"),l=t("ui/loading"),m="single-frame-box",v="single-frame-head",V="single-frame-viewport",p="single-frame-foot",g=['<div class="'+m+'">','<div class="'+v+'"></div>','<div class="'+V+'">',"</div>",'<div class="'+p+'"></div>',"</div>"].join(""),b=h.createSingle(c),L=h.createSingle(f),x=h.createSingle(l),S=a.extend({propertys:function(){this.app,this.root=$(g),this.viewhead=this.root.find("."+v),this.viewport=this.root.find("."+V),this.viewfoot=this.root.find("."+p),this.header=new w({box:this.viewhead,frame:this}),this.name,this.views=new n,this.hashdata={},this.viewpath="./src/views",this.framebox,this.defaultView="index",this.transtions={"default":d,notanimte:u},this.defaultTranstion="default",this.lastView,this.curView},initialize:function($super,t){$super(),this.setOption(t),this.initDom()},setOption:function(t){s.isNUL(t.app)||(this.app=t.app),s.isNUL(t.name)||(this.name=t.name),s.isNUL(t.viewpath)||(this.viewpath=t.viewpath),s.isNUL(t.framebox)||(this.framebox=t.framebox),s.isNUL(t.defaultView)||(this.defaultView=t.defaultView),s.isNUL(t.transtions)||s.mix(this.transtions,t.transtions),s.isNUL(t.defaultTranstion)||(this.defaultTranstion=t.defaultTranstion)},getRoot:function(){return this.root},initDom:function(){this.framebox.append(this.root)},hashChange:function(t){t.view||(t=new r(this.defaultView)),this.hashdata=t,this.header.setForward(this.hashdata.forward),this.toView(t.view,t)},toView:function(t,i){var e=this;this.getView(t,i).then(function(t,i,s){e.lastView=e.curView||s,e.curView=s,s.emit("onLoadBefore",e.lastView.hashdata.view),s.onLoad(e.lastView.hashdata.view),s.emit("onLoadAfter",e.lastView.hashdata.view)})},turning:function(t){var i=this.lastView||this.curView;this.curView===this.lastView?(this.curView.getRoot().show(),this.curView.emit("onShowBefore",i.hashdata.view),this.curView.onShow(i.hashdata.view),this.curView.emit("onShowAfter",i.hashdata.view)):this.transferView(t,this.lastView,this.curView,function(){this.lastView.emit("onHideBefore"),this.lastView.onHide(),this.lastView.emit("onHideAfter"),this.curView.emit("onShowBefore",i.hashdata.view),this.curView.onShow(i.hashdata.view),this.curView.emit("onShowAfter",i.hashdata.view)})},getView:function(t,i){var e=this.views.get(t),s=new o;return e?(e.setHashData(i),s.resolve(e)):this.loadView(t,function(e){if(!e)throw new Error("not found `"+t+".js`");var a=new e(t,i,this,this.app);this.viewport.append(a.getRoot()),a.emit("addframe"),this.views.push(t,a),a.onCreate(),s.resolve(a)}),s},loadView:function(t,i){var e=this.buildFullPath(t),s=this;seajs.use([e],function(t){i.call(s,t)})},getCurrentView:function(){return this.curView||this.lastView},buildFullPath:function(t){return(this.viewpath+"/"+t).replace(/\/+/g,"/")+".js"},transferView:function(t,i,e,s){t=t||this.defaultTranstion;var a=this.transtions[t]||d;this.hashdata.forward?a.into(i.getRoot(),e.getRoot(),function(){s.call(this)},this):a.out(i.getRoot(),e.getRoot(),function(){s.call(this)},this)},forward:function(t){var i=r.parse(t);i.frame&&i.frame!==this.name||this.hashChange(i)},back:function(){history.back()},toHead:function(t,i){this.header.to(t,i)},showToast:function(t,i,e){b().show({content:t,timeout:i,callback:e})},hideToast:function(){b().hide()},showAlert:function(t,i,e,s){L().show({title:e||"标题",content:t||"",buttons:i,hideTitle:!s})},hideAlert:function(){L().hide()},showLoading:function(t){x().show({maskOpacity:t})},hideLoading:function(){x().hide()},showHeader:function(){this.header.show()},hideHeader:function(){this.header.hide()}});return S});
define("mvc/hash.observe.js",["base/event","common/url.hash"],function(t,e,n){var i=t("base/event"),s=t("common/url.hash"),h="hashchange";return i.extend({initialize:function($super){this.isObserve=!1,$super()},handleEvent:function(){var t=this.getCurHashData();this.emit(h,t)},add:function(t,e){return this.on(h,t,e),this},clear:function(){return this.off(h),this},trigger:function(){return this.handleEvent(),this},start:function(){return this.isObserve?this:(window.addEventListener("hashchange",this,!1),this.isObserve=!0,this)},end:function(){return window.removeEventListener("hashchange",this,!1),this.isObserve=!1,this},getCurHashData:function(){return new s(window.location.hash)}})});
define("mvc/header.js",["mvc/block","mvc/transition.header"],function(t){var i=t("mvc/block"),e=t("mvc/transition.header"),n="single-header-hide";return i.extend({propertys:function(){this.transition=e},initialize:function($super,t){$super(t)},setHeight:function(t){view&&(view.root.css("padding-top",t+"px"),this.box.height(t))},getHeight:function(){return this.box.height()},hide:function(){this.box.hide(),this.frame.getRoot().addClass(n)},show:function(){this.box.show(),this.frame.getRoot().removeClass(n)}})});
define("mvc/history.js",["base/base","base/object"],function(t,e,r){function i(t,e,r){var i=t.url||"",e=_.extend(_.clone(t.params||{}),e||{});if(i=i.replace(a,function(t,r){return e[r]?e[r]:""}),t.querys){var n=$.param(_.extend(_.clone(t.querys||{}),r||{}));n&&(i+=i.indexOf("?")>-1?"&"+n:"?"+n)}return i}var n=t("base/base"),o=t("base/object"),s=o.extend({propertys:function(){this.store},initialize:function($super,t){$super(),this.store=t},forward:function(t,e,r){this.store.setAttr("cached",{id:t,url:e,replace:!!r})},affirm:function(t){var e=this.store.getAttr("cached");if(this.store.setAttr("cached",{}),!e||e.id!=t)return!1;var r=this.getTop();if(r&&r.id===t)return!1;var i=this.store.getAttr("stack")||[];i.replace&&i.pop(),i.push(e),this.store.setAttr("stack",i)},back:function(t){var e=this.getTop()||{};if(e.id==t)return this.popTop(),this.getTop()},getCached:function(){return this.store.getAttr("cached")},getTop:function(){var t=this.store.getAttr("stack")||[];return t.length?t[Math.max(t.length-1,0)]:null},popTop:function(){var t=this.store.getAttr("stack")||[],e=t.pop();return this.store.setAttr("stack",t),e},fallback:function(t){var e,r=this.store.getAttr("stack")||[],i=-1;return n.each(r,function(e,r){return e.id===t?(i=r,!0):void 0},null,!0),i>-1&&(e=r.splice(i)),e},clear:function(){this.store.remove()}}),c=o.extend({propertys:function(){},initialize:function($super,t){var e={};n.each(t,function(t,r){e[t.id]=t}),this.tree=e},getNode:function(t){return this.tree[t]},getPrevNode:function(t){var e=this.getNode(t);if(e)return this.getNode(e.prev)},getPrevUrl:function(t,e,r){var n=this.getPrevNode(t);return n?i(n,e,r):null},checkPrevRange:function(t,e){var r=this.getNode(t);return r&&r.prevRange?r.prevRange.indexOf(e)>-1?!0:!1:!0}}),a=/\{([^\{\}]*)\}/gim;return o.extend({initialize:function($super){this.stack=new s(this.buildStackStore()),this.tree=new c(this.buildTreeConfig())},buildTreeConfig:function(){throw"not override `buildTreeConfig` method"},buildStackStore:function(){throw"not override `buildStackStore` method"},forward:function(t,e){this.stack.forward(t,e)},affirm:function(t){this.stack.affirm(t)},replace:function(t,e){this.stack.forward(t,e,!0)},back:function(t,e,r){{var i=this.stack.back(t);this.tree.getNode(t)}return i&&this.tree.checkPrevRange(t,i.id)?i.url:this.tree.getPrevUrl(t,e,r)},clear:function(){this.stack.clear()}})});
define("mvc/layout.full.js",["mvc/layout"],function(t,o,n){var i=t("mvc/layout"),r='<div class="layout-main"></div>';return i.extend({propertys:function(){this.root=$(r)},initialize:function($super,t){$super(t)},getRoot:function(){return this.root},getFrameBoxs:function(){return{main:this.root}}})});
define("mvc/layout.js",["base/event"],function(e,t,o){var n=e("base/event"),i=n.extend({propertys:function(){this.app},initialize:function($super,e){this.app=e,$super()},getRoot:function(){throw'no override method "getRoot"!'},getFrameBoxs:function(){throw'no override method "getContainers"!'}});return i});
define("mvc/layout.updown.js",["mvc/layout"],function(t,n,o){var i=t("mvc/layout"),e="layout-head",a="layout-content",r=['<div class="layout-main">','<div class="'+e+'"></div>','<div class="'+a+'"></div>',"</div>"].join("");return i.extend({propertys:function(){this.root=$(r),this.header=this.root.find("."+e),this.content=this.root.find("."+a)},initialize:function($super,t){$super(t)},getRoot:function(){return this.root},getFrameBoxs:function(){return{header:this.header,content:this.content}}})});
define("mvc/transition.default.js",["mvc/transition.interface"],function(n,e,s){var o=n("mvc/transition.interface"),i="default_forward_out",a="default_forward_in",d="default_back_out",t="default_back_in",r=o.extend({into:function(n,e,s,r){n.removeClass([i,a,d,t].join(" ")),e.removeClass([i,a,d,t].join(" ")),e.show(),n.show(),n.css("z-index",o.getTopIndexZ()),e.css("z-index",o.getTopIndexZ()),n.addClass(i),e.addClass(a),o.removeTransitionEnd(e),o.addTransitionEnd(e,function(){e.removeClass(a),s&&s.call(r)}),o.removeTransitionEnd(n),o.addTransitionEnd(n,function(){n.hide(),n.removeClass(i)})},out:function(n,e,s,r){n.removeClass([i,a,d,t].join(" ")),e.removeClass([i,a,d,t].join(" ")),e.show(),n.show(),n.addClass(d),e.addClass(t),e.css("z-index",o.getTopIndexZ()),n.css("z-index",o.getTopIndexZ()),o.removeTransitionEnd(e),o.addTransitionEnd(e,function(){e.removeClass(t)}),o.removeTransitionEnd(n),o.addTransitionEnd(n,function(){n.hide(),n.removeClass(d),s&&s.call(r)})},isAnimation:function(n){return n.hasClass([i,a,d,t].join(" "))}});return new r});
define("mvc/transition.header.js",["mvc/transition.interface"],function(n,e,s){var o=n("mvc/transition.interface"),i="header_forward_out",a="header_forward_in",d="header_back_out",r="header_back_in",t=o.extend({into:function(n,e,s,t){n.removeClass([i,a,d,r].join(" ")),e.removeClass([i,a,d,r].join(" ")),e.show(),n.show(),n.css("z-index",o.getTopIndexZ()),e.css("z-index",o.getTopIndexZ()),n.addClass(i),e.addClass(a),o.removeTransitionEnd(e),o.addTransitionEnd(e,function(){e.removeClass(a),s&&s.call(t)}),o.removeTransitionEnd(n),o.addTransitionEnd(n,function(){n.hide(),n.removeClass(i)})},out:function(n,e,s,t){n.removeClass([i,a,d,r].join(" ")),e.removeClass([i,a,d,r].join(" ")),e.show(),n.show(),n.addClass(d),e.addClass(r),e.css("z-index",o.getTopIndexZ()),n.css("z-index",o.getTopIndexZ()),o.removeTransitionEnd(e),o.addTransitionEnd(e,function(){e.removeClass(r)}),o.removeTransitionEnd(n),o.addTransitionEnd(n,function(){n.hide(),n.removeClass(d),s&&s.call(t)})},isAnimation:function(n){return n.hasClass([i,a,d,r].join(" "))}});return new t});
define("mvc/transition.header.notanimte.js",["mvc/transition.interface"],function(n,e,i){var t=n("mvc/transition.interface"),o=t.extend({into:function(n,e,i,o){n.hide(),e.show(),n.css("z-index",t.getTopIndexZ()),e.css("z-index",t.getTopIndexZ()),i&&i.call(o)},out:function(n,e,i,o){n.hide(),e.show(),n.css("z-index",t.getTopIndexZ()),e.css("z-index",t.getTopIndexZ()),i&&i.call(o)},isAnimation:function(n){return!1}});return new o});
define("mvc/transition.interface.js",["base/object","common/funs"],function(n,e,t){var o=n("base/object"),i=n("common/funs"),m=o.extend({into:function(n,e,t){throw"Please implement 'into' method"},out:function(n,e,t){throw"Please implement 'out' method"},isAnimation:function(){throw"Please implement 'isAnimation' method"}}),a="webkitAnimation"in document.body.style?"webkitAnimationEnd":"animationend";return m.getTopIndexZ=i.createAddSelf(1e3),m.addTransitionEnd=function(n,e){n.on(a,e)},m.removeTransitionEnd=function(n,e){n.off(a,e)},m});
define("mvc/transition.notanime.js",["mvc/transition.interface"],function(n,i,t){var e=n("mvc/transition.interface"),o=e.extend({into:function(n,i,t,e){n.hide(),i.show(),t&&t.call(e)},out:function(n,i,t,e){n.hide(),i.show(),t&&t.call(e)},isAnimation:function(n){return!1}});return new o});
define("mvc/view.js",["base/base","base/event","common/funs"],function(t,e,i){function n(){}function a(t){var e=(t||"").replace(/^\s+|\s+$/g,"").split(/\s+/);return{event:e.shift(),selector:e.join(" ")}}function s(){var t=this.events||{};o.each(t,function(t,e){var i=a(e),t=o.bind("function"==typeof t?t:this[t]||n,this);this.root.on(i.event,i.selector,t)},this)}var o=t("base/base"),r=t("base/event"),h=t("common/funs"),f=(function(t){var e=+new Date;return function(){return"page"+e+t()}}(h.createAddSelf()),"viewroot-box"),u="viewroot-bg",c="viewroot",d=r.extend({elastic:!0,propertys:function(t,e,i,n){this.$=function(t){return this.el.find(t)}.bind(this),this.id=e.view,this.root=$('<div class="'+f+'"><div class="'+u+'"></div><div class="'+c+'"></div></div>'),this.el=this.root.find("."+c),this.root.attr("id",this.id),this.root.hide(),this.on("addframe",function(){}),s.call(this),this.frame=i,this.app=n,this.name=t,this.hashdata=e,this.onCreate(),this.emit("onCreate")},$P:function(t,e){return this.hashdata.path[t]||e},$Q:function(t,e){return this.hashdata.query[t]||e},setHashData:function(t){this.hashdata=t},getRoot:function(){return this.root},getRootBg:function(){return this.root.find("."+u)},turning:function(){this.frame.turning.apply(this.frame,arguments)},onCreate:function(){},onLoad:function(){},onShow:function(){},onHide:function(){},forward:function(){this.app.forward.apply(this.app,arguments)},isForward:function(){return this.hashdata.forward},replace:function(){this.app.replace.apply(this.app,arguments)},back:function(){this.app.back.apply(this.app,arguments)},toHead:function(t,e){this.frame.toHead(t,e)},showToast:function(){this.frame.showToast.apply(this.frame,arguments)},hideToast:function(){this.frame.hideToast.apply(this.frame,arguments)},showAlert:function(t){this.frame.showAlert.apply(this.frame,arguments)},hideAlert:function(){this.frame.hideAlert.apply(this.frame,arguments)},showLoading:function(t){this.frame.showLoading.apply(this.frame,arguments)},hideLoading:function(){this.frame.hideLoading.apply(this.frame,arguments)},showHeader:function(){this.frame.showHeader.apply(this.frame,arguments)},hideHeader:function(){this.frame.hideHeader.apply(this.frame,arguments)},getHeaderRoot:function(){return this.frame.header.getRoot()}});return d});
define("storage/local.storage.js",["storage/storage"],function(e,a,o){var r=e("storage/storage");return new r(localStorage)});
define("storage/local.store.js",["storage/store","storage/local.storage"],function(e,o,r){var t=e("storage/store"),a=e("storage/local.storage");return t.extend({buildStorage:function(){return a}})});
define("storage/session.storage.js",["storage/storage"],function(e,s,o){var r=e("storage/storage");return new r(sessionStorage)});
define("storage/session.store.js",["storage/store","storage/session.storage"],function(e,s,o){var r=e("storage/store"),t=e("storage/session.storage");return r.extend({buildStorage:function(){return t}})});
define("storage/storage.js",["base/base","base/object"],function(t,e,r){var s=t("base/base"),i=t("base/object");return i.extend({propertys:function(){this.proxy},initialize:function(t){this.proxy=t},get:function(t){var e,r=this.proxy.getItem(t);try{e=JSON.parse(r)}catch(s){}return e},set:function(t,e){var r=JSON.stringify(e);this.proxy.setItem(t,r)},setAttr:function(t,e,r){var i=this.get(t)||{};s.path(i,e,r),this.set(t,i)},getAttr:function(t,e){var r=this.get(t)||{};return s.path(r,e)},remove:function(t){this.proxy.removeItem(t)}})});
define("storage/store.js",["base/base","base/event"],function(e,t,i){function a(e){if("number"==typeof e)return isNaN(e)&&(e=0),e;var t=0;return(e||"").replace(o,function(e,i,a){switch(a=a.toUpperCase(),i=parseInt(i),a){case"Y":t+=31536e6*i;break;case"M":t+=2592e6*i;break;case"W":t+=6048e5*i;break;case"D":t+=864e5*i;break;case"H":t+=36e5*i;break;case"I":t+=6e4*i;break;case"S":t+=1e3*i}}),t}function r(e,t,i){return{value:e,timeout:t,tag:i}}var s=e("base/base"),n=e("base/event"),o=/([\d\.]+)([a-z])/gi,u=n.extend({propertys:function(){this.storage=this.buildStorage(),this.name=this.buildName(),this.timeout=a(this.buildTimeout())},initialize:function(){},set:function(e,t){var i=JSON.stringify(e),a=(new Date).valueOf()+this.timeout,s=r(i,a,t);this.storage.set(this.name,s)},get:function(e){var t=this.storage.get(this.name);if(!(!t||new Date>t.timeout||e&&e!==t.tag))try{return JSON.parse(t.value)}catch(i){}},getTag:function(){var e=this.storage.get(this.name);return e&&e.tag},setAttr:function(e,t,i){var a=this.get()||{};void 0===t&&(t=null),s.path(a,e,t),i=i||this.getTag(),this.set(a,i)},delAttr:function(e,t,i){var a=this.get()||{};s.delPath(a,e,t),i=i||this.getTag(),this.set(a,i)},getAttr:function(e,t){return s.path(this.get(t),e)},remove:function(){this.storage.remove(this.name)},buildName:function(){throw"Please override the `buildName` method"},buildTimeout:function(){throw"Please override the `buildTimeout` method"},buildStorage:function(){throw"Please override the `buildStorage` method"}});return u});
define("ui/base.js",["base/base","common/funs"],function(e,t,n){var r=(e("base/base"),e("common/funs")),s={};s.getOffsetByPage=function(e){var t=0,n=0;if(!e)return{left:t,top:n};do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{top:n,left:t}},s.getPageSize=function(){return document.body?{height:document.body.scrollHeight,width:document.body.scrollWidth}:{width:0,height:0}},s.createZIndex=function(e,t){return function(){return t+e()}}(r.createAddSelf(),2e3),s.createUiId=function(e){return function(){return"uiId_"+e()}}(r.createAddSelf()),s.createFnName=function(e){return function(){return"fn_"+e()}}(r.createAddSelf()),s.cssPrefix=function(){return"-webkit-"}();var f=/translate(x|y|z)\((-?[\w\.]+)\)/gim,a=/translate(?:3d|2d)?\(\s*(-?[\w\.]+)\s*,\s*(-?[\w\.-]+)\s*(?:,\s*(-?[\w\.-]+)\s*)?\)/i;return s.getTranslate=function(e){var t,n=$(e).css(s.cssPrefix+"transform"),r={};return n.match(f)?n.replace(f,function(e,t,n){r[t]=n}):(t=a.exec(n))&&(r.x=t[1],r.y=t[2],r.z=t[3]),r},s.setTranslate=function(e,t){var n=$(e);t=t||{};var r=[t.x||"0px",t.y||"0px",t.z||"0px"];n.css(s.cssPrefix+"transform","translate3D("+r.join(",")+")")},s});
define("ui/dialog.js",["base/base","ui/layer"],function(i){function t(i){var t=$();return s.each(i,function(i){var e=$("<button></button>");if(e.html(i.title||""),i.click&&e.on("click",i.click.bind(this)),i.cls&&e.addClass(i.cls),i.events){var n={};s.each(i.events,function(i,t){n[t]=i.bind(this)},this),e.on(n)}t.push(e[0])},this),t}var s=i("base/base"),e=i("ui/layer"),n={};n.UI_DIALOG="ui-dialog",n.UI_DIALOG_BOX="ui-dialog-box",n.UI_DIALOG_CLOSE="ui-dialog-close",n.UI_DIALOG_PADDING="ui-dialog-padding",n.UI_DIALOG_HEAD="ui-dialog-head",n.UI_DIALOG_HEAD_TITLE="ui-dialog-head-title",n.UI_DIALOG_CONTENT="ui-dialog-content",n.UI_DIALOG_BUTTONS="ui-dialog-buttons";var o=[{title:"确认",click:function(){this.hide()}}];return e.extend({propertys:function(){this.title="",this.content="",this.buttons=[],this.hideTitle=!1,this.hideClose=!1,this.doms={},this.on("create",function(){this.$el.addClass(n.UI_DIALOG),s.each(n,function(i){this.doms[i]=this.$el.find("."+i)},this),this.update()}),this.on("show",function(){this.updatePosition()})},initialize:function($super,i){$super(i)},setOption:function($super,i){i=i||{},$super(i),s.isNUL(i.title)||(this.title=i.title),s.isNUL(i.content)||(this.content=i.content),this.buttons=i.buttons&&i.buttons.length?i.buttons:o,s.isNUL(i.hideTitle)||(this.hideTitle=i.hideTitle),s.isNUL(i.hideClose)||(this.hideClose=i.hideClose)},update:function(){if(this.$el){this.hideClose?this.doms[n.UI_DIALOG_CLOSE].hide():this.doms[n.UI_DIALOG_CLOSE].show(),this.hideTitle?this.doms[n.UI_DIALOG_HEAD].hide():this.doms[n.UI_DIALOG_HEAD].show(),this.doms[n.UI_DIALOG_HEAD_TITLE].html(this.title),this.doms[n.UI_DIALOG_CONTENT].html(this.content);var i=t.call(this,this.buttons);this.doms[n.UI_DIALOG_BUTTONS].empty(),this.doms[n.UI_DIALOG_BUTTONS].append(i)}},createHTML:function(){return['<div class="'+n.UI_DIALOG_BOX+'">','<span class="'+n.UI_DIALOG_CLOSE+'"></span>','<div class="'+n.UI_DIALOG_PADDING+'">','<div class="'+n.UI_DIALOG_HEAD+'">','<span class="'+n.UI_DIALOG_HEAD_TITLE+'"></span>',"</div>",'<div class="'+n.UI_DIALOG_CONTENT+'"></div>','<div class="'+n.UI_DIALOG_BUTTONS+'"></div>',"</div>","</div>"].join("")},show:function($super,i){$super(i),i&&(this.setOption(i),this.update())}})});
define("ui/layer.js",["base/base","ui/base","ui/object","ui/mask"],function(t){var s=t("base/base"),i=t("ui/base"),e=t("ui/object"),h=t("ui/mask");return e.extend({propertys:function(){this.offsetX=0,this.offsetY=0,this.useMask=!0,this.mask=null,this.maskOpacity=!0,this.on("create",function(){this.$el.addClass("ui-layer"),this.useMask&&(this.mask=new h)}),this.on("show",function(){this.startAutoPosition(),this.useMask&&(this.mask.show(!this.maskOpacity),this.mask.topIndex()),this.updatePosition(),setTimeout(function(){this.updatePosition()}.bind(this),0),this.topIndex()}),this.on("hide",function(){this.useMask&&this.mask.hide(),this.endAutoPosition()}),this.on("resize",function(){this.updatePosition()})},initialize:function($super,t){$super(t)},setOption:function($super,t){t=t||{},$super(t),s.isNUL(t.offsetX)||(this.offsetX=t.offsetX),s.isNUL(t.offsetY)||(this.offsetY=t.offsetY),s.isNUL(t.useMask)||(this.useMask=t.useMask),s.isNUL(t.maskOpacity)||(this.maskOpacity=t.maskOpacity)},getPosInfo:function(){if(this.$el&&this.$el.length){var t=i.getOffsetByPage(this.$el[0]),s=i.getPageSize();return{top:t.top,left:t.left,width:this.$el.width(),height:this.$el.height(),pageWidth:s.width,pageHeight:s.height}}return null},updatePosition:function(){var t=this.getPosInfo();t&&this.$el.css({"margin-left":-t.width/2+this.offsetX+"px","margin-top":-t.height/2+this.offsetY+"px"})},createHTML:function(){return""},show:function($super,t){t&&!s.isNUL(t.maskOpacity)&&(this.maskOpacity=t.maskOpacity),$super(t)}})});
define("ui/loading.js",["ui/layer"],function(i){var c=i("ui/layer");return c.extend({propertys:function(){this.on("create",function(){this.$el.addClass("ui-loading")}),this.useMask=!0},initialize:function($super,i){$super(i)},createHTML:function(){return'<div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>'}})});
define("ui/mask.js",["base/base","ui/object"],function(t){function i(){if(this.click&&this.$el.on("click",this.click.bind(this)),this.events){e.each(this.events,function(t,i){this.$el.on(i,t.bind(this))},this)}this.$el.on("touchmove",function(t){t.preventDefault()})}var e=t("base/base"),n=t("ui/object"),s="ui-mask-not-opacity";return n.extend({propertys:function(){this.on("create",function(){this.$el.addClass("ui-mask"),i.call(this),this.on("show",function(){this.topIndex()})})},initialize:function($super,t){$super(t)},setOption:function($super,t){t=t||{},$super(t),t.click&&(this.click=t.click),t.events&&(this.events=t.events)},createHTML:function(){return""},show:function($super,t){$super(),t?this.$el.addClass(s):this.$el.removeClass(s)}})});
define("ui/object.js",["base/base","ui/base","base/event","common/funs"],function(t){var s=t("base/base"),i=t("ui/base"),e=t("base/event"),n=t("common/funs"),o="ui-root",h=$(window),a=e.extend({propertys:function(){this.uiId=i.createUiId(),this.status=a.STATUS_NOT_CREATE,this.$el=null,this.useRoot=!0,this.container=null,this.__autoFnName=this.randFn(function(){this.emit("resize")})},initialize:function($super,t){$super(t),this.setOption(t)},setOption:function($super,t){t=t||{},$super(t),s.isNUL(t.useRoot)||(this.useRoot=t.useRoot),this.container=s.isNUL(t.container)?$("body"):t.container,s.isNUL(t.cls)||this.on("create",function(){this.$el.addClass(t.cls)})},randFn:function(t){var s=i.createFnName();return this[s]=t.bind(this),s},getUiId:function(){return this.uiId},create:function(){(this.status===a.STATUS_NOT_CREATE||this.status===a.STATUS_DESTROY)&&(this.useRoot?(this.$el=$('<div class="'+o+'" id="'+this.getUiId()+'"></div>'),this.$el.append(this.createHTML())):this.$el=$(this.createHTML()),this.$el.hide(),this.container.append(this.$el),this.status=a.STATUS_CREATE,this.emit("create"))},createHTML:function(){throw"error: not override createHTML"},show:function(){this.create(),(this.status===a.STATUS_CREATE||this.status===a.STATUS_SHOW||this.status===a.STATUS_HIDE)&&(this.$el.show(),this.status===a.STATUS_SHOW,this.emit("show"))},hide:function(){(this.status===a.STATUS_CREATE||this.status===a.STATUS_SHOW||this.status===a.STATUS_HIDE)&&(this.$el.hide(),this.status===a.STATUS_HIDE,this.emit("hide"))},topIndex:function(){this.$el&&this.$el.css("zIndex",i.createZIndex())},createDomId:function(t){return function(){return"comid-"+t()}}(n.createAddSelf()),destroy:function(){this.$el&&(this.$el.remove(),this.$el=null,this.status=a.STATUS_DESTROY,this.emit("destroy"))},startAutoPosition:function(){this[this.__autoFnName]&&h.off("resize",this[this.__autoFnName]),h.on("resize",this[this.__autoFnName])},endAutoPosition:function(){h.off("resize",this[this.__autoFnName])}});return a.STATUS_NOT_CREATE=0,a.STATUS_CREATE=1,a.STATUS_SHOW=2,a.STATUS_HIDE=3,a.STATUS_DESTROY=4,a});
define("ui/slide.js",["ui/base","ui/object","base/base","common/funs"],function(t){function i(t){var i=$(f);return i.append(t),i}function s(){this.items&&d.each(this.items,function(t){this.add(t)},this),this.subbox=this.$el.find("."+l)}function e(){var t=this.$el.width(),i=this.$el.find("."+c),s=i.length*t;this.$el.find("."+l).css("width",s+"px"),i.width(t)}function n(){this.$el[0].addEventListener("touchstart",this,!1),this.$el[0].addEventListener("touchmove",this,!1),this.$el[0].addEventListener("touchend",this,!1)}var h=t("ui/base"),a=t("ui/object"),d=t("base/base"),o=(t("common/funs"),"ui-slide-box"),l="ui-slide-sub-box",c="ui-slide-item",u="ui-slide-trans",r="ui-slide-nav",x="ui-slide-cur-nav",f='<div class="'+c+'"></div>';return a.extend({propertys:function(){this.on("create",function(){this.$el.addClass(o),s.call(this),n.call(this),this.to(this.index)}),this.itemWidth=0,this.length=0,this.on("sizechange",function(){var t=this.$el.find("."+c);this.length=t.length}),this.on("show",function(){e.call(this);var t=this.$el.find("."+c);this.itemWidth=t.width(),this.startAutoPosition()}),this.on("hide",function(){this.endAutoPosition()}),this.on("resize",function(){e.call(this),this.to(this.index)}),this.items=[],this.index=0},createHTML:function(){return['<div class="'+l+'"></div>','<div class="'+r+'"></div>'].join("")},initialize:function($super,t){$super(t)},setOption:function($super,t){t=t||{},$super(t),t.items&&(this.items=t.items),t.index&&(this.index=t.index)},tx:0,dx:0,handleEvent:function(t){var i,s=t.changedTouches[0];switch(t.type){case"touchstart":this.subbox.removeClass(u),this.tx=s.pageX,this.dx=parseInt(h.getTranslate(this.subbox).x||0);break;case"touchmove":i=s.pageX-this.tx;var e=this.dx+i;e>0?e=0:e<-(this.itemWidth*Math.max(this.length-1,0))&&(e=-(this.itemWidth*Math.max(this.length-1,0))),h.setTranslate(this.subbox,{x:e+"px",y:"0px",z:"0px"});break;case"touchend":case"touchcancel":i=s.pageX-this.tx,this.subbox.addClass(u),setTimeout(function(){return Math.abs(i)<20?void h.setTranslate(this.subbox,{x:this.dx+"px",y:"0px",z:"0px"}):void(i>0?this.pre():this.next())}.bind(this),0)}},add:function(t,s){if(this.$el){var t=i.call(this,t);"number"==typeof s&&s!=0/0?0>s?this.$el.find("."+c).eq(0).before(t):this.$el.find("."+c).eq(s).after(t):this.$el.find("."+l).append(t);var e=this.createDomId();t.attr("id",e);var n=this.$el.find("."+r),h=$("<span></span>");h.attr("id","from-"+e),n.append(h),this.emit("sizechange")}},remove:function(t){if(this.$el){var i=this.$el.find("."+c).eq(t);i.length&&(i.remove(),this.emit("sizechange"))}},to:function(t){var i=0;t>=this.length&&(t=Math.max(this.length-1,0)),0>t&&(t=0),i=-(this.$el.width()*t),h.setTranslate(this.$el.find("."+l),{x:i+"px",y:"0px",z:"0px"});var s=this.$el.find("."+r).find("span").eq(t);s.addClass(x),s.siblings().removeClass(x),this.index=t},pre:function(){this.to(this.index-1)},next:function(){this.to(this.index+1)}})});
define("ui/toast.js",["base/base","ui/layer"],function(t){function i(){this.$el&&this.$el.on("click",function(){this.click&&this.click.apply(this,arguments)}.bind(this))}function n(){}function c(t){0>=t||(this.updatePosition(),setTimeout(function(){c.call(this,t-1)}.bind(this),20))}var s=t("base/base"),e=t("ui/layer"),o={},h="ui-toast";return o.UI_TOAST_CONTENT="ui-toast-content",e.extend({propertys:function(){this.doms={},this.on("create",function(){this.$el.addClass(h),s.each(o,function(t){this.doms[t]=this.$el.find("."+t)},this),i.call(this)}),this.on("show",function(){this.update(),c.call(this,3)}),this.click=n,this.content=""},initialize:function($super,t){$super(t)},setOption:function($super,t){t=t||{},$super(t),s.isNUL(t.content)||(this.content=t.content),s.isNUL(t.click)||(this.click=t.click)},createHTML:function(){return'<div class="'+o.UI_TOAST_CONTENT+'"></div>'},update:function(){this.$el&&this.doms[o.UI_TOAST_CONTENT].html(this.content)},show:function($super,t){t&&(t.click&&(this.click=opitons.click),t.content&&(this.content=t.content),t.timeout&&setTimeout(function(){this.hide(),t.callback&&t.callback.call(this)}.bind(this),1e3*t.timeout)),$super(t)}})});